function Map(){this.elements=[];this.size=function(){return this.elements.length};this.isEmpty=function(){return this.elements.length<1};this.clear=function(){this.elements=[]};this.put=function(n,t){this.elements.push({key:n,value:t})};this.remove=function(n){var t=!1;try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==n)return this.elements.splice(i,1),!0}catch(r){t=!1}return t};this.get=function(n){try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==n)return this.elements[i].value}catch(t){return null}};this.element=function(n){return n<0||n>=this.elements.length?null:this.elements[n]};this.containsKey=function(n){var t=!1;try{for(i=0;i<this.elements.length;i++)this.elements[i].key==n&&(t=!0)}catch(r){t=!1}return t};this.containsValue=function(n){var t=!1;try{for(i=0;i<this.elements.length;i++)this.elements[i].value==n&&(t=!0)}catch(r){t=!1}return t};this.values=function(){var n=[];for(i=0;i<this.elements.length;i++)n.push(this.elements[i].value);return n};this.keys=function(){var n=[];for(i=0;i<this.elements.length;i++)n.push(this.elements[i].key);return n}}var ArrayList,Handsontable;(function(n){n.widget("ui.labeledslider",n.ui.slider,{version:"@VERSION",options:{tickInterval:0,tickLabels:null},uiSlider:null,tickInterval:0,_create:function(){this._detectOrientation();this.uiSlider=this.element.wrap('<div class="ui-slider-wrapper ui-widget"><\/div>').before('<div class="ui-slider-labels">').parent().addClass(this.orientation).css("font-size",this.element.css("font-size"));this._super();this.element.removeClass("ui-widget");this._alignWithStep();this.orientation=="horizontal"?this.uiSlider.width(this.element.width()):this.uiSlider.height(this.element.height());this._drawLabels()},_drawLabels:function(){var e=this.options.tickLabels||{},o=this.uiSlider.children(".ui-slider-labels"),s=this.orientation=="horizontal"?"left":"bottom",i=this.options.min,h=this.options.max,r=this.tickInterval,u=(h-i)/r,t=0,f;for(o.html(""),f="";t<=u;t++)f=t==0?"ui-slider-label-first":t==u?"ui-slider-label-last":"",n("<div>").addClass("ui-slider-label-ticks").css(s,Math.round(t/u*1e4)/100+"%").html("<span>"+(e[t*r+i]?e[t*r+i]:t*r+i)+"<\/span>").addClass(f).appendTo(o)},_setOption:function(n,t){this._super(n,t);switch(n){case"tickInterval":case"tickLabels":case"min":case"max":case"step":this._alignWithStep();this._drawLabels();break;case"orientation":this.element.removeClass("horizontal vertical").addClass(this.orientation);this._drawLabels()}},_alignWithStep:function(){this.tickInterval=this.options.tickInterval<this.options.step?this.options.step:this.options.tickInterval},_destroy:function(){this._super();this.uiSlider.replaceWith(this.element)},widget:function(){return this.uiSlider}})})(jQuery),function(n){n.widget("ui.combobox",{_create:function(){this.wrapper=n("<span>").addClass("ui-combobox").insertAfter(this.element);this.element.hide();this._createAutocomplete();this._createShowAllButton()},_createAutocomplete:function(){var t=this.element.children(":selected"),i=t.val()?t.text():"";this.input=n("<input>").appendTo(this.wrapper).val(i).attr("title","").addClass("ui-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left").autocomplete({delay:0,minLength:0,source:n.proxy(this,"_source"),create:function(){n(".ui-autocomplete").wrap('<div class="fit-ui" />')}}).tooltip({tooltipClass:"ui-state-highlight"});this._on(this.input,{autocompleteselect:function(n,t){t.item.option.selected=!0;this._trigger("select",n,{item:t.item.option})},autocompletechange:"_removeIfInvalid"})},_createShowAllButton:function(){var t=this.input,i=!1;n("<a>").attr("tabIndex",-1).attr("title","Show All Items").tooltip({open:function(t,i){n("#"+i.tooltip[0].id).wrap('<div class="fit-ui" />')},close:function(t,i){n("#"+i.tooltip[0].id).parent().remove()}}).appendTo(this.wrapper).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("ui-combobox-toggle ui-corner-right").mousedown(function(){i=t.autocomplete("widget").is(":visible")}).click(function(){(t.focus(),i)||t.autocomplete("search","")})},_source:function(t,i){var r=new RegExp(n.ui.autocomplete.escapeRegex(t.term),"i");i(this.element.children("option").map(function(){var i=n(this).text();if(this.value&&(!t.term||r.test(i)))return{label:i,value:i,option:this}}))},_removeIfInvalid:function(t,i){if(!i.item){var r=this.input.val(),f=r.toLowerCase(),u=!1;(this.element.children("option").each(function(){if(n(this).text().toLowerCase()===f)return this.selected=u=!0,!1}),u)||(this.input.val("").attr("title",r+" didn't match any item").tooltip("open"),this.element.val(""),this._delay(function(){this.input.tooltip("close").attr("title","")},2500),this.input.data("ui-autocomplete").term="")}},_destroy:function(){this.wrapper.remove();this.element.show()}})}(jQuery),function(n){function t(n,t){if(!(n.originalEvent.touches.length>1)){n.preventDefault();var i=n.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null);n.target.dispatchEvent(r)}}if(n.support.touch="ontouchend"in document,n.support.touch){var i=n.ui.mouse.prototype,u=i._mouseInit,r;i._touchStart=function(n){var i=this;!r&&i._mouseCapture(n.originalEvent.changedTouches[0])&&(r=!0,i._touchMoved=!1,t(n,"mouseover"),t(n,"mousemove"),t(n,"mousedown"))};i._touchMove=function(n){r&&(this._touchMoved=!0,t(n,"mousemove"))};i._touchEnd=function(n){r&&(t(n,"mouseup"),t(n,"mouseout"),this._touchMoved||t(n,"click"),r=!1)};i._mouseInit=function(){var t=this;t.element.bind("touchstart",n.proxy(t,"_touchStart")).bind("touchmove",n.proxy(t,"_touchMove")).bind("touchend",n.proxy(t,"_touchEnd"));u.call(t)}}}(jQuery);window.Modernizr=function(n,t,i){function a(n){c.cssText=n}function vt(n,t){return a(y.join(n+";")+(t||""))}function h(n,t){return typeof n===t}function v(n,t){return!!~(""+n).indexOf(t)}function lt(n,t){var u,r;for(u in n)if(r=n[u],!v(r,"-")&&c[r]!==i)return t=="pfx"?r:!0;return!1}function yt(n,t,r){var f,u;for(f in n)if(u=t[n[f]],u!==i)return r===!1?n[f]:h(u,"function")?u.bind(r||t):u;return!1}function f(n,t,i){var r=n.charAt(0).toUpperCase()+n.slice(1),u=(n+" "+ot.join(r+" ")+r).split(" ");return h(t,"string")||h(t,"undefined")?lt(u,t):(u=(n+" "+st.join(r+" ")+r).split(" "),yt(u,t,i))}function pt(){u.input=function(i){for(var r=0,u=i.length;r<u;r++)w[i[r]]=!!(i[r]in o);return w.list&&(w.list=!!(t.createElement("datalist")&&n.HTMLDataListElement)),w}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));u.inputtypes=function(n){for(var u=0,r,f,e,h=n.length;u<h;u++)o.setAttribute("type",f=n[u]),r=o.type!=="text",r&&(o.value=g,o.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&o.style.WebkitAppearance!==i?(s.appendChild(o),e=t.defaultView,r=e.getComputedStyle&&e.getComputedStyle(o,null).WebkitAppearance!=="textfield"&&o.offsetHeight!==0,s.removeChild(o)):/^(search|tel)$/.test(f)||(r=/^(url|email)$/.test(f)?o.checkValidity&&o.checkValidity()===!1:o.value!=g)),ht[n[u]]=!!r;return ht}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var u={},d=!0,s=t.documentElement,e="modernizr",ut=t.createElement(e),c=ut.style,o=t.createElement("input"),g=":)",ft={}.toString,y=" -webkit- -moz- -o- -ms- ".split(" "),et="Webkit Moz O ms",ot=et.split(" "),st=et.toLowerCase().split(" "),p={svg:"http://www.w3.org/2000/svg"},r={},ht={},w={},nt=[],tt=nt.slice,b,l=function(n,i,r,u){var l,a,c,v,f=t.createElement("div"),h=t.body,o=h||t.createElement("body");if(parseInt(r,10))while(r--)c=t.createElement("div"),c.id=u?u[r]:e+(r+1),f.appendChild(c);return l=["&#173;",'<style id="s',e,'">',n,"<\/style>"].join(""),f.id=e,(h?f:o).innerHTML+=l,o.appendChild(f),h||(o.style.background="",o.style.overflow="hidden",v=s.style.overflow,s.style.overflow="hidden",s.appendChild(o)),a=i(f,n),h?f.parentNode.removeChild(f):(o.parentNode.removeChild(o),s.style.overflow=v),!!a},at=function(t){var i=n.matchMedia||n.msMatchMedia,r;return i?i(t)&&i(t).matches||!1:(l("@media "+t+" { #"+e+" { position: absolute; } }",function(t){r=(n.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position=="absolute"}),r)},ct=function(){function r(r,u){u=u||t.createElement(n[r]||"div");r="on"+r;var f=r in u;return f||(u.setAttribute||(u=t.createElement("div")),u.setAttribute&&u.removeAttribute&&(u.setAttribute(r,""),f=h(u[r],"function"),h(u[r],"undefined")||(u[r]=i),u.removeAttribute(r))),u=null,f}var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return r}(),it={}.hasOwnProperty,rt,k;rt=h(it,"undefined")||h(it.call,"undefined")?function(n,t){return t in n&&h(n.constructor.prototype[t],"undefined")}:function(n,t){return it.call(n,t)};Function.prototype.bind||(Function.prototype.bind=function(n){var t=this,i,r;if(typeof t!="function")throw new TypeError;return i=tt.call(arguments,1),r=function(){var f,e,u;return this instanceof r?(f=function(){},f.prototype=t.prototype,e=new f,u=t.apply(e,i.concat(tt.call(arguments))),Object(u)===u)?u:e:t.apply(n,i.concat(tt.call(arguments)))},r});r.flexbox=function(){return f("flexWrap")};r.canvas=function(){var n=t.createElement("canvas");return!!(n.getContext&&n.getContext("2d"))};r.canvastext=function(){return!!(u.canvas&&h(t.createElement("canvas").getContext("2d").fillText,"function"))};r.webgl=function(){return!!n.WebGLRenderingContext};r.touch=function(){var i;return"ontouchstart"in n||n.DocumentTouch&&t instanceof DocumentTouch?i=!0:l(["@media (",y.join("touch-enabled),("),e,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(n){i=n.offsetTop===9}),i};r.geolocation=function(){return"geolocation"in navigator};r.postmessage=function(){return!!n.postMessage};r.websqldatabase=function(){return!!n.openDatabase};r.indexedDB=function(){return!!f("indexedDB",n)};r.hashchange=function(){return ct("hashchange",n)&&(t.documentMode===i||t.documentMode>7)};r.history=function(){return!!(n.history&&history.pushState)};r.draganddrop=function(){var n=t.createElement("div");return"draggable"in n||"ondragstart"in n&&"ondrop"in n};r.websockets=function(){return"WebSocket"in n||"MozWebSocket"in n};r.rgba=function(){return a("background-color:rgba(150,255,150,.5)"),v(c.backgroundColor,"rgba")};r.hsla=function(){return a("background-color:hsla(120,40%,100%,.5)"),v(c.backgroundColor,"rgba")||v(c.backgroundColor,"hsla")};r.multiplebgs=function(){return a("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(c.background)};r.backgroundsize=function(){return f("backgroundSize")};r.borderimage=function(){return f("borderImage")};r.borderradius=function(){return f("borderRadius")};r.boxshadow=function(){return f("boxShadow")};r.textshadow=function(){return t.createElement("div").style.textShadow===""};r.opacity=function(){return vt("opacity:.55"),/^0.55$/.test(c.opacity)};r.cssanimations=function(){return f("animationName")};r.csscolumns=function(){return f("columnCount")};r.cssgradients=function(){var n="background-image:";return a((n+"-webkit- ".split(" ").join("gradient(linear,left top,right bottom,from(#9f9),to(white));"+n)+y.join("linear-gradient(left top,#9f9, white);"+n)).slice(0,-n.length)),v(c.backgroundImage,"gradient")};r.cssreflections=function(){return f("boxReflect")};r.csstransforms=function(){return!!f("transform")};r.csstransforms3d=function(){var n=!!f("perspective");return n&&"webkitPerspective"in s.style&&l("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){n=t.offsetLeft===9&&t.offsetHeight===3}),n};r.csstransitions=function(){return f("transition")};r.fontface=function(){var n;return l('@font-face {font-family:"font";src:url("https://")}',function(i,r){var f=t.getElementById("smodernizr"),u=f.sheet||f.styleSheet,e=u?u.cssRules&&u.cssRules[0]?u.cssRules[0].cssText:u.cssText||"":"";n=/src/i.test(e)&&e.indexOf(r.split(" ")[0])===0}),n};r.generatedcontent=function(){var n;return l(["#",e,"{font:0/0 a}#",e,':after{content:"',g,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){n=t.offsetHeight>=3}),n};r.video=function(){var i=t.createElement("video"),n=!1;try{(n=!!i.canPlayType)&&(n=new Boolean(n),n.ogg=i.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=i.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=i.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(r){}return n};r.audio=function(){var i=t.createElement("audio"),n=!1;try{(n=!!i.canPlayType)&&(n=new Boolean(n),n.ogg=i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=i.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(r){}return n};r.localstorage=function(){try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(n){return!1}};r.sessionstorage=function(){try{return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(n){return!1}};r.webworkers=function(){return!!n.Worker};r.applicationcache=function(){return!!n.applicationCache};r.svg=function(){return!!t.createElementNS&&!!t.createElementNS(p.svg,"svg").createSVGRect};r.inlinesvg=function(){var n=t.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==p.svg};r.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(ft.call(t.createElementNS(p.svg,"animate")))};r.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(ft.call(t.createElementNS(p.svg,"clipPath")))};for(k in r)rt(r,k)&&(b=k.toLowerCase(),u[b]=r[k](),nt.push((u[b]?"":"no-")+b));return u.input||pt(),u.addTest=function(n,t){if(typeof n=="object")for(var r in n)rt(n,r)&&u.addTest(r,n[r]);else{if(n=n.toLowerCase(),u[n]!==i)return u;t=typeof t=="function"?t():t;typeof d!="undefined"&&d&&(s.className+=" "+(t?"":"no-")+n);u[n]=t}return u},a(""),ut=o=null,function(n,t){function p(n,t){var i=n.createElement("p"),r=n.getElementsByTagName("head")[0]||n.documentElement;return i.innerHTML="x<style>"+t+"<\/style>",r.insertBefore(i.lastChild,r.firstChild)}function c(){var n=r.elements;return typeof n=="string"?n.split(" "):n}function o(n){var t=h[n[s]];return t||(t={},e++,n[s]=e,h[e]=t),t}function l(n,r,u){if(r||(r=t),i)return r.createElement(n);u||(u=o(r));var f;return f=u.cache[n]?u.cache[n].cloneNode():y.test(n)?(u.cache[n]=u.createElem(n)).cloneNode():u.createElem(n),f.canHaveChildren&&!v.test(n)&&!f.tagUrn?u.frag.appendChild(f):f}function w(n,r){if(n||(n=t),i)return n.createDocumentFragment();r=r||o(n);for(var f=r.frag.cloneNode(),u=0,e=c(),s=e.length;u<s;u++)f.createElement(e[u]);return f}function b(n,t){t.cache||(t.cache={},t.createElem=n.createElement,t.createFrag=n.createDocumentFragment,t.frag=t.createFrag());n.createElement=function(i){return r.shivMethods?l(i,n,t):t.createElem(i)};n.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+c().join().replace(/[\w\-]+/g,function(n){return t.createElem(n),t.frag.createElement(n),'c("'+n+'")'})+");return n}")(r,t.frag)}function a(n){n||(n=t);var u=o(n);return!r.shivCSS||f||u.hasCSS||(u.hasCSS=!!p(n,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),i||b(n,u),n}var u=n.html5||{},v=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,y=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f,s="_html5shiv",e=0,h={},i,r;(function(){try{var n=t.createElement("a");n.innerHTML="<xyz><\/xyz>";f="hidden"in n;i=n.childNodes.length==1||function(){t.createElement("a");var n=t.createDocumentFragment();return typeof n.cloneNode=="undefined"||typeof n.createDocumentFragment=="undefined"||typeof n.createElement=="undefined"}()}catch(r){f=!0;i=!0}})();r={elements:u.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:"3.7.0",shivCSS:u.shivCSS!==!1,supportsUnknownElements:i,shivMethods:u.shivMethods!==!1,type:"default",shivDocument:a,createElement:l,createDocumentFragment:w};n.html5=r;a(t)}(this,t),u._version="2.8.0",u._prefixes=y,u._domPrefixes=st,u._cssomPrefixes=ot,u.mq=at,u.hasEvent=ct,u.testProp=function(n){return lt([n])},u.testAllProps=f,u.testStyles=l,u.prefixed=function(n,t,i){return t?f(n,t,i):f(n,"pfx")},s.className=s.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(d?" js "+nt.join(" "):""),u}(this,this.document),function(n,t,i){function h(n){return"[object Function]"==y.call(n)}function c(n){return"string"==typeof n}function l(){}function w(n){return!n||"loaded"==n||"complete"==n||"uninitialized"==n}function e(){var n=a.shift();v=1;n?n.t?s(function(){("c"==n.t?u.injectCss:u.injectJs)(n.s,0,n.a,n.x,n.e,1)},0):(n(),e()):v=0}function ut(n,i,f,h,c,l,y){function k(t){if(!nt&&w(p.readyState)&&(tt.r=nt=1,!v&&e(),p.onload=p.onreadystatechange=null,t)){"img"!=n&&s(function(){g.removeChild(p)},50);for(var u in r[i])r[i].hasOwnProperty(u)&&r[i][u].onload()}}var y=y||u.errorTimeout,p=t.createElement(n),nt=0,b=0,tt={t:f,s:i,e:c,a:l,x:y};1===r[i]&&(b=1,r[i]=[]);"object"==n?p.data=i:(p.src=i,p.type=n);p.width=p.height="0";p.onerror=p.onload=p.onreadystatechange=function(){k.call(this,b)};a.splice(h,0,tt);"img"!=n&&(b||2===r[i]?(g.insertBefore(p,d?null:o),s(k,y)):r[i].push(p))}function ft(n,t,i,r,u){return v=0,t=t||"j",c(n)?ut("c"==t?et:nt,n,t,this.i++,i,r,u):(a.splice(this.i++,0,n),1==a.length&&e()),this}function b(){var n=u;return n.loader={load:ft,i:0},n}var f=t.documentElement,s=n.setTimeout,o=t.getElementsByTagName("script")[0],y={}.toString,a=[],v=0,k="MozAppearance"in f.style,d=k&&!!t.createRange().compareNode,g=d?f:o.parentNode,f=n.opera&&"[object Opera]"==y.call(n.opera),f=!!t.attachEvent&&!f,nt=k?"object":f?"script":"img",et=f?"script":nt,tt=Array.isArray||function(n){return"[object Array]"==y.call(n)},p=[],r={},it={timeout:function(n,t){return t.length&&(n.timeout=t[0]),n}},rt,u;u=function(n){function a(n){for(var n=n.split("!"),f=p.length,t=n.pop(),e=n.length,t={url:t,origUrl:t,prefixes:n},u,r,i=0;i<e;i++)r=n[i].split("="),(u=it[r.shift()])&&(t=u(t,r));for(i=0;i<f;i++)t=p[i](t);return t}function f(n,t,u,f,e){var o=a(n),s=o.autoCallback;o.url.split(".").pop().split("?").shift();o.bypass||(t&&(t=h(t)?t:t[n]||t[f]||t[n.split("/").pop().split("?")[0]]),o.instead?o.instead(n,t,u,f,e):(r[o.url]?o.noexec=!0:r[o.url]=1,u.load(o.url,o.forceCSS||!o.forceJS&&"css"==o.url.split(".").pop().split("?").shift()?"c":i,o.noexec,o.attrs,o.timeout),(h(t)||h(s))&&u.load(function(){b();t&&t(o.origUrl,e,f);s&&s(o.origUrl,e,f);r[o.url]=2})))}function s(n,t){function a(n,o){if(n){if(c(n))o||(i=function(){var n=[].slice.call(arguments);s.apply(this,n);u()}),f(n,i,t,0,e);else if(Object(n)===n)for(r in v=function(){var t=0,i;for(i in n)n.hasOwnProperty(i)&&t++;return t}(),n)n.hasOwnProperty(r)&&(!o&&!--v&&(h(i)?i=function(){var n=[].slice.call(arguments);s.apply(this,n);u()}:i[r]=function(n){return function(){var t=[].slice.call(arguments);n&&n.apply(this,t);u()}}(s[r])),f(n[r],i,t,r,e))}else o||u()}var e=!!n.test,o=n.load||n.both,i=n.callback||l,s=i,u=n.complete||l,v,r;a(e?n.yep:n.nope,!!o);o&&a(o)}var e,t,o=this.yepnope.loader;if(c(n))f(n,0,o,0);else if(tt(n))for(e=0;e<n.length;e++)t=n[e],c(t)?f(t,0,o,0):tt(t)?u(t):Object(t)===t&&s(t,o);else Object(n)===n&&s(n,o)};u.addPrefix=function(n,t){it[n]=t};u.addFilter=function(n){p.push(n)};u.errorTimeout=1e4;null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",rt=function(){t.removeEventListener("DOMContentLoaded",rt,0);t.readyState="complete"},0));n.yepnope=b();n.yepnope.executeStack=e;n.yepnope.injectJs=function(n,i,r,f,h,c){var a=t.createElement("script"),v,y,f=f||u.errorTimeout;a.src=n;for(y in r)a.setAttribute(y,r[y]);i=c?e:i||l;a.onreadystatechange=a.onload=function(){!v&&w(a.readyState)&&(v=1,i(),a.onload=a.onreadystatechange=null)};s(function(){v||(v=1,i(1))},f);h?a.onload():o.parentNode.insertBefore(a,o)};n.yepnope.injectCss=function(n,i,r,u,f,h){var u=t.createElement("link"),c,i=h?e:i||l;u.href=n;u.rel="stylesheet";u.type="text/css";for(c in r)u.setAttribute(c,r[c]);f||(o.parentNode.insertBefore(u,o),s(i,0))}}(this,document);Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};!function(n){n(function(){n.support.transition=function(){var n=function(){var i=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(i.style[n]!==undefined)return t[n]}();return n&&{end:n}}()})}(window.jQuery);!function(n){var t=function(t,i){this.options=i;this.$element=n(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",n.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)},i;t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,i=n.Event("show");(this.$element.trigger(i),this.isShown||i.isDefaultPrevented())||(this.isShown=!0,this.escape(),this.backdrop(function(){var i=n.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body);t.$element.show();i&&t.$element[0].offsetWidth;t.$element.addClass("in").attr("aria-hidden",!1);t.enforceFocus();i?t.$element.one(n.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault();var i=this;(t=n.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented())&&(this.isShown=!1,this.escape(),n(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),n.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;n(document).on("focusin.modal",function(n){t.$element[0]===n.target||t.$element.has(n.target).length||t.$element.focus()})},escape:function(){var n=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&n.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,i=setTimeout(function(){t.$element.off(n.support.transition.end);t.hideModal()},500);this.$element.one(n.support.transition.end,function(){clearTimeout(i);t.hideModal()})},hideModal:function(){this.$element.hide().trigger("hidden");this.backdrop()},removeBackdrop:function(){this.$backdrop.remove();this.$backdrop=null},backdrop:function(t){var u=this,r=this.$element.hasClass("fade")?"fade":"",i;this.isShown&&this.options.backdrop?(i=n.support.transition&&r,this.$backdrop=n('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?n.proxy(this.$element[0].focus,this.$element[0]):n.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(n.support.transition.end,t):t()):!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(n.support.transition.end,n.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}};i=n.fn.modal;n.fn.modal=function(i){return this.each(function(){var u=n(this),r=u.data("modal"),f=n.extend({},n.fn.modal.defaults,u.data(),typeof i=="object"&&i);r||u.data("modal",r=new t(this,f));typeof i=="string"?r[i]():f.show&&r.show()})};n.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0};n.fn.modal.Constructor=t;n.fn.modal.noConflict=function(){return n.fn.modal=i,this};n(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var i=n(this),r=i.attr("href"),u=n(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),f=u.data("modal")?"toggle":n.extend({remote:!/#/.test(r)&&r},u.data(),i.data());t.preventDefault();u.modal(f).one("hide",function(){i.focus()})})}(window.jQuery);!function(n){function u(){n(r).each(function(){i(n(this)).removeClass("open")})}function i(t){var i=t.attr("data-target"),r;return i||(i=t.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),r=n(i),r.length||(r=t.parent()),r}var r="[data-toggle=dropdown]",t=function(t){var i=n(t).on("click.dropdown.data-api",this.toggle);n("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})},f;t.prototype={constructor:t,toggle:function(){var t=n(this),r,f;if(!t.is(".disabled, :disabled"))return r=i(t),f=r.hasClass("open"),u(),f||r.toggleClass("open"),t.focus(),!1},keydown:function(t){var f,u,e,o,r;if(/(38|40|27)/.test(t.keyCode)&&(f=n(this),t.preventDefault(),t.stopPropagation(),!f.is(".disabled, :disabled"))){if(e=i(f),o=e.hasClass("open"),!o||o&&t.keyCode==27)return f.click();(u=n("[role=menu] li:not(.divider):visible a",e),u.length)&&(r=u.index(u.filter(":focus")),t.keyCode==38&&r>0&&r--,t.keyCode==40&&r<u.length-1&&r++,~r||(r=0),u.eq(r).focus())}}};f=n.fn.dropdown;n.fn.dropdown=function(i){return this.each(function(){var r=n(this),u=r.data("dropdown");u||r.data("dropdown",u=new t(this));typeof i=="string"&&u[i].call(r)})};n.fn.dropdown.Constructor=t;n.fn.dropdown.noConflict=function(){return n.fn.dropdown=f,this};n(document).on("click.dropdown.data-api touchstart.dropdown.data-api",u).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("touchstart.dropdown.data-api",".dropdown-menu",function(n){n.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",r,t.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",r+", [role=menu]",t.prototype.keydown)}(window.jQuery);!function(n){function t(t,i){var u=n.proxy(this.process,this),f=n(t).is("body")?n(window):n(t),r;this.options=n.extend({},n.fn.scrollspy.defaults,i);this.$scrollElement=f.on("scroll.scroll-spy.data-api",u);this.selector=(this.options.target||(r=n(t).attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.$body=n("body");this.refresh();this.process()}t.prototype={constructor:t,refresh:function(){var t=this,i;this.offsets=n([]);this.targets=n([]);i=this.$body.find(this.selector).map(function(){var u=n(this),i=u.data("target")||u.attr("href"),r=/^#\w/.test(i)&&n(i);return r&&r.length&&[[r.position().top+t.$scrollElement.scrollTop(),i]]||null}).sort(function(n,t){return n[0]-t[0]}).each(function(){t.offsets.push(this[0]);t.targets.push(this[1])})},process:function(){var i=this.$scrollElement.scrollTop()+this.options.offset,f=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,e=f-this.$scrollElement.height(),t=this.offsets,r=this.targets,u=this.activeTarget,n;if(i>=e)return u!=(n=r.last()[0])&&this.activate(n);for(n=t.length;n--;)u!=r[n]&&i>=t[n]&&(!t[n+1]||i<=t[n+1])&&this.activate(r[n])},activate:function(t){var i,r;this.activeTarget=t;n(this.selector).parent(".active").removeClass("active");r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]';i=n(r).parent("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active"));i.trigger("activate")}};var i=n.fn.scrollspy;n.fn.scrollspy=function(i){return this.each(function(){var u=n(this),r=u.data("scrollspy"),f=typeof i=="object"&&i;r||u.data("scrollspy",r=new t(this,f));typeof i=="string"&&r[i]()})};n.fn.scrollspy.Constructor=t;n.fn.scrollspy.defaults={offset:10};n.fn.scrollspy.noConflict=function(){return n.fn.scrollspy=i,this};n(window).on("load",function(){n('[data-spy="scroll"]').each(function(){var t=n(this);t.scrollspy(t.data())})})}(window.jQuery);!function(n){var t=function(t){this.element=n(t)},i;t.prototype={constructor:t,show:function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),i=t.attr("data-target"),r,u,f;(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),t.parent("li").hasClass("active"))||(r=e.find(".active:last a")[0],f=n.Event("show",{relatedTarget:r}),t.trigger(f),f.isDefaultPrevented())||(u=n(i),this.activate(t.parent("li"),e),this.activate(u,u.parent(),function(){t.trigger({type:"shown",relatedTarget:r})}))},activate:function(t,i,r){function f(){u.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");t.addClass("active");e?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade");t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active");r&&r()}var u=i.find("> .active"),e=r&&n.support.transition&&u.hasClass("fade");e?u.one(n.support.transition.end,f):f();u.removeClass("in")}};i=n.fn.tab;n.fn.tab=function(i){return this.each(function(){var u=n(this),r=u.data("tab");r||u.data("tab",r=new t(this));typeof i=="string"&&r[i]()})};n.fn.tab.Constructor=t;n.fn.tab.noConflict=function(){return n.fn.tab=i,this};n(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault();n(this).tab("show")})}(window.jQuery);!function(n){var t=function(t,i){this.options=n.extend({},n.fn.affix.defaults,i);this.$window=n(window).on("scroll.affix.data-api",n.proxy(this.checkPosition,this)).on("click.affix.data-api",n.proxy(function(){setTimeout(n.proxy(this.checkPosition,this),1)},this));this.$element=n(t);this.checkPosition()},i;t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var o=n(document).height(),f=this.$window.scrollTop(),e=this.$element.offset(),t=this.options.offset,r=t.bottom,u=t.top,i;(typeof t!="object"&&(r=u=t),typeof u=="function"&&(u=t.top()),typeof r=="function"&&(r=t.bottom()),i=this.unpin!=null&&f+this.unpin<=e.top?!1:r!=null&&e.top+this.$element.height()>=o-r?"bottom":u!=null&&f<=u?"top":!1,this.affixed!==i)&&(this.affixed=i,this.unpin=i=="bottom"?e.top-f:null,this.$element.removeClass("affix affix-top affix-bottom").addClass("affix"+(i?"-"+i:"")))}};i=n.fn.affix;n.fn.affix=function(i){return this.each(function(){var u=n(this),r=u.data("affix"),f=typeof i=="object"&&i;r||u.data("affix",r=new t(this,f));typeof i=="string"&&r[i]()})};n.fn.affix.Constructor=t;n.fn.affix.defaults={offset:0};n.fn.affix.noConflict=function(){return n.fn.affix=i,this};n(window).on("load",function(){n('[data-spy="affix"]').each(function(){var i=n(this),t=i.data();t.offset=t.offset||{};t.offsetBottom&&(t.offset.bottom=t.offsetBottom);t.offsetTop&&(t.offset.top=t.offsetTop);i.affix(t)})})}(window.jQuery);!function(n){var i='[data-dismiss="alert"]',t=function(t){n(t).on("click",i,this.close)},r;t.prototype.close=function(t){function f(){i.trigger("closed").remove()}var u=n(this),r=u.attr("data-target"),i;(r||(r=u.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=n(r),t&&t.preventDefault(),i.length||(i=u.hasClass("alert")?u:u.parent()),i.trigger(t=n.Event("close")),t.isDefaultPrevented())||(i.removeClass("in"),n.support.transition&&i.hasClass("fade")?i.on(n.support.transition.end,f):f())};r=n.fn.alert;n.fn.alert=function(i){return this.each(function(){var r=n(this),u=r.data("alert");u||r.data("alert",u=new t(this));typeof i=="string"&&u[i].call(r)})};n.fn.alert.Constructor=t;n.fn.alert.noConflict=function(){return n.fn.alert=r,this};n(document).on("click.alert.data-api",i,t.prototype.close)}(window.jQuery);!function(n){var t=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.collapse.defaults,i);this.options.parent&&(this.$parent=n(this.options.parent));this.options.toggle&&this.toggle()},i;t.prototype={constructor:t,dimension:function(){var n=this.$element.hasClass("width");return n?"width":"height"},show:function(){var i,u,t,r;if(!this.transitioning){if(i=this.dimension(),u=n.camelCase(["scroll",i].join("-")),t=this.$parent&&this.$parent.find("> .accordion-group > .in"),t&&t.length){if(r=t.data("collapse"),r&&r.transitioning)return;t.collapse("hide");r||t.data("collapse",null)}this.$element[i](0);this.transition("addClass",n.Event("show"),"shown");n.support.transition&&this.$element[i](this.$element[0][u])}},hide:function(){var t;this.transitioning||(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",n.Event("hide"),"hidden"),this.$element[t](0))},reset:function(n){var t=this.dimension();return this.$element.removeClass("collapse")[t](n||"auto")[0].offsetWidth,this.$element[n!==null?"addClass":"removeClass"]("collapse"),this},transition:function(t,i,r){var u=this,f=function(){i.type=="show"&&u.reset();u.transitioning=0;u.$element.trigger(r)};(this.$element.trigger(i),i.isDefaultPrevented())||(this.transitioning=1,this.$element[t]("in"),n.support.transition&&this.$element.hasClass("collapse")?this.$element.one(n.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};i=n.fn.collapse;n.fn.collapse=function(i){return this.each(function(){var u=n(this),r=u.data("collapse"),f=typeof i=="object"&&i;r||u.data("collapse",r=new t(this,f));typeof i=="string"&&r[i]()})};n.fn.collapse.defaults={toggle:!0};n.fn.collapse.Constructor=t;n.fn.collapse.noConflict=function(){return n.fn.collapse=i,this};n(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var i=n(this),u,r=i.attr("data-target")||t.preventDefault()||(u=i.attr("href"))&&u.replace(/.*(?=#[^\s]+$)/,""),f=n(r).data("collapse")?"toggle":i.data();i[n(r).hasClass("in")?"addClass":"removeClass"]("collapsed");n(r).collapse(f)})}(window.jQuery);!function(n){var t=function(t,i){this.$element=n(t);this.options=i;this.options.pause=="hover"&&this.$element.on("mouseenter",n.proxy(this.pause,this)).on("mouseleave",n.proxy(this.cycle,this))},i;t.prototype={cycle:function(t){return t||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(n.proxy(this.next,this),this.options.interval)),this},to:function(t){var r=this.$element.find(".item.active"),i=r.parent().children(),u=i.index(r),f=this;if(!(t>i.length-1)&&!(t<0))return this.sliding?this.$element.one("slid",function(){f.to(t)}):u==t?this.pause().cycle():this.slide(t>u?"next":"prev",n(i[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&n.support.transition.end&&(this.$element.trigger(n.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(t,i){var f=this.$element.find(".item.active"),r=i||f[t](),o=this.interval,e=t=="next"?"left":"right",h=t=="next"?"first":"last",s=this,u;if(this.sliding=!0,o&&this.pause(),r=r.length?r:this.$element.find(".item")[h](),u=n.Event("slide",{relatedTarget:r[0]}),!r.hasClass("active")){if(n.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(u),u.isDefaultPrevented())return;r.addClass(t);r[0].offsetWidth;f.addClass(e);r.addClass(e);this.$element.one(n.support.transition.end,function(){r.removeClass([t,e].join(" ")).addClass("active");f.removeClass(["active",e].join(" "));s.sliding=!1;setTimeout(function(){s.$element.trigger("slid")},0)})}else{if(this.$element.trigger(u),u.isDefaultPrevented())return;f.removeClass("active");r.addClass("active");this.sliding=!1;this.$element.trigger("slid")}return o&&this.cycle(),this}}};i=n.fn.carousel;n.fn.carousel=function(i){return this.each(function(){var f=n(this),r=f.data("carousel"),u=n.extend({},n.fn.carousel.defaults,typeof i=="object"&&i),e=typeof i=="string"?i:u.slide;r||f.data("carousel",r=new t(this,u));typeof i=="number"?r.to(i):e?r[e]():u.interval&&r.cycle()})};n.fn.carousel.defaults={interval:5e3,pause:"hover"};n.fn.carousel.Constructor=t;n.fn.carousel.noConflict=function(){return n.fn.carousel=i,this};n(document).on("click.carousel.data-api","[data-slide]",function(t){var i=n(this),r,u=n(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),f=n.extend({},u.data(),i.data());u.carousel(f);t.preventDefault()})}(window.jQuery);!function(n){var t=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.typeahead.defaults,i);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.$menu=n(this.options.menu);this.shown=!1;this.listen()},i;t.prototype={constructor:t,select:function(){var n=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(n)).change(),this.hide()},updater:function(n){return n},show:function(){var t=n.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(t=n.isFunction(this.source)?this.source(this.query,n.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var i=this;return t=n.grep(t,function(n){return i.matcher(n)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(n){return~n.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(n){for(var i=[],r=[],u=[],t;t=n.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?r.push(t):u.push(t):i.push(t);return i.concat(r,u)},highlighter:function(n){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return n.replace(new RegExp("("+t+")","ig"),function(n,t){return"<strong>"+t+"<\/strong>"})},render:function(t){var i=this;return t=n(t).map(function(t,r){return t=n(i.options.item).attr("data-value",r),t.find("a").html(i.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var i=this.$menu.find(".active").removeClass("active"),t=i.next();t.length||(t=n(this.$menu.find("li")[0]));t.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last());n.addClass("active")},listen:function(){this.$element.on("blur",n.proxy(this.blur,this)).on("keypress",n.proxy(this.keypress,this)).on("keyup",n.proxy(this.keyup,this));this.eventSupported("keydown")&&this.$element.on("keydown",n.proxy(this.keydown,this));this.$menu.on("click",n.proxy(this.click,this)).on("mouseenter","li",n.proxy(this.mouseenter,this))},eventSupported:function(n){var t=n in this.$element;return t||(this.$element.setAttribute(n,"return;"),t=typeof this.$element[n]=="function"),t},move:function(n){if(this.shown){switch(n.keyCode){case 9:case 13:case 27:n.preventDefault();break;case 38:n.preventDefault();this.prev();break;case 40:n.preventDefault();this.next()}n.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~n.inArray(t.keyCode,[40,38,9,13,27]);this.move(t)},keypress:function(n){this.suppressKeyPressRepeat||this.move(n)},keyup:function(n){switch(n.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}n.stopPropagation();n.preventDefault()},blur:function(){var n=this;setTimeout(function(){n.hide()},150)},click:function(n){n.stopPropagation();n.preventDefault();this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active");n(t.currentTarget).addClass("active")}};i=n.fn.typeahead;n.fn.typeahead=function(i){return this.each(function(){var u=n(this),r=u.data("typeahead"),f=typeof i=="object"&&i;r||u.data("typeahead",r=new t(this,f));typeof i=="string"&&r[i]()})};n.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"><\/ul>',item:'<li><a href="#"><\/a><\/li>',minLength:1};n.fn.typeahead.Constructor=t;n.fn.typeahead.noConflict=function(){return n.fn.typeahead=i,this};n(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var i=n(this);i.data("typeahead")||(t.preventDefault(),i.typeahead(i.data()))})}(window.jQuery);ArrayList=function(){function u(n){var u=t.length,f,r,i;if(n>u)for(f=t,r=parseInt(u*3/2+1),r<n&&(r=n),t=new Array(r),i=0;i<u;i++)t[i]=f[i]}var i=ArrayList.arguments,r=10,t,n;i!=null&&i.length>0&&(r=i[0]);t=new Array(r);n=0;this.size=function(){return n};this.add=function(i){return u(n+1),t[n++]=i,!0};this.addElementAt=function(i,r){if(i>n||i<0){alert("IndexOutOfBoundsException, Index: "+i+", Size: "+n);return}u(n+1);for(var f=n+1;f>i;f--)t[f]=t[f-1];t[i]=r;n++};this.setElementAt=function(i,r){if(i>n||i<0){alert("IndexOutOfBoundsException, Index: "+i+", Size: "+n);return}t[i]=r};this.toString=function(){for(var r="{",i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+"}"};this.get=function(i){if(i>=n){alert("ArrayIndexOutOfBoundsException, "+i+" >= "+n);return}return t[i]};this.remove=function(i){var u,r;if(i>=n){alert("ArrayIndexOutOfBoundsException, "+i+" >= "+n);throw new Error(-1,"ArrayIndexOutOfBoundsException, "+i+" >= "+n);}for(u=t[i],r=i;r<n-1;r++)t[r]=t[r+1];return t[n-1]=null,n--,u};this.isEmpty=function(){return n==0};this.indexOf=function(i){for(var r=0;r<n;r++)if(t[r]==i)return r;return-1};this.lastIndexOf=function(i){for(var r=n-1;r>=0;r--)if(t[r]==i)return r;return-1};this.contains=function(n){return this.indexOf(n)>=0}};String.prototype.replaceAll=function(n,t,i){var r,u=-1,f;if((r=this.toString())&&typeof n=="string")for(f=i===!0?n.toLowerCase():undefined;(u=f!==undefined?r.toLowerCase().indexOf(f,u>=0?u+t.length:0):r.indexOf(n,u>=0?u+t.length:0))!==-1;)r=r.substring(0,u).concat(t).concat(r.substring(u+n.length));return r},function(n){function u(){function e(n){n==="remove"&&this.each(function(n,t){var i=u(t);i&&i.remove()});this.find("span.mceEditor,div.mceEditor").each(function(n,t){var i=tinyMCE.get(t.id.replace(/_parent$/,""));i&&i.remove()})}function o(n){var t=this,r;if(n!==i)e.call(t),t.each(function(t,i){var r;(r=tinyMCE.get(i.id))&&r.setContent(n)});else if(t.length>0&&(r=tinyMCE.get(t[0].id)))return r.getContent()}function u(n){var i=null;return n&&n.id&&t.tinymce&&(i=tinyMCE.get(n.id)),i}function f(n){return!!(n&&n.length&&t.tinymce&&n.is(":tinymce"))}var r={};n.each(["text","html","val"],function(t,e){var s=r[e]=n.fn[e],h=e==="text";n.fn[e]=function(t){var r=this,e,c;return f(r)?t!==i?(o.call(r.filter(":tinymce"),t),s.apply(r.not(":tinymce"),arguments),r):(e="",c=arguments,(h?r:r.eq(0)).each(function(t,i){var r=u(i);e+=r?h?r.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):r.getContent({save:!0}):s.apply(n(i),c)}),e):s.apply(r,arguments)}});n.each(["append","prepend"],function(t,e){var o=r[e]=n.fn[e],s=e==="prepend";n.fn[e]=function(n){var t=this;return f(t)?n!==i?(t.filter(":tinymce").each(function(t,i){var r=u(i);r&&r.setContent(s?n+r.getContent():r.getContent()+n)}),o.apply(t.not(":tinymce"),arguments),t):void 0:o.apply(t,arguments)}});n.each(["remove","replaceWith","replaceAll","empty"],function(t,i){var u=r[i]=n.fn[i];n.fn[i]=function(){return e.call(this,i),u.apply(this,arguments)}});r.attr=n.fn.attr;n.fn.attr=function(t,e){var s=this,h=arguments,c,l;return!t||t!=="value"||!f(s)?e!==i?r.attr.apply(s,h):r.attr.apply(s,h):e!==i?(o.call(s.filter(":tinymce"),e),r.attr.apply(s.not(":tinymce"),h),s):(c=s[0],l=u(c),l?l.getContent({save:!0}):r.attr.apply(n(c),h))}}var i,r,f=[],t=window;n.fn.tinymce=function(i){function l(){var t=[],r=0;u&&(u(),u=null);o.each(function(n,u){var f,e=u.id,s=i.oninit;e||(u.id=e=tinymce.DOM.uniqueId());f=new tinymce.Editor(e,i);t.push(f);f.onInit.add(function(){var i,n=s;o.css("visibility","");s&&++r==t.length&&(tinymce.is(n,"string")&&(i=n.indexOf(".")===-1?null:tinymce.resolve(n.replace(/\.\w+$/,"")),n=tinymce.resolve(n)),n.apply(i||tinymce,t))})});n.each(t,function(n,t){t.render()})}var o=this,e,a,c,h,v="",s="";return o.length?i?(o.css("visibility","hidden"),t.tinymce||r||!(e=i.script_url)?r===1?f.push(l):l():(r=1,a=e.substring(0,e.lastIndexOf("/")),/_(src|dev)\.js/g.test(e)&&(s="_src"),c=e.lastIndexOf("?"),c!=-1&&(v=e.substring(c+1)),t.tinyMCEPreInit=t.tinyMCEPreInit||{base:a,suffix:s,query:v},e.indexOf("gzip")!=-1&&(h=i.language||"en",e=e+(/\?/.test(e)?"&":"?")+"js=true&core=true&suffix="+escape(s)+"&themes="+escape(i.theme)+"&plugins="+escape(i.plugins)+"&languages="+h,t.tinyMCE_GZ||(tinyMCE_GZ={start:function(){function t(n){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(n))}tinymce.suffix=s;t("langs/"+h+".js");t("themes/"+i.theme+"/editor_template"+s+".js");t("themes/"+i.theme+"/langs/"+h+".js");n.each(i.plugins.split(","),function(n,i){i&&(t("plugins/"+i+"/editor_plugin"+s+".js"),t("plugins/"+i+"/langs/"+h+".js"))})},end:function(){}})),n.ajax({type:"GET",url:e,dataType:"script",cache:!0,success:function(){tinymce.dom.Event.domLoaded=1;r=2;i.script_loaded&&i.script_loaded();l();n.each(f,function(n,t){t()})}})),o):tinyMCE.get(o[0].id):o};n.extend(n.expr[":"],{tinymce:function(n){return!!(n.id&&"tinyMCE"in window&&tinyMCE.get(n.id))}})}(jQuery),function(n,t){function yt(t){n.extend(!0,nt,t)}function bi(u,f,e){function ri(n){a?(st(),kt(),ti(),y(n)):ui()}function ui(){ir=f.theme?"ui":"fc";u.addClass("fc");f.isRTL?u.addClass("fc-rtl"):u.addClass("fc-ltr");f.theme&&u.addClass("ui-widget");a=n("<div class='fc-content' style='position:relative'/>").prependTo(u);b=new ki(s,f);k=b.render();k&&u.prepend(k);pt(f.defaultView);n(window).resize(dt);yt()||vt()}function vt(){setTimeout(function(){!o.start&&yt()&&y()},0)}function fi(){n(window).unbind("resize",dt);b.destroy();a.remove();u.removeClass("fc fc-rtl ui-widget")}function g(){return 0!==ft.offsetWidth}function yt(){return 0!==n("body")[0].offsetWidth}function pt(t){if(!o||t!=o.name){p++;rt();var r,i=o;i?((i.beforeHide||ni)(),l(a,a.height()),i.element.hide()):l(a,1);a.css("overflow","hidden");o=et[t];o?o.element.show():o=et[t]=new h[t](r=ut=n("<div class='fc-view fc-view-"+t+"' style='position:absolute'/>").appendTo(a),s);i&&b.deactivateButton(i.name);b.activateButton(t);y();a.css("overflow","");i&&l(a,1);r||(o.afterShow||ni)();p--}}function y(n){var i,r;g()&&(p++,rt(),lt===t&&st(),i=!1,!o.start||n||o.start>v||v>=o.end?(o.render(v,n||0),ht(!0),i=!0):o.sizeDirty?(o.clearEvents(),ht(),i=!0):o.eventsDirty&&(o.clearEvents(),i=!0),o.sizeDirty=!1,o.eventsDirty=!1,ei(i),ct=u.outerWidth(),b.updateTitle(o.title),r=new Date,r>=o.start&&o.end>r?b.disableButton("today"):b.enableButton("today"),p--,o.trigger("viewDisplay",ft))}function bt(){kt();g()&&(st(),ht(),rt(),o.clearEvents(),o.renderEvents(at),o.sizeDirty=!1)}function kt(){n.each(et,function(n,t){t.sizeDirty=!0})}function st(){lt=f.contentHeight?f.contentHeight:f.height?f.height-(k?k.height():0)-w(a):Math.round(a.width()/Math.max(f.aspectRatio,.5))}function ht(n){p++;o.setHeight(lt,n);ut&&(ut.css("position","relative"),ut=null);o.setWidth(a.width(),n);p--}function dt(){if(!p)if(o.start){var n=++ii;setTimeout(function(){n==ii&&!p&&g()&&ct!=(ct=u.outerWidth())&&(p++,bt(),o.trigger("windowResize",ft),p--)},200)}else vt()}function ei(n){!f.lazyFetching||rr(o.visStart,o.visEnd)?gt():n&&nt()}function gt(){ur(o.visStart,o.visEnd)}function oi(n){at=n;nt()}function si(n){nt(n)}function nt(n){ti();g()&&(o.clearEvents(),o.renderEvents(at,n),o.eventsDirty=!1)}function ti(){n.each(et,function(n,t){t.eventsDirty=!0})}function hi(n,i,r){o.select(n,i,r===t?!0:r)}function rt(){o&&o.unselect()}function ci(){y(-1)}function li(){y(1)}function ai(){tt(v,-1);y()}function vi(){tt(v,1);y()}function yi(){v=new Date;y()}function pi(n,t,r){n instanceof Date?v=i(n):wt(v,n,t,r);y()}function wi(n,i,u){n!==t&&tt(v,n);i!==t&&it(v,i);u!==t&&r(v,u);y()}function bi(){return i(v)}function gi(){return o}function nr(n,i){return i===t?f[n]:(("height"==n||"contentHeight"==n||"aspectRatio"==n)&&(f[n]=i,bt()),t)}function tr(n,i){return f[n]?f[n].apply(i||ft,Array.prototype.slice.call(arguments,2)):t}var s=this;s.options=f;s.render=ri;s.destroy=fi;s.refetchEvents=gt;s.reportEvents=oi;s.reportEventChange=si;s.rerenderEvents=nt;s.changeView=pt;s.select=hi;s.unselect=rt;s.prev=ci;s.next=li;s.prevYear=ai;s.nextYear=vi;s.today=yi;s.gotoDate=pi;s.incrementDate=wi;s.formatDate=function(n,t){return c(n,t,f)};s.formatDates=function(n,t,i){return ot(n,t,i,f)};s.getDate=bi;s.getView=gi;s.option=nr;s.trigger=tr;di.call(s,f,e);var b,k,a,ir,o,ct,lt,ut,d,rr=s.isFetchNeeded,ur=s.fetchEvents,ft=u[0],et={},ii=0,p=0,v=new Date,at=[];wt(v,f.year,f.month,f.date);f.droppable&&n(document).bind("dragstart",function(t,i){var u=t.target,e=n(u),r;e.parents(".fc").length||(r=f.dropAccept,(n.isFunction(r)?r.call(u,e):e.is(r))&&(d=u,o.dragStart(d,t,i)))}).bind("dragstop",function(n,t){d&&(o.dragStop(d,n,t),d=null)})}function ki(i,r){function s(){u=r.theme?"ui":"fc";var i=r.header;return i?f=n("<table class='fc-header' style='width:100%'/>").append(n("<tr/>").append(o("left")).append(o("center")).append(o("right"))):t}function c(){f.remove()}function o(t){var f=n("<td class='fc-header-"+t+"'/>"),e=r.header[t];return e&&n.each(e.split(" "),function(t){t>0&&f.append("<span class='fc-header-space'/>");var e;n.each(this.split(","),function(t,o){var c;if("title"==o)f.append("<span class='fc-header-title'><h2>&nbsp;<\/h2><\/span>"),e&&e.addClass(u+"-corner-right"),e=null;else if(i[o]?c=i[o]:h[o]&&(c=function(){s.removeClass(u+"-state-hover");i.changeView(o)}),c){var l=r.theme?lt(r.buttonIcons,o):null,a=lt(r.buttonText,o),s=n("<span class='fc-button fc-button-"+o+" "+u+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/><\/span>":a)+"<\/span>").click(function(){s.hasClass(u+"-state-disabled")||c()}).mousedown(function(){s.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-down")}).mouseup(function(){s.removeClass(u+"-state-down")}).hover(function(){s.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-hover")},function(){s.removeClass(u+"-state-hover").removeClass(u+"-state-down")}).appendTo(f);k(s);e||s.addClass(u+"-corner-left");e=s}});e&&e.addClass(u+"-corner-right")}),f}function l(n){f.find("h2").html(n)}function a(n){f.find("span.fc-button-"+n).addClass(u+"-state-active")}function v(n){f.find("span.fc-button-"+n).removeClass(u+"-state-active")}function y(n){f.find("span.fc-button-"+n).addClass(u+"-state-disabled")}function p(n){f.find("span.fc-button-"+n).removeClass(u+"-state-disabled")}var e=this,u,f;e.render=s;e.destroy=c;e.updateTitle=l;e.activateButton=a;e.deactivateButton=v;e.disableButton=y;e.enableButton=p;f=n([])}function di(r,u){function st(n,t){return!h||h>n||t>l}function ht(n,t){var u,r,i;for(h=n,l=t,e=[],u=++p,r=s.length,v=r,i=0;r>i;i++)k(s[i],u)}function k(t,i){d(t,function(u){if(i==p){if(u){r.eventDataTransform&&(u=n.map(u,r.eventDataTransform));t.eventDataTransform&&(u=n.map(u,t.eventDataTransform));for(var f=0;u.length>f;f++)u[f].source=t,c(u[f]);e=e.concat(u)}v--;v||a(e)}})}function d(u,e){for(var c,v=f.sourceFetchers,o,y,s=0;v.length>s;s++){if(c=v[s](u,h,l,e),c===!0)return;if("object"==typeof c)return d(c,e),t}if(o=u.events,o)n.isFunction(o)?(tt(),o(i(h),i(l),function(n){e(n);it()})):n.isArray(o)?e(o):e();else if(y=u.url,y){var k=u.success,nt=u.error,rt=u.complete,a=n.extend({},u.data||{}),p=b(u.startParam,r.startParam),w=b(u.endParam,r.endParam);p&&(a[p]=Math.round(+h/1e3));w&&(a[w]=Math.round(+l/1e3));tt();n.ajax(n.extend({},vi,u,{data:a,success:function(t){t=t||[];var i=g(k,this,arguments);n.isArray(i)&&(t=i);e(t)},error:function(){g(nt,this,arguments);e()},complete:function(){g(rt,this,arguments);it()}}))}else e()}function ct(n){n=nt(n);n&&(v++,k(n,p))}function nt(i){return n.isFunction(i)||n.isArray(i)?i={events:i}:"string"==typeof i&&(i={url:i}),"object"==typeof i?(wt(i),s.push(i),i):t}function lt(t){s=n.grep(s,function(n){return!rt(n,t)});e=n.grep(e,function(n){return!rt(n.source,t)});a(e)}function at(n){for(var t,f=e.length,r=bt().defaultEventEnd,o=n.start-n._start,u=n.end?n.end-(n._end||r(n)):0,i=0;f>i;i++)t=e[i],t._id==n._id&&t!=n&&(t.start=new Date(+t.start+o),t.end=n.end?t.end?new Date(+t.end+u):new Date(+r(t)+u):null,t.title=n.title,t.url=n.url,t.allDay=n.allDay,t.className=n.className,t.editable=n.editable,t.color=n.color,t.backgroudColor=n.backgroudColor,t.borderColor=n.borderColor,t.textColor=n.textColor,c(t));c(n);a(e)}function vt(n,t){c(n);n.source||(t&&(y.events.push(n),n.source=y),e.push(n));a(e)}function yt(t){var r,i;if(t)for(n.isFunction(t)||(r=t+"",t=function(n){return n._id==r}),e=n.grep(e,t,!0),i=0;s.length>i;i++)n.isArray(s[i].events)&&(s[i].events=n.grep(s[i].events,t,!0));else for(e=[],i=0;s.length>i;i++)n.isArray(s[i].events)&&(s[i].events=[]);a(e)}function pt(t){return n.isFunction(t)?n.grep(e,t):t?(t+="",n.grep(e,function(n){return n._id==t})):e}function tt(){ot++||et("loading",null,!0)}function it(){--ot||et("loading",null,!1)}function c(n){var u=n.source||{},f=b(u.ignoreTimezone,r.ignoreTimezone);n._id=n._id||(n.id===t?"_fc"+yi++:n.id+"");n.date&&(n.start||(n.start=n.date),delete n.date);n._start=i(n.start=ut(n.start,f));n.end=ut(n.end,f);n.end&&n.end<=n.start&&(n.end=null);n._end=n.end?i(n.end):null;n.allDay===t&&(n.allDay=b(u.allDayDefault,r.allDayDefault));n.className?"string"==typeof n.className&&(n.className=n.className.split(/\s+/)):n.className=[]}function wt(n){n.className?"string"==typeof n.className&&(n.className=n.className.split(/\s+/)):n.className=[];for(var i=f.sourceNormalizers,t=0;i.length>t;t++)i[t](n)}function rt(n,t){return n&&t&&ft(n)==ft(t)}function ft(n){return("object"==typeof n?n.events||n.url:"")||n}var o=this;o.isFetchNeeded=st;o.fetchEvents=ht;o.addEventSource=ct;o.removeEventSource=lt;o.updateEvent=at;o.renderEvent=vt;o.removeEvents=yt;o.clientEvents=pt;o.normalizeEvent=c;for(var h,l,et=o.trigger,bt=o.getView,a=o.reportEvents,y={events:[]},s=[y],p=0,v=0,ot=0,e=[],w=0;u.length>w;w++)nt(u[w])}function tt(n,t,i){return n.setFullYear(n.getFullYear()+t),i||s(n),n}function it(n,t,r){if(+n){var f=n.getMonth()+t,u=i(n);for(u.setDate(1),u.setMonth(f),n.setMonth(f),r||s(n);n.getMonth()!=u.getMonth();)n.setDate(n.getDate()+(u>n?1:-1))}return n}function r(n,t,r){if(+n){var f=n.getDate()+t,u=i(n);u.setHours(9);u.setDate(f);n.setDate(f);r||s(n);rt(n,u)}return n}function rt(n,t){if(+n)for(;n.getDate()!=t.getDate();)n.setTime(+n+(t>n?1:-1)*kr)}function u(n,t){return n.setMinutes(n.getMinutes()+t),n}function s(n){return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}function i(n,t){return t?s(new Date(+n)):new Date(+n)}function pt(){var n,t=0;do n=new Date(1970,t++,1);while(n.getHours());return n}function o(n,t,i){for(t=t||1;!n.getDay()||i&&1==n.getDay()||!i&&6==n.getDay();)r(n,t);return n}function e(n,t){return Math.round((i(n,!0)-i(t,!0))/pi)}function wt(n,i,r,u){i!==t&&i!=n.getFullYear()&&(n.setDate(1),n.setMonth(0),n.setFullYear(i));r!==t&&r!=n.getMonth()&&(n.setDate(1),n.setMonth(r));u!==t&&n.setDate(u)}function ut(n,i){return"object"==typeof n?n:"number"==typeof n?new Date(1e3*n):"string"==typeof n?n.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(n)):(i===t&&(i=!0),ft(n,i)||(n?new Date(n):null)):null}function ft(n,t){var i=n.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/),r,u,f;return i?(r=new Date(i[1],0,1),t||!i[13]?(u=new Date(i[1],0,1,9,0),i[3]&&(r.setMonth(i[3]-1),u.setMonth(i[3]-1)),i[5]&&(r.setDate(i[5]),u.setDate(i[5])),rt(r,u),i[7]&&r.setHours(i[7]),i[8]&&r.setMinutes(i[8]),i[10]&&r.setSeconds(i[10]),i[12]&&r.setMilliseconds(1e3*Number("0."+i[12])),rt(r,u)):(r.setUTCFullYear(i[1],i[3]?i[3]-1:0,i[5]||1),r.setUTCHours(i[7]||0,i[8]||0,i[10]||0,i[12]?1e3*Number("0."+i[12]):0),i[14])&&(f=60*Number(i[16])+(i[18]?Number(i[18]):0),f*="-"==i[15]?1:-1,r=new Date(+r+6e4*f)),r):null}function et(n){var t,i;return"number"==typeof n?60*n:"object"==typeof n?60*n.getHours()+n.getMinutes():(t=n.match(/(\d+)(?::(\d+))?\s*(\w+)?/),t?(i=parseInt(t[1],10),t[3]&&(i%=12,"p"==t[3].toLowerCase().charAt(0)&&(i+=12)),60*i+(t[2]?parseInt(t[2],10):0)):void 0)}function c(n,t,i){return ot(n,null,t,i)}function ot(n,t,i,r){var v,s;r=r||nt;for(var o,u,y,e=n,a=t,l=i.length,h="",f=0;l>f;f++)if(o=i.charAt(f),"'"==o){for(u=f+1;l>u;u++)if("'"==i.charAt(u)){e&&(h+=u==f+1?"'":i.substring(f+1,u),f=u);break}}else if("("==o){for(u=f+1;l>u;u++)if(")"==i.charAt(u)){s=c(e,i.substring(f+1,u),r);parseInt(s.replace(/\D/,""),10)&&(h+=s);f=u;break}}else if("["==o){for(u=f+1;l>u;u++)if("]"==i.charAt(u)){v=i.substring(f+1,u);s=c(e,v,r);s!=c(a,v,r)&&(h+=s);f=u;break}}else if("{"==o)e=t,a=n;else if("}"==o)e=n,a=t;else{for(u=l;u>f;u--)if(y=wi[i.substring(f,u)]){e&&(h+=y(e,r));f=u-1;break}u==f&&e&&(h+=o)}return h}function gi(n){var i,t=new Date(n.getTime());return t.setDate(t.getDate()+4-(t.getDay()||7)),i=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1}function y(n){return n.end?nr(n.end,n.allDay):r(i(n.start),1)}function nr(n,t){return n=i(n),t||n.getHours()||n.getMinutes()?r(n,1):s(n)}function tr(n,t){return 100*(t.msLength-n.msLength)+(n.event.start-t.event.start)}function bt(n,t){return n.end>t.start&&n.start<t.end}function st(n,t,r,u){for(var c,e,o,s,h,l,a,v=[],y=n.length,f=0;y>f;f++)c=n[f],e=c.start,o=t[f],o>r&&u>e&&(r>e?(s=i(r),l=!1):(s=e,l=!0),o>u?(h=i(u),a=!1):(h=o,a=!0),v.push({event:c,start:s,end:h,isStart:l,isEnd:a,msLength:h-s}));return v.sort(tr)}function ht(n){for(var u,t,e,f,i=[],o=n.length,r=0;o>r;r++){for(u=n[r],t=0;;){if(e=!1,i[t])for(f=0;i[t].length>f;f++)if(bt(i[t][f],u)){e=!0;break}if(!e)break;t++}i[t]?i[t].push(u):i[t]=[u]}return i}function kt(i,r,u){i.unbind("mouseover").mouseover(function(i){for(var o,s,f,e=i.target;e!=this;)o=e,e=e.parentNode;(s=o._fci)!==t&&(o._fci=t,f=r[s],u(f.event,f.element,f),n(i.target).trigger(i));i.stopPropagation()})}function p(t,i,r){for(var u,f=0;t.length>f;f++)u=n(t[f]),u.width(Math.max(0,i-ct(u,r)))}function dt(t,i,r){for(var u,f=0;t.length>f;f++)u=n(t[f]),u.height(Math.max(0,i-w(u,r)))}function ct(n,t){return ir(n)+ur(n)+(t?rr(n):0)}function ir(t){return(parseFloat(n.css(t[0],"paddingLeft",!0))||0)+(parseFloat(n.css(t[0],"paddingRight",!0))||0)}function rr(t){return(parseFloat(n.css(t[0],"marginLeft",!0))||0)+(parseFloat(n.css(t[0],"marginRight",!0))||0)}function ur(t){return(parseFloat(n.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(n.css(t[0],"borderRightWidth",!0))||0)}function w(n,t){return fr(n)+er(n)+(t?gt(n):0)}function fr(t){return(parseFloat(n.css(t[0],"paddingTop",!0))||0)+(parseFloat(n.css(t[0],"paddingBottom",!0))||0)}function gt(t){return(parseFloat(n.css(t[0],"marginTop",!0))||0)+(parseFloat(n.css(t[0],"marginBottom",!0))||0)}function er(t){return(parseFloat(n.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(n.css(t[0],"borderBottomWidth",!0))||0)}function l(n,t){t="number"==typeof t?t+"px":t;n.each(function(n,i){i.style.cssText+=";min-height:"+t+";_height:"+t})}function ni(){}function ti(n,t){return n-t}function ii(n){return Math.max.apply(Math,n)}function a(n){return(10>n?"0":"")+n}function lt(n,i){if(n[i]!==t)return n[i];for(var r,f=i.split(/(?=[A-Z])/),u=f.length-1;u>=0;u--)if(r=n[f[u].toLowerCase()],r!==t)return r;return n[""]}function v(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function ri(n){return n.id+"/"+n.className+"/"+n.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function k(n){n.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function d(n){n.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function or(n,t){n.each(function(n,i){i.className=i.className.replace(/^fc-\w*/,"fc-"+vt[t.getDay()])})}function ui(n,t){var i=n.source||{},u=n.color,f=i.color,e=t("eventColor"),o=n.backgroundColor||u||i.backgroundColor||f||t("eventBackgroundColor")||e,s=n.borderColor||u||i.borderColor||f||t("eventBorderColor")||e,h=n.textColor||i.textColor||t("eventTextColor"),r=[];return o&&r.push("background-color:"+o),s&&r.push("border-color:"+s),h&&r.push("color:"+h),r.join(";")}function g(t,i,r){if(n.isFunction(t)&&(t=[t]),t){for(var f,u=0;t.length>u;u++)f=t[u].apply(i,r)||f;return f}}function b(){for(var n=0;arguments.length>n;n++)if(arguments[n]!==t)return arguments[n]}function sr(n,t){function e(n,t){var e,v;t&&(it(n,t),n.setDate(1));e=i(n,!0);e.setDate(1);var y=it(i(e),1),l=i(e),c=i(y),p=f("firstDay"),a=f("weekends")?0:1;a&&(o(l),o(c,-1,!0));r(l,-((l.getDay()-Math.max(p,a)+7)%7));r(c,(7-c.getDay()+Math.max(p,a))%7);v=Math.round((c-l)/(7*pi));"fixed"==f("weekMode")&&(r(c,7*(6-v)),v=6);u.title=h(e,f("titleFormat"));u.start=e;u.end=y;u.visStart=l;u.visEnd=c;s(v,a?5:7,!0)}var u=this;u.render=e;at.call(u,n,t,"month");var f=u.opt,s=u.renderBasic,h=t.formatDate}function hr(n,t){function e(n,t){t&&r(n,7*t);var e=r(i(n),-((n.getDay()-f("firstDay")+7)%7)),a=r(i(e),7),c=i(e),l=i(a),v=f("weekends");v||(o(c),o(l,-1,!0));u.title=h(c,r(i(l),-1),f("titleFormat"));u.start=e;u.end=a;u.visStart=c;u.visEnd=l;s(1,v?7:5,!1)}var u=this;u.render=e;at.call(u,n,t,"basicWeek");var f=u.opt,s=u.renderBasic,h=t.formatDates}function cr(n,t){function e(n,t){t&&(r(n,t),f("weekends")||o(n,0>t?-1:1));u.title=h(n,f("titleFormat"));u.start=u.visStart=i(n,!0);u.end=u.visEnd=r(i(u.start),1);s(1,1,!1)}var u=this;u.render=e;at.call(u,n,t,"basicDay");var f=u.opt,s=u.renderBasic,h=t.formatDate}function at(t,u,f){function gi(n,t,i){c=n;h=t;nr();var r=!rt;r?tr():gr();ir(i)}function nr(){wt=a("isRTL");wt?(g=-1,nt=h-1):(g=1,nt=0);pi=a("firstDay");wi=a("weekends")?0:1;lt=a("theme")?"ui":"fc";bi=a("columnFormat");b=a("weekNumbers");ki=a("weekNumberTitle");di="iso"!=a("weekNumberCalculation")?"w":"W"}function tr(){vi=n("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function ir(i){var u,l,f,e,r="",a=lt+"-widget-header",p=lt+"-widget-content",w=o.start.getMonth(),k=s(new Date);for(r+="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",b&&(r+="<th class='fc-week-number "+a+"'/>"),u=0;h>u;u++)f=tt(0,u),r+="<th class='fc-day-header fc-"+vt[f.getDay()]+" "+a+"'/>";for(r+="<\/tr><\/thead><tbody>",u=0;c>u;u++){for(r+="<tr class='fc-week'>",b&&(r+="<td class='fc-week-number "+p+"'><div/><\/td>"),l=0;h>l;l++)f=tt(u,l),e=["fc-day","fc-"+vt[f.getDay()],p],f.getMonth()!=w&&e.push("fc-other-month"),+f==+k&&(e.push("fc-today"),e.push(lt+"-state-highlight")),r+="<td class='"+e.join(" ")+"' data-date='"+kt(f,"yyyy-MM-dd")+"'><div>",i&&(r+="<div class='fc-day-number'>"+f.getDate()+"<\/div>"),r+="<div class='fc-day-content'><div style='position:relative'>&nbsp;<\/div><\/div><\/div><\/td>";r+="<\/tr>"}r+="<\/tbody><\/table>";kr();it&&it.remove();it=n(r).appendTo(t);y=it.find("thead");ut=y.find(".fc-day-header");rt=it.find("tbody");v=rt.find("tr");et=rt.find(".fc-day");fi=v.find("td:first-child");oi=v.eq(0).find(".fc-day-content > div");d(y.add(y.find("tr")));d(v);v.eq(0).addClass("fc-first");v.filter(":last").addClass("fc-last");b&&y.find(".fc-week-number").text(ki);ut.each(function(t,i){var r=ri(t);n(i).text(kt(r,bi))});b&&rt.find(".fc-week-number > div").each(function(t,i){var r=tt(t,0);n(i).text(kt(r,di))});et.each(function(t,i){var r=ri(t);at("dayRender",o,r,n(i))});dt(et)}function rr(t){yi=t;var i,r,u,f=yi-y.height();"variable"==a("weekMode")?i=r=Math.floor(f/(1==c?2:6)):(i=Math.floor(f/c),r=f-i*(c-1));fi.each(function(t,f){c>t&&(u=n(f),l(u.find("> div"),(t==c-1?r:i)-w(u)))});dr()}function ur(n){yt=n;ct.clear();ot=0;b&&(ot=y.find("th.fc-week-number").outerWidth());pt=Math.floor((yt-ot)/h);p(ut.slice(0,-1),pt)}function dt(n){n.click(fr).mousedown(tu)}function fr(t){if(!a("selectable")){var i=ft(n(this).data("date"));at("dayClick",this,i,!0,t)}}function gt(n,t,u){var l,a,v,y;u&&st.build();for(var f=i(o.visStart),p=r(i(f),h),s=0;c>s;s++)l=new Date(Math.max(f,n)),a=new Date(Math.min(p,t)),a>l&&(wt?(v=e(a,f)*g+nt+1,y=e(l,f)*g+nt+1):(v=e(l,f),y=e(a,f)),dt(ni(s,v,s,y-1))),r(f,7),r(p,7)}function ni(n,i,r,u){var f=st.rect(n,i,r,u,t);return nu(f,t)}function er(n){return i(n)}function or(n,t){gt(n,r(i(t),1),!0)}function sr(){bt()}function hr(n,t,i){var r=ti(n),u=et[r.row*h+r.col];at("dayClick",u,n,t,i)}function cr(n,t){ht.start(function(n){bt();n&&ni(n.row,n.col,n.row,n.col)},t)}function ar(n,t,i){var r=ht.stop(),u;(bt(),r)&&(u=ii(r),at("drop",n,u,!0,t,i))}function vr(n){return i(n.start)}function yr(n){return ct.left(n)}function pr(n){return ct.right(n)}function ti(n){return{row:Math.floor(e(n,o.visStart)/7),col:ui(n.getDay())}}function ii(n){return tt(n.row,n.col)}function tt(n,t){return r(i(o.visStart),7*n+t*g+nt)}function ri(n){return tt(Math.floor(n/h),n%h)}function ui(n){return(n-Math.max(pi,wi)+h)%h*g+nt}function wr(n){return v.eq(n)}function br(){var n=0;return b&&(n+=ot),{left:n,right:yt}}function kr(){l(t,t.height())}function dr(){l(t,1)}var o=this;o.renderBasic=gi;o.setHeight=rr;o.setWidth=ur;o.renderDayOverlay=gt;o.defaultSelectionEnd=er;o.renderSelection=or;o.clearSelection=sr;o.reportDayClick=hr;o.dragStart=cr;o.dragStop=ar;o.defaultEventEnd=vr;o.getHoverListener=function(){return ht};o.colContentLeft=yr;o.colContentRight=pr;o.dayOfWeekCol=ui;o.dateCell=ti;o.cellDate=ii;o.cellIsAllDay=function(){return!0};o.allDayRow=wr;o.allDayBounds=br;o.getRowCnt=function(){return c};o.getColCnt=function(){return h};o.getColWidth=function(){return pt};o.getDaySegmentContainer=function(){return vi};ei.call(o,t,u,f);hi.call(o);si.call(o);lr.call(o);var it,y,ut,rt,v,et,fi,oi,vi,yt,yi,pt,ot,c,h,st,ht,ct,wt,g,nt,pi,wi,lt,bi,b,ki,di,a=o.opt,at=o.trigger,gr=o.clearEvents,nu=o.renderOverlay,bt=o.clearOverlays,tu=o.daySelectionMousedown,kt=u.formatDate;k(t.addClass("fc-grid"));st=new ci(function(t,i){var f,r,u;ut.each(function(t,e){f=n(e);r=f.offset().left;t&&(u[1]=r);u=[r];i[t]=u});u[1]=r+f.outerWidth();v.each(function(i,e){c>i&&(f=n(e),r=f.offset().top,i&&(u[1]=r),u=[r],t[i]=u)});u[1]=r+f.outerHeight()});ht=new li(st);ct=new ai(function(n){return oi.eq(n)})}function lr(){function s(n,t){p(n);ft(e(n),t);f("eventAfterAllRender")}function h(){w();nt().empty()}function e(u){for(var h,f,c,o,s,p=rt(),w=ut(),l=i(t.visStart),a=r(i(l),w),b=n.map(u,y),v=[],e=0;p>e;e++){for(h=ht(st(u,b,l,a)),f=0;h.length>f;f++)for(c=h[f],o=0;c.length>o;o++)s=c[o],s.row=e,s.level=f,v.push(s);r(l,7);r(a,7)}return v}function c(n,t,i){a(n)&&l(n,t);i.isEnd&&v(n)&&et(n,t,i);b(n,t)}function l(n,t){var e,s=tt();t.draggable({zIndex:9,delay:50,opacity:u("dragOpacity"),revertDuration:u("dragRevertDuration"),start:function(h,c){f("eventDragStart",t,n,h,c);d(n,t);s.start(function(f,s,h,c){t.draggable("option","revert",!f||!h&&!c);o();f?(e=7*h+c*(u("isRTL")?-1:1),it(r(i(n.start),e),r(y(n),e))):e=0},h,"drag")},stop:function(i,r){s.stop();o();f("eventDragStop",t,n,i,r);e?g(this,n,e,0,n.allDay,i,r):(t.css("filter",""),k(n,t))}})}var t=this;t.renderEvents=s;t.compileDaySegs=e;t.clearEvents=h;t.bindDaySeg=c;oi.call(t);var u=t.opt,f=t.trigger,a=t.isEventDraggable,v=t.isEventResizable,p=t.reportEvents,w=t.reportEventClear,b=t.eventElementHandlers,k=t.showEvents,d=t.hideEvents,g=t.eventDrop,nt=t.getDaySegmentContainer,tt=t.getHoverListener,it=t.renderDayOverlay,o=t.clearOverlays,rt=t.getRowCnt,ut=t.getColCnt,ft=t.renderDaySegs,et=t.resizableDayEvent}function ar(n,t){function e(n,t){t&&r(n,7*t);var e=r(i(n),-((n.getDay()-f("firstDay")+7)%7)),a=r(i(e),7),c=i(e),l=i(a),v=f("weekends");v||(o(c),o(l,-1,!0));u.title=h(c,r(i(l),-1),f("titleFormat"));u.start=e;u.end=a;u.visStart=c;u.visEnd=l;s(v?7:5)}var u=this;u.render=e;fi.call(u,n,t,"agendaWeek");var f=u.opt,s=u.renderAgenda,h=t.formatDates}function vr(n,t){function e(n,t){t&&(r(n,t),f("weekends")||o(n,0>t?-1:1));var e=i(n,!0),c=r(i(e),1);u.title=h(n,f("titleFormat"));u.start=u.visStart=e;u.end=u.visEnd=c;s(1)}var u=this;u.render=e;fi.call(u,n,t,"agendaDay");var f=u.opt,s=u.renderAgenda,h=t.formatDate}function fi(f,o,h){function cu(n){a=n;lu();ht?cf():au();vu()}function lu(){kt=l("theme")?"ui":"fc";eu=l("weekends")?0:1;fu=l("firstDay");(rr=l("isRTL"))?(nt=-1,tt=a-1):(nt=1,tt=0);ot=et(l("minTime"));pi=et(l("maxTime"));ou=l("columnFormat");ur=l("weekNumbers");fr=l("weekNumberTitle");su="iso"!=l("weekNumberCalculation")?"w":"W";vt=l("snapMinutes")||l("slotMinutes")}function au(){var t,r,o,c,s,e=kt+"-widget-header",h=kt+"-widget-content",y=0==l("slotMinutes")%15;for(t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr>",t+=ur?"<th class='fc-agenda-axis fc-week-number "+e+"'/>":"<th class='fc-agenda-axis "+e+"'>&nbsp;<\/th>",r=0;a>r;r++)t+="<th class='fc- fc-col"+r+" "+e+"'/>";for(t+="<th class='fc-agenda-gutter "+e+"'>&nbsp;<\/th><\/tr><\/thead><tbody><tr><th class='fc-agenda-axis "+e+"'>&nbsp;<\/th>",r=0;a>r;r++)t+="<td class='fc- fc-col"+r+" "+h+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;<\/div><\/div><\/div><\/td>";for(t+="<td class='fc-agenda-gutter "+h+"'>&nbsp;<\/td><\/tr><\/tbody><\/table>",ht=n(t).appendTo(f),ct=ht.find("thead"),ii=ct.find("th").slice(1,-1),bt=ht.find("tbody"),it=bt.find("td").slice(0,-1),dr=it.find("div.fc-day-content div"),di=it.eq(0),gr=di.find("> div"),d(ct.add(ct.find("tr"))),d(bt.add(bt.find("tr"))),lt=ct.find("th:first"),at=ht.find(".fc-agenda-gutter"),g=n("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(f),l("allDaySlot")?(gi=n("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(g),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+e+" fc-agenda-axis'>"+l("allDayText")+"<\/th><td><div class='fc-day-content'><div style='position:relative'/><\/div><\/td><th class='"+e+" fc-agenda-gutter'>&nbsp;<\/th><\/tr><\/table>",ri=n(t).appendTo(g),ui=ri.find("tr"),cr(ui.find("td")),lt=lt.add(ri.find("th:first")),at=at.add(ri.find("th.fc-agenda-gutter")),g.append("<div class='fc-agenda-divider "+e+"'><div class='fc-agenda-divider-inner'/><\/div>")):gi=n([]),v=n("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(g),b=n("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(v),nu=n("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(b),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",o=pt(),c=u(i(o),pi),u(o,ot),ir=0,r=0;c>o;r++)s=o.getMinutes(),t+="<tr class='fc-slot"+r+" "+(s?"fc-minor":"")+"'><th class='fc-agenda-axis "+e+"'>"+(y&&s?"&nbsp;":sr(o,l("axisFormat")))+"<\/th><td class='"+h+"'><div style='position:relative'>&nbsp;<\/div><\/td><\/tr>",u(o,l("slotMinutes")),ir++;t+="<\/tbody><\/table>";rt=n(t).appendTo(b);tu=rt.find("div:first");bi(rt.find("td"));lt=lt.add(rt.find("th:first"))}function vu(){var n,u,i,r,f=s(new Date),t;for(ur&&(t=sr(gt(0),su),rr?t+=fr:t=fr+t,ct.find(".fc-week-number").text(t)),n=0;a>n;n++)r=gt(n),u=ii.eq(n),u.html(sr(r,ou)),i=it.eq(n),+r==+f?i.addClass(kt+"-state-highlight fc-today"):i.removeClass(kt+"-state-highlight fc-today"),or(u.add(i),r)}function yu(n,i){n===t&&(n=ru);ru=n;hr={};var r=bt.position().top,u=v.position().top,f=Math.min(n-r,rt.height()+u+1);gr.height(f-w(di));g.css("top",r);v.height(f-u-1);nr=tu.height()+1;tr=l("slotMinutes")/vt;vi=nr/tr;i&&wu()}function pu(t){iu=t;yi.clear();ut=0;p(lt.width("").each(function(t,i){ut=Math.max(ut,n(i).outerWidth())}),ut);var i=v[0].clientWidth;oi=v.width()-i;oi?(p(at,oi),at.show().prev().removeClass("fc-last")):at.hide().prev().addClass("fc-last");fi=Math.floor((i-ut)/a);p(ii.slice(0,-1),fi)}function wu(){function n(){v.scrollTop(u)}var t=pt(),r=i(t),u;r.setHours(l("firstHour"));u=st(t,r)+1;n();setTimeout(n,0)}function bu(){uu=v.scrollTop()}function ku(){v.scrollTop(uu)}function cr(n){n.click(lr).mousedown(vf)}function bi(n){n.click(lr).mousedown(of)}function lr(n){var r,f;if(!l("selectable")){var i=Math.min(a-1,Math.floor((n.pageX-ht.offset().left-ut)/fi)),t=gt(i),u=this.parentNode.className.match(/fc-slot(\d+)/);u?(r=parseInt(u[1])*l("slotMinutes"),f=Math.floor(r/60),t.setHours(f),t.setMinutes(r%60+ot),wi("dayClick",it[i],t,!1,n)):wi("dayClick",it[i],t,!0,n)}}function ar(n,t,r){r&&ft.build();var u,f,o=i(c.visStart);rr?(u=e(t,o)*nt+tt+1,f=e(n,o)*nt+tt+1):(u=e(n,o),f=e(t,o));u=Math.max(0,u);f=Math.min(a,f);f>u&&cr(vr(0,u,0,f-1))}function vr(n,t,i,r){var u=ft.rect(n,t,i,r,g);return hu(u,g)}function pr(n,t){for(var e,o,u=i(c.visStart),h=r(i(u),1),f=0;a>f;f++){if(e=new Date(Math.max(u,n)),o=new Date(Math.min(h,t)),o>e){var l=f*nt+tt,s=ft.rect(0,l,0,l,b),v=st(u,e),y=st(u,o);s.top=v;s.height=y-v;bi(hu(s,b))}r(u,1);r(h,1)}}function du(n){return yi.left(n)}function gu(n){return yi.right(n)}function nf(n){return{row:Math.floor(e(n,c.visStart)/7),col:ki(n.getDay())}}function wt(n){var i=gt(n.col),t=n.row;return l("allDaySlot")&&t--,t>=0&&u(i,ot+t*vt),i}function gt(n){return r(i(c.visStart),n*nt+tt)}function ni(n){return l("allDaySlot")&&!n.row}function ki(n){return(n-Math.max(fu,eu)+a)%a*nt+tt}function st(n,r){if(n=i(n,!0),u(i(n),ot)>r)return 0;if(r>=u(i(n),pi))return rt.height();var f=l("slotMinutes"),s=60*r.getHours()+r.getMinutes()-ot,e=Math.floor(s/f),o=hr[e];return o===t&&(o=hr[e]=rt.find("tr:eq("+e+") td div")[0].offsetTop),Math.max(0,Math.round(o-1+nr*(s%f/f)))}function tf(){return{left:ut,right:iu-oi}}function rf(){return ui}function uf(n){var t=i(n.start);return n.allDay?t:u(t,l("defaultEventMinutes"))}function ff(n,t){return t?i(n):u(i(n),l("slotMinutes"))}function ef(n,t,u){u?l("allDaySlot")&&ar(n,r(i(t),1),!0):wr(n,t)}function wr(t,i){var f=l("selectHelper"),u,s;if(ft.build(),f){if(u=e(t,c.visStart)*nt+tt,u>=0&&a>u){var r=ft.rect(0,u,0,u,b),o=st(t,t),h=st(t,i);h>o&&((r.top=o,r.height=h-o,r.left+=2,r.width-=5,n.isFunction(f))?(s=f(t,i),s&&(r.position="absolute",r.zIndex=8,y=n(s).css(r).appendTo(b))):(r.isStart=!0,r.isEnd=!0,y=n(yf({title:"",start:t,end:i,className:["fc-select-helper"],editable:!1},r)),y.css("opacity",l("dragOpacity"))),y&&(bi(y),b.append(y),p(y,r.width,!0),dt(y,r.height,!0)))}}else pr(t,i)}function br(){er();y&&(y.remove(),y=null)}function of(t){if(1==t.which&&l("selectable")){af(t);var r;yt.start(function(n,t){if(br(),n&&n.col==t.col&&!ni(n)){var f=wt(t),e=wt(n);r=[f,u(i(f),vt),e,u(i(e),vt)].sort(ti);wr(r[0],r[3])}else r=null},t);n(document).one("mouseup",function(n){yt.stop();r&&(+r[0]==+r[1]&&kr(r[0],!1,n),lf(r[0],r[3],!1,n))})}}function kr(n,t,i){wi("dayClick",it[ki(n.getDay())],n,t,i)}function sf(n,t){yt.start(function(n){if(er(),n)if(ni(n))vr(n.row,n.col,n.row,n.col);else{var t=wt(n),r=u(i(t),l("defaultEventMinutes"));pr(t,r)}},t)}function hf(n,t,i){var r=yt.stop();er();r&&wi("drop",n,wt(r),ni(r),t,i)}var c=this;c.renderAgenda=cu;c.setWidth=pu;c.setHeight=yu;c.beforeHide=bu;c.afterShow=ku;c.defaultEventEnd=uf;c.timePosition=st;c.dayOfWeekCol=ki;c.dateCell=nf;c.cellDate=wt;c.cellIsAllDay=ni;c.allDayRow=rf;c.allDayBounds=tf;c.getHoverListener=function(){return yt};c.colContentLeft=du;c.colContentRight=gu;c.getDaySegmentContainer=function(){return gi};c.getSlotSegmentContainer=function(){return nu};c.getMinMinute=function(){return ot};c.getMaxMinute=function(){return pi};c.getBodyContent=function(){return b};c.getRowCnt=function(){return 1};c.getColCnt=function(){return a};c.getColWidth=function(){return fi};c.getSnapHeight=function(){return vi};c.getSnapMinutes=function(){return vt};c.defaultSelectionEnd=ff;c.renderDayOverlay=ar;c.renderSelection=ef;c.clearSelection=br;c.reportDayClick=kr;c.dragStart=sf;c.dragStop=hf;ei.call(c,f,o,h);hi.call(c);si.call(c);yr.call(c);var ht,ct,ii,bt,it,dr,di,gr,g,gi,ri,ui,v,b,nu,rt,tu,lt,at,y,iu,ru,ut,fi,oi,nr,vt,tr,vi,a,ir,ft,yt,yi,uu,kt,fu,eu,rr,nt,tt,ot,pi,ou,ur,fr,su,l=c.opt,wi=c.trigger,cf=c.clearEvents,hu=c.renderOverlay,er=c.clearOverlays,lf=c.reportSelection,af=c.unselect,vf=c.daySelectionMousedown,yf=c.slotSegHtml,sr=o.formatDate,hr={};k(f.addClass("fc-agenda"));ft=new ci(function(t,i){function o(n){return Math.max(h,Math.min(c,n))}var u,r,f;ii.each(function(t,e){u=n(e);r=u.offset().left;t&&(f[1]=r);f=[r];i[t]=f});f[1]=r+u.outerWidth();l("allDaySlot")&&(u=ui,r=u.offset().top,t[0]=[r,r+u.outerHeight()]);for(var s=b.offset().top,h=v.offset().top,c=h+v.outerHeight(),e=0;ir*tr>e;e++)t.push([o(s+vi*e),o(s+vi*(e+1))])});yt=new li(ft);yi=new ai(function(n){return dr.eq(n)})}function yr(){function yt(n,t){si(n);for(var f=n.length,r=[],u=[],i=0;f>i;i++)n[i].allDay?r.push(n[i]):u.push(n[i]);e("allDaySlot")&&(pi(g(r),t),ci());gt(wt(u),t);o("eventAfterAllRender")}function pt(){hi();li().empty();rt().empty()}function g(t){for(var e,r,u,o=ht(st(t,n.map(t,y),f.visStart,f.visEnd)),h=o.length,s=[],i=0;h>i;i++)for(e=o[i],r=0;e.length>r;r++)u=e[r],u.row=0,u.level=i,s.push(u);return s}function wt(t){for(var s,e,a,h,c,w=l(),y=ft(),b=ai(),v=u(i(f.visStart),y),k=n.map(t,bt),p=[],o=0;w>o;o++){for(s=ht(st(t,k,v,u(i(v),b-y))),pr(s),e=0;s.length>e;e++)for(a=s[e],h=0;a.length>h;h++)c=a[h],c.col=o,c.level=e,p.push(c);r(v,1,!0)}return p}function bt(n){return n.end?i(n.end):u(i(n.start),e("defaultEventMinutes"))}function gt(i,r){var s,u,h,ut,at,ft,v,y,ot,c,st,vt,yt,f,p,k,a,ht,lt,pt,b,d,g=i.length,wt="",bt={},dt={},it=rt(),gt=l();for((pt=e("isRTL"))?(b=-1,d=gt-1):(b=1,d=0),s=0;g>s;s++)u=i[s],h=u.event,ut=et(u.start,u.start),at=et(u.start,u.end),ft=u.col,v=u.level,y=u.forward||0,ot=vi(ft*b+d),c=yi(ft*b+d)-ot,c=Math.min(c-6,.95*c),st=v?c/(v+y+1):y?2*(c/(y+1)-6):c,vt=ot+c/(v+y+1)*v*b+(pt?c-st:0),u.top=ut,u.left=vt,u.outerWidth=st,u.outerHeight=at-ut,wt+=nt(h,u);for(it[0].innerHTML=wt,yt=it.children(),s=0;g>s;s++)u=i[s],h=u.event,f=n(yt[s]),p=o("eventRender",h,h,f),p===!1?f.remove():(p&&p!==!0&&(f.remove(),f=n(p).css({position:"absolute",top:u.top,left:u.left}).appendTo(it)),u.element=f,h._id===r?tt(h,f,u):f[0]._fci=s,ki(h,f));for(kt(it,i,tt),s=0;g>s;s++)u=i[s],(f=u.element)&&(a=bt[k=u.key=ri(f[0])],u.vsides=a===t?bt[k]=w(f,!0):a,a=dt[k],u.hsides=a===t?dt[k]=ct(f,!0):a,ht=f.find(".fc-event-title"),ht.length&&(u.contentTop=ht[0].offsetTop));for(s=0;g>s;s++)u=i[s],(f=u.element)&&(f[0].style.width=Math.max(0,u.outerWidth-u.hsides)+"px",lt=Math.max(0,u.outerHeight-u.vsides),f[0].style.height=lt+"px",h=u.event,u.contentTop!==t&&10>lt-u.contentTop&&(f.find("div.fc-event-time").text(gi(h.start,e("timeFormat"))+" - "+h.title),f.find("div.fc-event-title").remove()),o("eventAfterRender",h,h,f))}function nt(n,t){var r="<",u=n.url,f=ui(n,e),i=["fc-event","fc-event-vert"];return h(n)&&i.push("fc-event-draggable"),t.isStart&&i.push("fc-event-start"),t.isEnd&&i.push("fc-event-end"),i=i.concat(n.className),n.source&&(i=i.concat(n.source.className||[])),r+=u?"a href='"+v(n.url)+"'":"div",r+=" class='"+i.join(" ")+"' style='position:absolute;z-index:8;top:"+t.top+"px;left:"+t.left+"px;"+f+"'><div class='fc-event-inner'><div class='fc-event-time'>"+v(d(n.start,n.end,e("timeFormat")))+"<\/div><div class='fc-event-title'>"+v(n.title)+"<\/div><\/div><div class='fc-event-bg'><\/div>",t.isEnd&&c(n)&&(r+="<div class='ui-resizable-handle ui-resizable-s'>=<\/div>"),r+("<\/"+(u?"a":"div")+">")}function ni(n,t,i){h(n)&&ti(n,t,i.isStart);i.isEnd&&c(n)&&wi(n,t,i);it(n,t)}function tt(n,t,i){var r=t.find("div.fc-event-time");h(n)&&ii(n,t,r);i.isEnd&&c(n)&&fi(n,t,r);it(n,t)}function ti(n,t,u){function l(){h||(t.width(v).height("").draggable("option","grid",null),h=!0)}var v,f,c,h=!0,tt=e("isRTL")?-1:1,w=ut(),d=ot(),g=a(),nt=p(),it=ft();t.draggable({zIndex:9,opacity:e("dragOpacity","month"),revertDuration:e("dragRevertDuration"),start:function(a,p){o("eventDragStart",t,n,a,p);k(n,t);v=t.width();w.start(function(o,a,v,p){s();o?(f=!1,c=p*tt,o.row?u?h&&(t.width(d-10),dt(t,g*Math.round((n.end?(n.end-n.start)/dr:e("defaultEventMinutes"))/nt)),t.draggable("option","grid",[d,1]),h=!1):f=!0:(at(r(i(n.start),c),r(y(n),c)),l()),f=f||h&&!c):(l(),f=!0);t.draggable("option","revert",f)},a,"drag")},stop:function(i,r){if(w.stop(),s(),o("eventDragStop",t,n,i,r),f)l(),t.css("filter",""),b(n,t);else{var u=0;h||(u=Math.round((t.offset().top-bi().offset().top)/g)*nt+it-(60*n.start.getHours()+n.start.getMinutes()));lt(this,n,c,u,h,i,r)}}})}function ii(n,t,f){function tt(t){var r,o=u(i(n.start),t);n.end&&(r=u(i(n.end),t));f.text(d(o,r,e("timeFormat")))}function it(){h&&(f.css("display",""),t.draggable("option","grid",[ft,nt]),h=!1)}var w,v,c,g,h=!1,et=e("isRTL")?-1:1,rt=ut(),st=l(),ft=ot(),nt=a(),ht=p();t.draggable({zIndex:9,scroll:!1,grid:[ft,nt],axis:1==st?"y":!1,opacity:e("dragOpacity"),revertDuration:e("dragRevertDuration"),start:function(u,l){o("eventDragStart",t,n,u,l);k(n,t);w=t.position();c=g=0;rt.start(function(u,o,c,l){t.draggable("option","revert",!u);s();u&&(v=l*et,e("allDaySlot")&&!u.row?(h||(h=!0,f.hide(),t.draggable("option","grid",null)),at(r(i(n.start),v),r(y(n),v))):it())},u,"drag")},drag:function(n,t){c=Math.round((t.position.top-w.top)/nt)*ht;c!=g&&(h||tt(c),g=c)},stop:function(i,r){var u=rt.stop();s();o("eventDragStop",t,n,i,r);u&&(v||c||h)?lt(this,n,v,h?0:c,h,i,r):(it(),t.css("filter",""),t.css(w),tt(0),b(n,t))}})}function fi(n,t,i){var r,f,s=a(),h=p();t.resizable({handles:{s:".ui-resizable-handle"},grid:s,start:function(i,u){r=f=0;k(n,t);t.css("z-index",9);o("eventResizeStart",this,n,i,u)},resize:function(o,c){r=Math.round((Math.max(s,t.height())-c.originalSize.height)/s);r!=f&&(i.text(d(n.start,r||n.end?u(ei(n),h*r):null,e("timeFormat"))),f=r)},stop:function(i,u){o("eventResizeStop",this,n,i,u);r?di(this,n,0,h*r,i,u):(t.css("z-index",8),b(n,t))}})}var f=this;f.renderEvents=yt;f.compileDaySegs=g;f.clearEvents=pt;f.slotSegHtml=nt;f.bindDaySeg=ni;oi.call(f);var e=f.opt,o=f.trigger,h=f.isEventDraggable,c=f.isEventResizable,ei=f.eventEnd,si=f.reportEvents,hi=f.reportEventClear,it=f.eventElementHandlers,ci=f.setHeight,li=f.getDaySegmentContainer,rt=f.getSlotSegmentContainer,ut=f.getHoverListener,ai=f.getMaxMinute,ft=f.getMinMinute,et=f.timePosition,vi=f.colContentLeft,yi=f.colContentRight,pi=f.renderDaySegs,wi=f.resizableDayEvent,l=f.getColCnt,ot=f.getColWidth,a=f.getSnapHeight,p=f.getSnapMinutes,bi=f.getBodyContent,ki=f.reportEventElement,b=f.showEvents,k=f.hideEvents,lt=f.eventDrop,di=f.eventResize,at=f.renderDayOverlay,s=f.clearOverlays,vt=f.calendar,gi=vt.formatDate,d=vt.formatDates}function pr(n){for(var i,r,f,e,u,t=n.length-1;t>0;t--)for(f=n[t],i=0;f.length>i;i++)for(e=f[i],r=0;n[t-1].length>r;r++)u=n[t-1][r],bt(e,u)&&(u.forward=Math.max(u.forward||0,(e.forward||0)+1))}function ei(n,f,e){function l(n,t){var i=v[n];return"object"==typeof i?lt(i,t||e):i}function h(n,t){return f.trigger.apply(f,[n,t||o].concat(Array.prototype.slice.call(arguments,2),[o]))}function tt(n){return y(n)&&!l("disableDragging")}function it(n){return y(n)&&!l("disableResizing")}function y(n){return b(n.editable,(n.source||{}).editable,l("editable"))}function rt(n){s={};for(var t,r=n.length,i=0;r>i;i++)t=n[i],s[t._id]?s[t._id].push(t):s[t._id]=[t]}function p(n){return n.end?i(n.end):at(n)}function ut(n,t){nt.push(t);c[n._id]?c[n._id].push(t):c[n._id]=[t]}function ft(){nt=[];c={}}function et(n,i){i.click(function(r){return i.hasClass("ui-draggable-dragging")||i.hasClass("ui-resizable-resizing")?t:h("eventClick",this,n,r)}).hover(function(t){h("eventMouseover",this,n,t)},function(t){h("eventMouseout",this,n,t)})}function ot(n,t){w(n,t,"show")}function st(n,t){w(n,t,"hide")}function w(n,t,i){for(var u=c[n._id],f=u.length,r=0;f>r;r++)t&&u[r][0]==t[0]||u[r][i]()}function ht(n,t,i,r,u,f,e){var c=t.allDay,o=t._id;k(s[o],i,r,u);h("eventDrop",n,t,i,r,u,function(){k(s[o],-i,-r,c);a(o)},f,e);a(o)}function ct(n,t,i,r,u,f){var e=t._id;d(s[e],i,r);h("eventResize",n,t,i,r,function(){d(s[e],-i,-r);a(e)},u,f);a(e)}function k(n,i,f,e){f=f||0;for(var o,h=n.length,s=0;h>s;s++)o=n[s],e!==t&&(o.allDay=e),u(r(o.start,i,!0),f),o.end&&(o.end=u(r(o.end,i,!0),f)),g(o,v)}function d(n,t,i){i=i||0;for(var f,o=n.length,e=0;o>e;e++)f=n[e],f.end=u(r(p(f),t,!0),i),g(f,v)}var o=this;o.element=n;o.calendar=f;o.name=e;o.opt=l;o.trigger=h;o.isEventDraggable=tt;o.isEventResizable=it;o.reportEvents=rt;o.eventEnd=p;o.reportEventElement=ut;o.reportEventClear=ft;o.eventElementHandlers=et;o.showEvents=ot;o.hideEvents=st;o.eventDrop=ht;o.eventResize=ct;var at=o.defaultEventEnd,g=f.normalizeEvent,a=f.reportEventChange,s={},nt=[],c={},v=f.options}function oi(){function ut(n,t){var v,r,nt,u,f,i,e,o,k=tt(),it=s(),rt=d(),g=0,ut=n.length;for(k[0].innerHTML=h(n),c(n,k.children()),et(n),ot(n,k,t),l(n),a(n),y(n),v=p(),r=0;it>r;r++){for(nt=0,u=[],f=0;rt>f;f++)u[f]=0;for(;ut>g&&(i=n[g]).row==r;){for(e=ii(u.slice(i.startCol,i.endCol)),i.top=e,e+=i.outerHeight,o=i.startCol;i.endCol>o;o++)u[o]=e;g++}v[r].height(ii(u))}b(n,w(v))}function ft(t,i,r){var u,f,e,o=n("<div/>"),s=tt(),v=t.length;for(o[0].innerHTML=h(t),u=o.children(),s.append(u),c(t,u),l(t),a(t),y(t),b(t,w(p())),u=[],f=0;v>f;f++)e=t[f].element,e&&(t[f].row===i&&e.css("top",r),u.push(e[0]));return n(u)}function h(n){for(var t,i,l,r,e,s,h,a,y,p=f("isRTL"),d=n.length,w=dt(),b=w.left,k=w.right,u="",c=0;d>c;c++)t=n[c],i=t.event,r=["fc-event","fc-event-hori"],ht(i)&&r.push("fc-event-draggable"),t.isStart&&r.push("fc-event-start"),t.isEnd&&r.push("fc-event-end"),p?(e=o(t.end.getDay()-1),s=o(t.start.getDay()),h=t.isEnd?g(e):b,a=t.isStart?nt(s):k):(e=o(t.start.getDay()),s=o(t.end.getDay()-1),h=t.isStart?g(e):b,a=t.isEnd?nt(s):k),r=r.concat(i.className),i.source&&(r=r.concat(i.source.className||[])),l=i.url,y=ui(i,f),u+=l?"<a href='"+v(l)+"'":"<div",u+=" class='"+r.join(" ")+"' style='position:absolute;z-index:8;left:"+h+"px;"+y+"'><div class='fc-event-inner'>",!i.allDay&&t.isStart&&(u+="<span class='fc-event-time'>"+v(fi(i.start,i.end,f("timeFormat")))+"<\/span>"),u+="<span class='fc-event-title'>"+v(i.title)+"<\/span><\/div>",t.isEnd&&lt(i)&&(u+="<div class='ui-resizable-handle ui-resizable-"+(p?"w":"e")+"'>&nbsp;&nbsp;&nbsp;<\/div>"),u+="<\/"+(l?"a":"div")+">",t.left=h,t.outerWidth=a-h,t.startCol=e,t.endCol=s+1;return u}function c(t,i){for(var o,s,u,r,h=t.length,f=0;h>f;f++)o=t[f],s=o.event,u=n(i[f]),r=e("eventRender",s,s,u),r===!1?u.remove():(r&&r!==!0&&(r=n(r).css({position:"absolute",left:o.left}),u.replaceWith(r),u=r),o.element=u)}function et(n){for(var i,r,u=n.length,t=0;u>t;t++)i=n[t],r=i.element,r&&vt(i.event,r)}function ot(n,t,i){for(var u,f,e,o=n.length,r=0;o>r;r++)u=n[r],f=u.element,f&&(e=u.event,e._id===i?it(e,f,u):f[0]._fci=r);kt(t,n,it)}function l(n){for(var r,u,e,f,s=n.length,o={},i=0;s>i;i++)r=n[i],u=r.element,u&&(e=r.key=ri(u[0]),f=o[e],f===t&&(f=o[e]=ct(u,!0)),r.hsides=f)}function a(n){for(var i,r,u=n.length,t=0;u>t;t++)i=n[t],r=i.element,r&&(r[0].style.width=Math.max(0,i.outerWidth-i.hsides)+"px")}function y(n){for(var r,u,e,f,s=n.length,o={},i=0;s>i;i++)r=n[i],u=r.element,u&&(e=r.key,f=o[e],f===t&&(f=o[e]=gt(u)),r.outerHeight=u[0].offsetHeight+f)}function p(){for(var i=s(),t=[],n=0;i>n;n++)t[n]=bt(n).find("div.fc-day-content > div");return t}function w(n){for(var r=n.length,i=[],t=0;r>t;t++)i[t]=n[t][0].offsetTop;return i}function b(n,t){for(var i,u,f,o=n.length,r=0;o>r;r++)i=n[r],u=i.element,u&&(u[0].style.top=t[i.row]+(i.top||0)+"px",f=i.event,e("eventAfterRender",f,f,u))}function st(t,o,h){var c=f("isRTL"),l=c?"w":"e",v=o.find(".ui-resizable-"+l),a=!1;k(o);o.mousedown(function(n){n.preventDefault()}).click(function(n){a&&(n.preventDefault(),n.stopImmediatePropagation())});v.mousedown(function(f){function nt(i){e("eventResizeStop",this,t,i);n("body").css("cursor","");w.stop();rt();y&&wt(this,t,y,0,i);setTimeout(function(){a=!1},0)}if(1==f.which){a=!0;var y,v,w=u.getHoverListener(),tt=s(),it=d(),b=c?-1:1,k=c?it-1:0,ut=o.css("top"),g=n.extend({},t),p=ni(t.start);oi();n("body").css("cursor",l+"-resize").one("mouseup",nt);e("eventResizeStart",this,t,f);w.start(function(n,u){var e,f,o,s;n&&(e=Math.max(p.row,n.row),f=n.col,1==tt&&(e=0),e==p.row&&(f=c?Math.min(p.col,f):Math.max(p.col,f)),y=7*e+f*b+k-(7*u.row+u.col*b+k),o=r(at(t),y,!0),y?(g.end=o,s=v,v=ft(ti([g]),h.row,ut),v.find("*").css("cursor",l+"-resize"),s&&s.remove(),pt(t)):v&&(yt(t),v.remove(),v=null),rt(),ei(t.start,r(i(o),1)))},f)}})}var u=this;u.renderDaySegs=ut;u.resizableDayEvent=st;var f=u.opt,e=u.trigger,ht=u.isEventDraggable,lt=u.isEventResizable,at=u.eventEnd,vt=u.reportEventElement,yt=u.showEvents,pt=u.hideEvents,wt=u.eventResize,s=u.getRowCnt,d=u.getColCnt;u.getColWidth;var bt=u.allDayRow,dt=u.allDayBounds,g=u.colContentLeft,nt=u.colContentRight,o=u.dayOfWeekCol,ni=u.dateCell,ti=u.compileDaySegs,tt=u.getDaySegmentContainer,it=u.bindDaySeg,fi=u.calendar.formatDates,ei=u.renderDayOverlay,rt=u.clearOverlays,oi=u.clearSelection}function si(){function h(n,t,r){i();t||(t=l(n,r));o(n,t,r);u(n,t,r)}function i(n){f&&(f=!1,s(),e("unselect",null,n))}function u(n,t,i,r){f=!0;e("select",null,n,t,i,r)}function c(f){var h=t.cellDate,l=t.cellIsAllDay,c=t.getHoverListener(),a=t.reportDayClick,e;1==f.which&&r("selectable")&&(i(f),c.start(function(n,t){s();n&&l(n)?(e=[h(t),h(n)].sort(ti),o(e[0],e[1],!0)):e=null},f),n(document).one("mouseup",function(n){c.stop();e&&(+e[0]==+e[1]&&a(e[0],!0,n),u(e[0],e[1],!0,n))}))}var t=this;t.select=h;t.unselect=i;t.reportSelection=u;t.daySelectionMousedown=c;var r=t.opt,e=t.trigger,l=t.defaultSelectionEnd,o=t.renderSelection,s=t.clearSelection,f=!1;r("selectable")&&r("unselectAuto")&&n(document).mousedown(function(t){var u=r("unselectCancel");u&&n(t.target).parents(u).length||i(t)})}function hi(){function u(r,u){var f=i.shift();return f||(f=n("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),f[0].parentNode!=u[0]&&f.appendTo(u),t.push(f.css(r).show()),f}function f(){for(var n;n=t.shift();)i.push(n.hide().unbind())}var r=this,t,i;r.renderOverlay=u;r.clearOverlays=f;t=[];i=[]}function ci(n){var t,i,r=this;r.build=function(){t=[];i=[];n(t,i)};r.cell=function(n,r){for(var o=t.length,s=i.length,f=-1,e=-1,u=0;o>u;u++)if(r>=t[u][0]&&t[u][1]>r){f=u;break}for(u=0;s>u;u++)if(n>=i[u][0]&&i[u][1]>n){e=u;break}return f>=0&&e>=0?{row:f,col:e}:null};r.rect=function(n,r,u,f,e){var o=e.offset();return{top:t[n][0]-o.top,left:i[r][0]-o.left,width:i[f][1]-i[r][0],height:t[u][1]-t[n][0]}}}function li(t){function u(n){wr(n);var u=t.cell(n.pageX,n.pageY);(!u!=!r||u&&(u.row!=r.row||u.col!=r.col))&&(u?(i||(i=u),e(u,i,u.row-i.row,u.col-i.col)):e(u,i),r=u)}var f,e,i,r,o=this;o.start=function(o,s,h){e=o;i=r=null;t.build();u(s);f=h||"mousemove";n(document).bind(f,u)};o.stop=function(){return n(document).unbind(f,u),r}}function wr(n){n.pageX===t&&(n.pageX=n.originalEvent.pageX,n.pageY=n.originalEvent.pageY)}function ai(n){function e(t){return f[t]=f[t]||n(t)}var i=this,f={},r={},u={};i.left=function(n){return r[n]=r[n]===t?e(n).position().left:r[n]};i.right=function(n){return u[n]=u[n]===t?i.left(n)+e(n).width():u[n]};i.clear=function(){f={};r={};u={}}}var nt={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;<\/span>",next:"<span class='fc-text-arrow'>&rsaquo;<\/span>",prevYear:"<span class='fc-text-arrow'>&laquo;<\/span>",nextYear:"<span class='fc-text-arrow'>&raquo;<\/span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},br={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;<\/span>",next:"<span class='fc-text-arrow'>&lsaquo;<\/span>",prevYear:"<span class='fc-text-arrow'>&raquo;<\/span>",nextYear:"<span class='fc-text-arrow'>&laquo;<\/span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},f=n.fullCalendar={version:"1.6.1"},h=f.views={},vi,yi;n.fn.fullCalendar=function(i){var r,f,u;return"string"==typeof i?(f=Array.prototype.slice.call(arguments,1),this.each(function(){var u=n.data(this,"fullCalendar"),e;u&&n.isFunction(u[i])&&(e=u[i].apply(u,f),r===t&&(r=e),"destroy"==i&&n.removeData(this,"fullCalendar"))}),r!==t?r:this):(u=i.eventSources||[],delete i.eventSources,i.events&&(u.push(i.events),delete i.events),i=n.extend(!0,{},nt,i.isRTL||i.isRTL===t&&nt.isRTL?br:{},i),this.each(function(t,r){var f=n(r),e=new bi(f,i,u);f.data("fullCalendar",e);e.render()}),this)};f.sourceNormalizers=[];f.sourceFetchers=[];vi={dataType:"json",cache:!1};yi=1;f.addDays=r;f.cloneDate=i;f.parseDate=ut;f.parseISO8601=ft;f.parseTime=et;f.formatDate=c;f.formatDates=ot;var vt=["sun","mon","tue","wed","thu","fri","sat"],pi=864e5,kr=36e5,dr=6e4,wi={s:function(n){return n.getSeconds()},ss:function(n){return a(n.getSeconds())},m:function(n){return n.getMinutes()},mm:function(n){return a(n.getMinutes())},h:function(n){return n.getHours()%12||12},hh:function(n){return a(n.getHours()%12||12)},H:function(n){return n.getHours()},HH:function(n){return a(n.getHours())},d:function(n){return n.getDate()},dd:function(n){return a(n.getDate())},ddd:function(n,t){return t.dayNamesShort[n.getDay()]},dddd:function(n,t){return t.dayNames[n.getDay()]},M:function(n){return n.getMonth()+1},MM:function(n){return a(n.getMonth()+1)},MMM:function(n,t){return t.monthNamesShort[n.getMonth()]},MMMM:function(n,t){return t.monthNames[n.getMonth()]},yy:function(n){return(n.getFullYear()+"").substring(2)},yyyy:function(n){return n.getFullYear()},t:function(n){return 12>n.getHours()?"a":"p"},tt:function(n){return 12>n.getHours()?"am":"pm"},T:function(n){return 12>n.getHours()?"A":"P"},TT:function(n){return 12>n.getHours()?"AM":"PM"},u:function(n){return c(n,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(n){var t=n.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"},w:function(n,t){return t.weekNumberCalculation(n)},W:function(n){return gi(n)}};f.dateFormatters=wi;f.applyAll=g;h.month=sr;h.basicWeek=hr;h.basicDay=cr;yt({weekMode:"fixed"});h.agendaWeek=ar;h.agendaDay=vr;yt({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}(jQuery);Handsontable={extension:{},helper:{}},function(n,t,i){"use strict";function r(n){this.isCellEdited=!1;this.instance=n;this.createElements();this.bindEvents()}function c(n){this.isCellEdited=!1;this.instance=n;this.createElements();this.bindEvents();this.emptyStringLabel="   "}function ct(n,t,r,u){i.helper.stringify(n.getDataAtRowProp(t,r))===i.helper.stringify(u.checkedTemplate)?n.setDataAtRowProp(t,r,u.uncheckedTemplate):n.setDataAtRowProp(t,r,u.checkedTemplate)}function l(t){if(!n.datepicker)throw new Error("jQuery UI Datepicker dependency not found. Did you forget to include jquery-ui.custom.js or its substitute?");this.isCellEdited=!1;this.instance=t;this.createElements();this.bindEvents()}function a(n){this.isCellEdited=!1;this.instance=n;this.createElements();this.bindEvents()}function yt(){var r=this,t,u=5;this.beforeInit=function(){this.autoColumnWidths=[];this.autoColumnSizeTmp={thead:null,theadTh:null,theadStyle:null,tbody:null,tbodyTd:null,noRenderer:null,noRendererTd:null,renderer:null,rendererTd:null,container:null,containerStyle:null,$container:null,$noRenderer:null,$renderer:null}};this.determineColumnWidth=function(r){var f=t.autoColumnSizeTmp,e,h,v,s,k,y,c,l,d,p,a,w;f.container||(e=document,f.thead=e.createElement("table"),f.thead.appendChild(e.createElement("thead")).appendChild(e.createElement("tr")).appendChild(e.createElement("th")),f.theadTh=f.thead.getElementsByTagName("th")[0],f.thead.className="htTable",f.theadStyle=f.thead.style,f.theadStyle.tableLayout="auto",f.theadStyle.width="auto",f.tbody=f.thead.cloneNode(!1),f.tbody.appendChild(e.createElement("tbody")).appendChild(e.createElement("tr")).appendChild(e.createElement("td")),f.tbodyTd=f.tbody.getElementsByTagName("td")[0],f.noRenderer=f.tbody.cloneNode(!0),f.noRendererTd=f.noRenderer.getElementsByTagName("td")[0],f.renderer=f.tbody.cloneNode(!0),f.rendererTd=f.renderer.getElementsByTagName("td")[0],f.container=e.createElement("div"),f.container.className=t.rootElement[0].className+" hidden",f.containerStyle=f.container.style,f.container.appendChild(f.thead),f.container.appendChild(f.tbody),f.container.appendChild(f.noRenderer),f.container.appendChild(f.renderer),f.$container=n(f.container),f.$noRenderer=n(f.noRenderer),f.$renderer=n(f.renderer),t.rootElement[0].parentNode.appendChild(f.container));f.container.className=t.rootElement[0].className+" hidden";var g=t.countRows(),o={},b=0;for(h=0;h<g;h++)v=i.helper.stringify(t.getDataAtCell(h,r)),s=v.length,s>b&&(b=s),o[s]||(o[s]={needed:u,strings:[]}),o[s].needed&&(o[s].strings.push(v),o[s].needed--);k=t.getSettings();k.colHeaders&&t.view.appendColHeader(r,f.theadTh);y="";for(c in o)if(o.hasOwnProperty(c))for(l=0,d=o[c].strings.length;l<d;l++)y+=o[c].strings[l]+"<br>";return f.tbodyTd.innerHTML=y,t.view.wt.wtDom.empty(f.rendererTd),t.view.wt.wtDom.empty(f.noRendererTd),f.containerStyle.display="block",p=f.$container.outerWidth(),a=t.getCellMeta(0,r),a.renderer&&(w=9999999999,f.noRendererTd.appendChild(document.createTextNode(w)),a.renderer(t,f.rendererTd,0,r,t.colToProp(r),w,a),p+=f.$renderer.width()-f.$noRenderer.width()),f.containerStyle.display="none",p};this.determineColumnsWidth=function(){var i,u,n;if(t=this,i=this.getSettings(),i.autoColumnSize||!i.colWidths)for(u=this.countCols(),n=0;n<u;n++)this.autoColumnWidths[n]=r.determineColumnWidth(n)};this.getColWidth=function(n,t){this.autoColumnWidths[n]&&this.autoColumnWidths[n]>t.width&&(t.width=this.autoColumnWidths[n])}}function pt(){var i=this,t;this.afterInit=function(){var t=this;if(this.getSettings().columnSorting){this.sortIndex=[];this.rootElement.on("click.handsontable",".columnSorting",function(r){var f=n(r.target),u;f.is(".columnSorting")&&(u=f.closest("th").index(),t.getSettings().rowHeaders&&u--,t.sortColumn===u?t.sortOrder=!t.sortOrder:(t.sortColumn=u,t.sortOrder=!0),i.sort.call(t),t.render())})}};this.sort=function(){var i,n,r;for(t=!1,i=this,this.sortIndex.length=0,n=0,r=this.countRows();n<r;n++)this.sortIndex.push([n,i.getDataAtCell(n,this.sortColumn)]);this.sortIndex.sort(function(n,t){return n[1]===t[1]?0:n[1]===null?1:t[1]===null?-1:n[1]<t[1]?i.sortOrder?-1:1:n[1]>t[1]?i.sortOrder?1:-1:0});t=!0};this.translateRow=function(n){t&&this.sortIndex&&this.sortIndex.length&&(n.row=this.sortIndex[n.row][0])};this.getColHeader=function(t,i){this.getSettings().columnSorting&&(n(i).find("span.colHeader")[0].className+=" columnSorting")}}function wt(){function v(n){var i=t.getSelected();if(i)switch(n){case"row_above":t.alter("insert_row",i[0]);break;case"row_below":t.alter("insert_row",i[2]+1);break;case"col_left":t.alter("insert_col",i[1]);break;case"col_right":t.alter("insert_col",i[3]+1);break;case"remove_row":t.alter(n,i[0],i[2]-i[0]+1);break;case"remove_col":t.alter(n,i[1],i[3]-i[1]+1);break;case"undo":t.undo();break;case"redo":t.redo()}}function e(n){return t.countRows()>=t.getSettings().maxRows&&(n==="row_above"||n==="row_below")?!0:t.countCols()>=t.getSettings().maxCols&&(n==="col_left"||n==="col_right")?!0:!1}var t=this,s=t.rootElement[0].id,u={row_above:{name:"Insert row above",disabled:e},row_below:{name:"Insert row below",disabled:e},hsep1:"---------",col_left:{name:"Insert column on the left",disabled:e},col_right:{name:"Insert column on the right",disabled:e},hsep2:"---------",remove_row:{name:"Remove row",disabled:e},remove_col:{name:"Remove column",disabled:e},hsep3:"---------",undo:{name:"Undo",disabled:function(){return!t.isUndoAvailable()}},redo:{name:"Redo",disabled:function(){return!t.isRedoAvailable()}}},h={selector:"#"+s+" table, #"+s+" div",trigger:"right",callback:v},i={},r,c,f=t.getSettings(),o,l,a;if(f.contextMenu){if(f.contextMenu===!0)i.items=u;else if(Object.prototype.toString.apply(f.contextMenu)==="[object Array]")for(i.items={},r=0,c=f.contextMenu.length;r<c;r++){if(o=f.contextMenu[r],typeof u[o]=="undefined")throw new Error('Context menu key "'+o+'" is not recognised');i.items[o]=u[o]}else if(Object.prototype.toString.apply(f.contextMenu)==="[object Object]"){if(i=f.contextMenu,i.items)for(r in i.items)i.items.hasOwnProperty(r)&&u[r]&&(i.items[r]=typeof i.items[r]=="string"?u[r]:n.extend(!0,u[r],i.items[r]));else i.items=u;i.callback&&(l=h.callback,a=i.callback,i.callback=function(n,t){l(n,t);a(n,t)})}}else return;if(!s)throw new Error("Handsontable container must have an id");n.contextMenu(n.extend(!0,h,i))}function bt(){var t=this.rootElement[0].id;n.contextMenu("destroy","#"+t+" table, #"+t+" div")}function kt(){var i,u,f,r,s,e,o=document.createElement("DIV"),t=o.style;o.className="ghost";t.position="absolute";t.top="25px";t.left=0;t.width="10px";t.height="10px";t.backgroundColor="#CCC";t.opacity=.7;n(document).mousemove(function(n){u&&(t.left=e+n.pageX-s+6+"px",t.display==="none"&&(t.display="block"))});n(document).mouseup(function(){u&&(f<r&&r--,i.getSettings().rowHeaders&&(f--,r--),i.manualColumnPositions.splice(r,0,i.manualColumnPositions.splice(f,1)[0]),n(".manualColumnMover.active").removeClass("active"),u=!1,i.forceFullRender=!0,i.view.render(),t.display="none")});this.beforeInit=function(){this.manualColumnPositions=[]};this.afterInit=function(){if(this.getSettings().manualColumnMove){var h=this;this.rootElement.on("mousedown.handsontable",".manualColumnMover",function(r){var l,a,c;i=h;l=n(r.target);a=l.closest("th");f=a.index();u=!0;s=r.pageX;c=h.rootElement.find(".htCore");c.parent()[0].appendChild(o);t.width=l.parent().width()+"px";t.height=c.height()+"px";e=parseInt(a.offset().left-c.offset().left,10);t.left=e+6+"px"});this.rootElement.on("mouseenter.handsontable","td, th",function(){var t,i;u&&(n(".manualColumnMover.active").removeClass("active"),t=h.rootElement.find("thead th"),r=n(this).index(),i=t.eq(r).find(".manualColumnMover").addClass("active"),t.not(i).removeClass("active"))})}};this.modifyCol=function(n){return this.getSettings().manualColumnMove?(typeof this.manualColumnPositions[n]=="undefined"&&(this.manualColumnPositions[n]=n),this.manualColumnPositions[n]):n};this.getColHeader=function(n,t){if(this.getSettings().manualColumnMove){var i=document.createElement("DIV");i.className="manualColumnMover";t.firstChild.appendChild(i)}}}function dt(){var u,f,i,r,c,l,o,s,a=document.createElement("DIV"),e=document.createElement("DIV"),t=e.style,h;a.className="manualColumnResizer";e.className="manualColumnResizerLine";t.position="absolute";t.top=0;t.left=0;t.width=0;t.borderRight="1px dashed #777";e.appendChild(a);n(document).mousemove(function(n){u&&(i=o+(n.pageX-l),h(f,i),t.left=s+i-1+"px",t.display==="none"&&(t.display="block"))});n(document).mouseup(function(){u&&(n(".manualColumnResizer.active").removeClass("active"),u=!1,r.forceFullRender=!0,r.view.render(),t.display="none")});n(document).dblclick(function(t){n(t.target).is(".manualColumnResizer")&&h(f,k.determineColumnWidth.call(r,f))});this.beforeInit=function(){this.manualColumnWidths=[]};this.afterInit=function(){if(this.getSettings().manualColumnResize){var h=this;this.rootElement.on("mousedown.handsontable",".manualColumnResizer",function(a){var v=a.target,y=h.rootElement.find(".htCore"),p=n(v.parentNode.parentNode);r=h;f=v.getAttribute("rel");c=n(h.rootElement[0].getElementsByTagName("col")[p.index()]);u=!0;l=a.pageX;o=c.width();i=o;v.className+=" active";t.height=y.height()+"px";y.parent()[0].appendChild(e);s=parseInt(p.offset().left-y.offset().left,10);t.left=s+i-1+"px"})}};h=function(n,t){t=Math.max(t,20);t=Math.min(t,500);r.manualColumnWidths[n]=t};this.getColHeader=function(n,t){if(this.getSettings().manualColumnResize){var i=document.createElement("DIV");i.className="manualColumnResizer";i.setAttribute("rel",n);t.firstChild.appendChild(i)}};this.getColWidth=function(n,t){this.getSettings().manualColumnResize&&this.manualColumnWidths[n]&&(t.width=this.manualColumnWidths[n])}}function s(n){var i=this,t;if(n=n||document.body,this.elDiv=document.createElement("DIV"),t=this.elDiv.style,t.position="fixed",t.top=0,t.left=0,n.appendChild(this.elDiv),this.elTextarea=document.createElement("TEXTAREA"),this.elTextarea.className="copyPaste",t=this.elTextarea.style,t.width="1px",t.height="1px",this.elDiv.appendChild(this.elTextarea),typeof t.opacity!="undefined")t.opacity=0;else/*@cc_on@if(@_jscript)typeof t.filter=="string"&&(t.filter="alpha(opacity=0)");@end@*/this._bindEvent(n,"keydown",function(n){var t=!1;n.metaKey?t=!0:n.ctrlKey&&navigator.userAgent.indexOf("Mac")===-1&&(t=!0);t&&(i.selectNodeText(i.elTextarea),setTimeout(function(){i.selectNodeText(i.elTextarea)},0));t&&(n.keyCode===67||n.keyCode===86||n.keyCode===88)&&(n.keyCode===88?setTimeout(function(){i.triggerCut(n)},0):n.keyCode===86&&setTimeout(function(){i.triggerPaste(n)},0))})}function rt(n,t){var i,u,r;for(this.instance=n,this.settings=t,this.wtDom=this.instance.wtDom,this.main=document.createElement("div"),i=this.main.style,i.position="absolute",i.top=0,i.left=0,u=0;u<5;u++)r=document.createElement("DIV"),r.className="wtBorder "+(t.className||""),i=r.style,i.backgroundColor=t.border.color,i.height=t.border.width+"px",i.width=t.border.width+"px",this.main.appendChild(r);this.top=this.main.childNodes[0];this.left=this.main.childNodes[1];this.bottom=this.main.childNodes[2];this.right=this.main.childNodes[3];this.topStyle=this.top.style;this.leftStyle=this.left.style;this.bottomStyle=this.bottom.style;this.rightStyle=this.right.style;this.corner=this.main.childNodes[4];this.corner.className+=" corner";this.cornerStyle=this.corner.style;this.cornerStyle.width="5px";this.cornerStyle.height="5px";this.cornerStyle.border="2px solid #FFF";this.disappear();n.wtTable.hider.appendChild(this.main)}function h(){this.offset=0;this.total=0;this.fixedCount=0}function tt(){this.cache=[]}function v(){this.countTH=0}function et(n,t,i){var u,r=0,f,o,e;for(this.containerSizeFn=n,this.cellSizesSum=0,this.cellSizes=[],this.cellCount=0,this.remainingSize=0;;){if(u=t(r),u===void 0)break;if(this.cellSizesSum>=this.getContainerSize(this.cellSizesSum+u))break;this.cellSizes.push(u);this.cellSizesSum+=u;this.cellCount++;r++}if(f=this.getContainerSize(this.cellSizesSum),this.remainingSize=this.cellSizesSum-f,i==="all"){if(this.remainingSize<0){for(o=f/this.cellSizesSum,r=0;r<this.cellCount-1;r++)e=Math.floor(o*this.cellSizes[r]),this.remainingSize+=e-this.cellSizes[r],this.cellSizes[r]=e;this.cellSizes[this.cellCount-1]-=this.remainingSize;this.remainingSize=0}}else i==="last"&&this.remainingSize<0&&(this.cellSizes[this.cellCount-1]-=this.remainingSize,this.remainingSize=0)}function e(n){var s=this,e=[],i,o,t,r;if(this.wtSettings=new p(this,n),this.wtDom=new f,this.wtTable=new u(this),this.wtScroll=new w(this),this.wtWheel=new ri(this),this.wtEvent=new lt(this),this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(i=0,o=this.wtTable.THEAD.childNodes[0].childNodes.length;i<o;i++)e.push(this.wtTable.THEAD.childNodes[0].childNodes[i].innerHTML);this.hasSetting("columnHeaders")||this.update("columnHeaders",function(n,t){s.wtDom.avoidInnerHTML(t,e[n])})}if(this.selections={},t=this.getSetting("selections"),t)for(r in t)t.hasOwnProperty(r)&&(this.selections[r]=new it(this,t[r]));this.drawn=!1;this.drawInterrupted=!1}function f(){}function lt(t){var i=this,r;this.instance=t;this.wtDom=this.instance.wtDom;r=[null,null,null,null];this.instance.dblClickTimeout=null;var f=function(n){var t=i.parentCell(n.target);t.TD&&t.TD.nodeName==="TD"?i.instance.hasSetting("onCellMouseDown")&&i.instance.getSetting("onCellMouseDown",n,t.coords,t.TD):i.wtDom.hasClass(n.target,"corner")&&i.instance.getSetting("onCellCornerMouseDown",n,n.target);n.button!==2&&(t.TD&&t.TD.nodeName==="TD"?(r.shift(),r.push(t.TD)):i.wtDom.hasClass(n.target,"corner")&&(r.shift(),r.push(n.target)))},u,e=function(n){if(i.instance.hasSetting("onCellMouseOver")){var t=i.wtDom.closest(n.target,["TD","TH"]);t&&t!==u&&(u=t,t.nodeName==="TD"&&i.instance.getSetting("onCellMouseOver",n,i.instance.wtTable.getCoords(t),t))}},o=function(n){if(n.button!==2){var t=i.parentCell(n.target);t.TD&&t.TD.nodeName==="TD"?(r.shift(),r.push(t.TD)):(r.shift(),r.push(n.target));r[3]!==null&&r[3]===r[2]&&(i.instance.dblClickTimeout&&r[2]===r[1]&&r[1]===r[0]?(t.TD?i.instance.getSetting("onCellDblClick",n,t.coords,t.TD):i.wtDom.hasClass(n.target,"corner")&&i.instance.getSetting("onCellCornerDblClick",n,t.coords,t.TD),clearTimeout(i.instance.dblClickTimeout),i.instance.dblClickTimeout=null):(clearTimeout(i.instance.dblClickTimeout),i.instance.dblClickTimeout=setTimeout(function(){i.instance.dblClickTimeout=null},500)))}};n(this.instance.wtTable.parent).on("mousedown",f);n(this.instance.wtTable.TABLE).on("mouseover",e);n(this.instance.wtTable.parent).on("mouseup",o)}function ot(){}function w(n){this.instance=n;this.wtScrollbarV=new ut(n);this.wtScrollbarH=new ft(n)}function y(){}function it(n,t){this.instance=n;this.settings=t;this.selected=[];t.border&&(this.border=new rt(n,t))}function p(n,t){var r=this,i;this.instance=n;this.defaults={table:void 0,scrollH:"auto",scrollV:"auto",stretchH:"hybrid",currentRowClassName:null,currentColumnClassName:null,data:void 0,offsetRow:0,offsetColumn:0,fixedColumnsLeft:0,fixedRowsTop:0,rowHeaders:null,columnHeaders:null,totalRows:void 0,totalColumns:void 0,width:null,height:null,cellRenderer:function(n,t,i){var u=r.getSetting("data",n,t);r.instance.wtDom.avoidInnerHTML(i,u===void 0||u===null?"":u)},columnWidth:50,selections:null,onCellMouseDown:null,onCellMouseOver:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,scrollbarWidth:10,scrollbarHeight:10,rowHeaderWidth:50};this.settings={};for(i in this.defaults)if(this.defaults.hasOwnProperty(i))if(t[i]!==void 0)this.settings[i]=t[i];else if(this.defaults[i]===void 0)throw new Error('A required setting "'+i+'" was not provided');else this.settings[i]=this.defaults[i];this.rowHeightCache=[]}function u(t){var i,u,r,e,f,o;this.instance=t;this.TABLE=this.instance.getSetting("table");this.wtDom=this.instance.wtDom;this.wtDom.removeTextNodes(this.TABLE);this.hasEmptyCellProblem=n.browser.msie&&parseInt(n.browser.version,10)<=7;this.hasCellSpacingProblem=n.browser.msie&&parseInt(n.browser.version,10)<=7;this.hasCellSpacingProblem&&(this.TABLE.cellSpacing=0);i=this.TABLE.parentNode;i&&i.nodeType===1&&this.wtDom.hasClass(i,"wtHolder")||(u=document.createElement("DIV"),this.instance.hasSetting("width")&&this.instance.hasSetting("height")&&(r=u.style,r.position="absolute",r.top="0",r.left="0",r.width="4000px",r.height="4000px"),u.className="wtSpreader",i&&i.insertBefore(u,this.TABLE),u.appendChild(this.TABLE));this.spreader=this.TABLE.parentNode;i=this.spreader.parentNode;i&&i.nodeType===1&&this.wtDom.hasClass(i,"wtHolder")||(e=document.createElement("DIV"),e.className="wtHider",i&&i.insertBefore(e,this.spreader),e.appendChild(this.spreader));this.hider=this.spreader.parentNode;this.hiderStyle=this.hider.style;this.hiderStyle.position="relative";i=this.hider.parentNode;i&&i.nodeType===1&&this.wtDom.hasClass(i,"wtHolder")||(f=document.createElement("DIV"),f.style.position="relative",f.className="wtHolder",i&&i.insertBefore(f,this.hider),f.appendChild(this.hider));this.parent=this.hider.parentNode;this.TBODY=this.TABLE.getElementsByTagName("TBODY")[0];this.TBODY||(this.TBODY=document.createElement("TBODY"),this.TABLE.appendChild(this.TBODY));this.THEAD=this.TABLE.getElementsByTagName("THEAD")[0];this.THEAD||(this.THEAD=document.createElement("THEAD"),this.TABLE.insertBefore(this.THEAD,this.TBODY));this.COLGROUP=this.TABLE.getElementsByTagName("COLGROUP")[0];this.COLGROUP||(this.COLGROUP=document.createElement("COLGROUP"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD));this.instance.hasSetting("columnHeaders")&&(this.THEAD.childNodes.length||(o=document.createElement("TR"),this.THEAD.appendChild(o)));this.colgroupChildrenLength=this.COLGROUP.childNodes.length;this.theadChildrenLength=this.THEAD.firstChild?this.THEAD.firstChild.childNodes.length:0;this.tbodyChildrenLength=this.TBODY.childNodes.length;this.oldCellCache=new tt;this.currentCellCache=new tt;this.rowFilter=new ot;this.columnFilter=new v}function ri(t){var i=this;this.instance=t;n(this.instance.wtTable.TABLE).on("mousewheel",function(n,t,r,u){clearTimeout(i.instance.wheelTimeout);i.instance.wheelTimeout=setTimeout(function(){u?i.instance.wtScroll.wtScrollbarV.visible&&i.instance.scrollVertical(-Math.ceil(u)).draw():r&&i.instance.wtScroll.wtScrollbarH.visible&&i.instance.scrollHorizontal(Math.ceil(r)).draw()},0);n.preventDefault()})}var ht,k,d,g,nt,ut,ft,o,b,st;i.Core=function(r,u){function y(t,i){for(var s=n.Deferred(),h=[],c=function(i){var u=n.Deferred(),r,f;return h.push(u),r=t[i][3],f=typeof r=="string"?r.toLowerCase():null,function(n){for(var o=!1,e=0,s=n.length;e<s;e++)if(r===n[e]){o=!0;break}else if(f===n[e].toLowerCase()){t[i][3]=n[e];o=!0;break}o||(t[i]=null);u.resolve()}},u,r=t.length-1;r>=0;r--)u=e.getCellMeta(t[r][0],o.propToCol(t[r][1])),u.strict&&u.source&&(n.isFunction(u.source)?u.source(t[r][3],c(r)):c(r)(u.source));return n.when.apply(n,h).then(function(){for(var h,u,r=t.length-1;r>=0;r--)t[r]===null?t.splice(r,1):(h=e.getCellMeta(t[r][0],o.propToCol(t[r][1])),h.dataType==="number"&&typeof t[r][3]=="string"&&t[r][3].length>0&&/^[0-9\s]*[.]*[0-9]*$/.test(t[r][3])&&(t[r][3]=numeral().unformat(t[r][3]||"0")));f.settings.onBeforeChange&&t.length?(u=f.settings.onBeforeChange.apply(e.rootElement[0],[t,i]),typeof u=="function"?n.when(u).then(function(){s.resolve()}):(u===!1&&t.splice(0,t.length),s.resolve())):s.resolve()}),n.when(s)}function w(n,t){var i=0,r=n.length;if(r){while(i<r){if(f.settings.minSpareRows)while(n[i][0]>e.countRows()-1)o.createRow();if(f.dataType==="array"&&f.settings.minSpareCols)while(o.propToCol(n[i][1])>e.countCols()-1)o.createCol();o.set(n[i][0],n[i][1],n[i][3]);i++}e.forceFullRender=!0;c.keepEmptyRows();h.refreshBorders();v("datachange.handsontable",[n,t||"edit"])}}function b(t,i,r){return typeof t=="object"?t:n.isPlainObject(r)?value:[[t,i,r]]}var f,o,c,h,a,l,e,v,p;this.rootElement=r;this.guid="ht_"+i.helper.randomString();this.rootElement[0].id||(this.rootElement[0].id=this.guid);e=this;f={settings:{},settingsFromDOM:{},selStart:new i.SelectionPoint,selEnd:new i.SelectionPoint,editProxy:!1,isPopulated:null,scrollable:null,undoRedo:null,extensions:{},colToProp:null,propToCol:null,dataSchema:null,dataType:"array",firstRun:!0};o={recursiveDuckSchema:function(t){var r,i;if(n.isPlainObject(t)){r={};for(i in t)t.hasOwnProperty(i)&&(r[i]=n.isPlainObject(t[i])?o.recursiveDuckSchema(t[i]):null)}else r=[];return r},recursiveDuckColumns:function(t,i,r){var e,u;if(typeof i=="undefined"&&(i=0,r=""),n.isPlainObject(t))for(u in t)t.hasOwnProperty(u)&&(t[u]===null?(e=r+u,f.colToProp.push(e),f.propToCol[e]=i,i++):i=o.recursiveDuckColumns(t[u],i,u+"."));return i},createMap:function(){if(typeof o.getSchema()=="undefined")throw new Error("trying to create `columns` definition but you didnt' provide `schema` nor `data`");var n,t,i=o.getSchema();if(f.colToProp=[],f.propToCol={},f.settings.columns)for(n=0,t=f.settings.columns.length;n<t;n++)f.colToProp[n]=f.settings.columns[n].data,f.propToCol[f.settings.columns[n].data]=n;else o.recursiveDuckColumns(i)},colToProp:function(n){return n=i.PluginModifiers.run(e,"col",n),f.colToProp&&typeof f.colToProp[n]!="undefined"?f.colToProp[n]:n},propToCol:function(n){var t;return t=typeof f.propToCol[n]!="undefined"?f.propToCol[n]:n,i.PluginModifiers.run(e,"col",t)},getSchema:function(){return f.settings.dataSchema?typeof f.settings.dataSchema=="function"?f.settings.dataSchema():f.settings.dataSchema:f.duckDataSchema},createRow:function(t){var i,r=e.countRows(),u,s;if((typeof t!="number"||t>=r)&&(t=r),f.dataType==="array")for(i=[],u=0,s=e.countCols();u<s;u++)i.push(null);else i=f.dataType==="function"?f.settings.dataSchema(t):n.extend(!0,{},o.getSchema());if(f.settings.onCreateRow)f.settings.onCreateRow(t,i);t===r?f.settings.data.push(i):f.settings.data.splice(t,0,i);e.forceFullRender=!0},createCol:function(n){if(f.dataType==="object"||f.settings.columns)throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting");var t=0,i=e.countRows();if(typeof n!="number"||n>=e.countCols())for(;t<i;t++)typeof f.settings.data[t]=="undefined"&&(f.settings.data[t]=[]),f.settings.data[t].push("");else for(;t<i;t++)f.settings.data[t].splice(n,0,"");e.forceFullRender=!0},removeRow:function(n,t){t||(t=1);typeof n!="number"&&(n=-t);f.settings.data.splice(n,t);e.forceFullRender=!0},removeCol:function(n,t){if(f.dataType==="object"||f.settings.columns)throw new Error("cannot remove column with object data source or columns option specified");t||(t=1);typeof n!="number"&&(n=-t);for(var i=0,r=e.countRows();i<r;i++)f.settings.data[i].splice(n,t);e.forceFullRender=!0},getVars:{},get:function(n,t){var s,r,u,h;if(o.getVars.row=n,o.getVars.prop=t,i.PluginHooks.run(e,"beforeGet",o.getVars),typeof o.getVars.prop=="string"&&o.getVars.prop.indexOf(".")>-1){if(s=o.getVars.prop.split("."),r=f.settings.data[o.getVars.row],!r)return null;for(u=0,h=s.length;u<h;u++)if(r=r[s[u]],typeof r=="undefined")return null;return r}return typeof o.getVars.prop=="function"?o.getVars.prop(f.settings.data.slice(o.getVars.row,o.getVars.row+1)[0]):f.settings.data[o.getVars.row]?f.settings.data[o.getVars.row][o.getVars.prop]:null},setVars:{},set:function(n,t,r){var s,h,u,c;if(o.setVars.row=n,o.setVars.prop=t,o.setVars.value=r,i.PluginHooks.run(e,"beforeSet",o.setVars),typeof o.setVars.prop=="string"&&o.setVars.prop.indexOf(".")>-1){for(s=o.setVars.prop.split("."),h=f.settings.data[o.setVars.row],u=0,c=s.length-1;u<c;u++)h=h[s[u]];h[s[u]]=o.setVars.value}else typeof o.setVars.prop=="function"?o.setVars.prop(f.settings.data.slice(o.setVars.row,o.setVars.row+1)[0],o.setVars.value):f.settings.data[o.setVars.row][o.setVars.prop]=o.setVars.value},clear:function(){for(var t,n=0;n<e.countRows();n++)for(t=0;t<e.countCols();t++)o.set(n,o.colToProp(t),"")},getAll:function(){return f.settings.data},getRange:function(n,t){var i,f,r,e,s=[],u;for(f=Math.max(n.row,t.row),e=Math.max(n.col,t.col),i=Math.min(n.row,t.row);i<=f;i++){for(u=[],r=Math.min(n.col,t.col);r<=e;r++)u.push(o.get(i,o.colToProp(r)));s.push(u)}return s},getText:function(n,t){return SheetClip.stringify(o.getRange(n,t))}};c={alter:function(t,i,r){var y,a,p,s,w,l,b,u;y=n.extend(!0,[],o.getAll());switch(t){case"insert_row":for(r||(r=1),u=0;u<r&&e.countRows()<f.settings.maxRows;)o.createRow(i),u++;u&&(f.selStart.exists()&&f.selStart.row()>=i?(f.selStart.row(f.selStart.row()+u),h.transformEnd(u,0)):h.refreshBorders());break;case"insert_col":for(r||(r=1),u=0;u<r&&e.countCols()<f.settings.maxCols;)o.createCol(i),u++;u&&(f.selStart.exists()&&f.selStart.col()>=i?(f.selStart.col(f.selStart.col()+u),h.transformEnd(0,u)):h.refreshBorders());break;case"remove_row":o.removeRow(i,r);c.keepEmptyRows();h.refreshBorders();break;case"remove_col":o.removeCol(i,r);c.keepEmptyRows();h.refreshBorders();break;default:throw Error('There is no such action "'+t+'"');}for(p=[],a=o.getAll(),s=0,w=a.length;s<w;s++)for(l=0,b=a[s].length;l<b;l++)p.push([s,l,y[s]?y[s][l]:null,a[s][l]]);v("datachange.handsontable",[p,"alter"]);c.keepEmptyRows()},keepEmptyRows:function(){var v,y,l=e.countEmptyRows(!0),n,s,c;if(y=e.countRows(),y<f.settings.minRows)for(v=0;v<f.settings.minRows-y;v++)o.createRow();if(l<f.settings.minSpareRows)for(;l<f.settings.minSpareRows&&e.countRows()<f.settings.maxRows;l++)o.createRow();if(n=e.countEmptyCols(!0),!f.settings.columns&&e.countCols()<f.settings.minCols)for(;e.countCols()<f.settings.minCols;n++)o.createCol();if(!f.settings.columns&&f.dataType==="array"&&n<f.settings.minSpareCols)for(;n<f.settings.minSpareCols&&e.countCols()<f.settings.maxCols;n++)o.createCol();if(f.settings.enterBeginsEditing)for(;(f.settings.minRows||f.settings.minSpareRows)&&e.countRows()>f.settings.minRows&&f.settings.minSpareRows&&l>f.settings.minSpareRows;l--)o.removeRow();if(f.settings.enterBeginsEditing&&!f.settings.columns)for(;(f.settings.minCols||f.settings.minSpareCols)&&e.countCols()>f.settings.minCols&&f.settings.minSpareCols&&n>f.settings.minSpareCols;n--)o.removeCol();if(s=e.countRows(),c=e.countCols(),(s===0||c===0)&&h.deselect(),f.selStart.exists()){var a,t=f.selStart.row(),i=f.selStart.col(),r=f.selEnd.row(),u=f.selEnd.col();t>s-1?(t=s-1,a=!0,r>t&&(r=t)):r>s-1&&(r=s-1,a=!0,t>r&&(t=r));i>c-1?(i=c-1,a=!0,u>i&&(u=i)):u>c-1&&(u=c-1,a=!0,i>u&&(i=u));a&&e.selectCell(t,i,r,u)}},populateFromArray:function(n,t,i,r){var o,h,s,c,l=[],u={};if(h=t.length,h===0)return!1;for(u.row=n.row,u.col=n.col,o=0;o<h;o++){if(i&&u.row>i.row||!f.settings.minSpareRows&&u.row>e.countRows()-1||u.row>=f.settings.maxRows)break;for(u.col=n.col,c=t[o]?t[o].length:0,s=0;s<c;s++){if(i&&u.col>i.col||!f.settings.minSpareCols&&u.col>e.countCols()-1||u.col>=f.settings.maxCols)break;e.getCellMeta(u.row,u.col).isWritable&&l.push([u.row,u.col,t[o][s]]);u.col++;i&&s===c-1&&(s=-1)}u.row++;i&&o===h-1&&(o=-1)}e.setDataAtCell(l,null,null,r||"populateFromArray")},getCornerCoords:function(t){function i(t,i,r){function u(n){return n[r]}return Array.prototype.map?t.apply(Math,i.map(u)):t.apply(Math,n.map(i,u))}return{TL:{row:i(Math.min,t,"row"),col:i(Math.min,t,"col")},BR:{row:i(Math.max,t,"row"),col:i(Math.max,t,"col")}}},getCellsAtCoords:function(n,t){for(var i=c.getCornerCoords([n,t]),u,f=[],r=i.TL.row;r<=i.BR.row;r++)for(u=i.TL.col;u<=i.BR.col;u++)f.push(e.view.getCellAtCoords({row:r,col:u}));return f}};this.selection=h={inProgress:!1,begin:function(){e.selection.inProgress=!0},finish:function(){var n=e.getSelected();e.rootElement.triggerHandler("selectionend.handsontable",n);e.rootElement.triggerHandler("selectionendbyprop.handsontable",[n[0],e.colToProp(n[1]),n[2],e.colToProp(n[3])]);e.selection.inProgress=!1},isInProgress:function(){return e.selection.inProgress},setRangeStart:function(n){f.selStart.coords(n);h.setRangeEnd(n)},setRangeEnd:function(n,t){e.selection.begin();f.selEnd.coords(n);f.settings.multiSelect||f.selStart.coords(n);e.view.wt.selections.current.clear();e.view.wt.selections.current.add(f.selStart.arr());e.view.wt.selections.area.clear();h.isMultiple()&&(e.view.wt.selections.area.add(f.selStart.arr()),e.view.wt.selections.area.add(f.selEnd.arr()));(f.settings.currentRowClassName||f.settings.currentColClassName)&&(e.view.wt.selections.highlight.clear(),e.view.wt.selections.highlight.add(f.selStart.arr()),e.view.wt.selections.highlight.add(f.selEnd.arr()));e.rootElement.triggerHandler("selection.handsontable",[f.selStart.row(),f.selStart.col(),f.selEnd.row(),f.selEnd.col()]);e.rootElement.triggerHandler("selectionbyprop.handsontable",[f.selStart.row(),o.colToProp(f.selStart.col()),f.selEnd.row(),o.colToProp(f.selEnd.col())]);t!==!1&&(e.view.scrollViewport(n),e.view.wt.draw(!0),e.view.scrollViewport(n));h.refreshBorders()},refreshBorders:function(n,t){t||a.destroy(n);e.view.render();h.isSelected()&&!t&&a.prepare()},isMultiple:function(){return!(f.selEnd.col()===f.selStart.col()&&f.selEnd.row()===f.selStart.row())},transformStart:function(n,t,i){f.selStart.row()+n>e.countRows()-1?i&&f.settings.minSpareRows>0?e.alter("insert_row",e.countRows()):f.settings.autoWrapCol&&f.selStart.col()+t<e.countCols()-1&&(n=1-e.countRows(),t=1):f.settings.autoWrapCol&&f.selStart.row()+n<0&&f.selStart.col()+t>=0&&(n=e.countRows()-1,t=-1);f.selStart.col()+t>e.countCols()-1?i&&f.settings.minSpareCols>0?e.alter("insert_col",e.countCols()):f.settings.autoWrapRow&&f.selStart.row()+n<e.countRows()-1&&(n=1,t=1-e.countCols()):f.settings.autoWrapRow&&f.selStart.col()+t<0&&f.selStart.row()+n>=0&&(n=-1,t=e.countCols()-1);var u=e.countRows(),o=e.countCols(),r={row:f.selStart.row()+n,col:f.selStart.col()+t};r.row<0?r.row=0:r.row>0&&r.row>=u&&(r.row=u-1);r.col<0?r.col=0:r.col>0&&r.col>=o&&(r.col=o-1);h.setRangeStart(r)},transformEnd:function(n,t){if(f.selEnd.exists()){var r=e.countRows(),u=e.countCols(),i={row:f.selEnd.row()+n,col:f.selEnd.col()+t};i.row<0?i.row=0:i.row>0&&i.row>=r&&(i.row=r-1);i.col<0?i.col=0:i.col>0&&i.col>=u&&(i.col=u-1);h.setRangeEnd(i)}},isSelected:function(){return f.selEnd.exists()},inInSelection:function(n){if(!h.isSelected())return!1;var t=c.getCornerCoords([f.selStart.coords(),f.selEnd.coords()]);return t.TL.row<=n.row&&t.BR.row>=n.row&&t.TL.col<=n.col&&t.BR.col>=n.col},deselect:function(){h.isSelected()&&(e.selection.inProgress=!1,f.selEnd=new i.SelectionPoint,e.view.wt.selections.current.clear(),e.view.wt.selections.area.clear(),a.destroy(),h.refreshBorders(),e.rootElement.triggerHandler("deselect.handsontable"))},selectAll:function(){f.settings.multiSelect&&(h.setRangeStart({row:0,col:0}),h.setRangeEnd({row:e.countRows()-1,col:e.countCols()-1},!1))},empty:function(){if(h.isSelected()){for(var i=c.getCornerCoords([f.selStart.coords(),f.selEnd.coords()]),t,r=[],n=i.TL.row;n<=i.BR.row;n++)for(t=i.TL.col;t<=i.BR.col;t++)e.getCellMeta(n,t).isWritable&&r.push([n,t,""]);e.setDataAtCell(r)}}};this.autofill=l={handle:null,init:function(){l.handle?l.handle.disabled=!1:l.handle={}},disable:function(){l.handle.disabled=!0},selectAdjacent:function(){var n,i,t,u,r;n=h.isMultiple()?e.view.wt.selections.area.getCorners():e.view.wt.selections.current.getCorners();i=o.getAll();n:for(t=n[2]+1;t<e.countRows();t++){for(r=n[1];r<=n[3];r++)if(i[t][r])break n;!i[t][n[1]-1]&&!i[t][n[3]+1]||(u=t)}u&&(e.view.wt.selections.fill.clear(),e.view.wt.selections.fill.add([n[0],n[1]]),e.view.wt.selections.fill.add([u,n[3]]),l.apply())},apply:function(){var n,t,i,r;(l.handle.isDragged=0,n=e.view.wt.selections.fill.getCorners(),n)&&(e.view.wt.selections.fill.clear(),t=h.isMultiple()?e.view.wt.selections.area.getCorners():e.view.wt.selections.current.getCorners(),n[0]===t[0]&&n[1]<t[1]?(i={row:n[0],col:n[1]},r={row:n[2],col:t[1]-1}):n[0]===t[0]&&n[3]>t[3]?(i={row:n[0],col:t[3]+1},r={row:n[2],col:n[3]}):n[0]<t[0]&&n[1]===t[1]?(i={row:n[0],col:n[1]},r={row:t[0]-1,col:n[3]}):n[2]>t[2]&&n[1]===t[1]&&(i={row:t[2]+1,col:n[1]},r={row:n[2],col:n[3]}),i&&(c.populateFromArray(i,SheetClip.parse(o.getText(f.selStart.coords(),f.selEnd.coords())),r,"autofill"),h.setRangeStart({row:n[0],col:n[1]}),h.setRangeEnd({row:n[2],col:n[3]})))},showBorder:function(n){n.row=n[0];n.col=n[1];var t=c.getCornerCoords([f.selStart.coords(),f.selEnd.coords()]);if(f.settings.fillHandle!=="horizontal"&&(t.BR.row<n.row||t.TL.row>n.row))n=[n.row,t.BR.col];else if(f.settings.fillHandle!=="vertical")n=[t.BR.row,n.col];else return;e.view.wt.selections.fill.clear();e.view.wt.selections.fill.add([f.selStart.coords().row,f.selStart.coords().col]);e.view.wt.selections.fill.add([f.selEnd.coords().row,f.selEnd.coords().col]);e.view.wt.selections.fill.add(n);e.view.render()}};a={init:function(){function t(){h.empty()}function r(n){e.rootElement.one("datachange.handsontable",function(n,t){if(t.length){var i=t[t.length-1];h.setRangeEnd({row:i[0],col:e.propToCol(i[1])})}});var r=n.replace(/^[\r\n]*/g,"").replace(/[\r\n]*$/g,""),i=SheetClip.parse(r),t=c.getCornerCoords([f.selStart.coords(),f.selEnd.coords()]);c.populateFromArray(t.TL,i,{row:Math.max(t.BR.row,i.length-1+t.TL.row),col:Math.max(t.BR.col,i[0].length-1+t.TL.col)},"paste")}function o(n){var s,t,r,o;if(f.settings.beforeOnKeyDown&&f.settings.beforeOnKeyDown.call(e,n),!u.children(".context-menu-list:visible").length){if(n.keyCode===17||n.keyCode===224||n.keyCode===91||n.keyCode===93){a.setCopyableText();return}if(f.lastKeyCode=n.keyCode,h.isSelected()){if(s=(n.ctrlKey||n.metaKey)&&!n.altKey,i.helper.isPrintableChar(n.keyCode)&&s){n.keyCode===65?(h.selectAll(),a.setCopyableText(),n.preventDefault()):n.keyCode===89||n.shiftKey&&n.keyCode===90?f.undoRedo&&f.undoRedo.redo():n.keyCode===90&&f.undoRedo&&f.undoRedo.undo();return}t=n.shiftKey?h.setRangeEnd:h.setRangeStart;switch(n.keyCode){case 38:n.shiftKey?h.transformEnd(-1,0):h.transformStart(-1,0);n.preventDefault();n.stopPropagation();break;case 9:r=typeof f.settings.tabMoves=="function"?f.settings.tabMoves(n):f.settings.tabMoves;n.shiftKey?h.transformStart(-r.row,-r.col):h.transformStart(r.row,r.col,!0);n.preventDefault();n.stopPropagation();break;case 39:n.shiftKey?h.transformEnd(0,1):h.transformStart(0,1);n.preventDefault();n.stopPropagation();break;case 37:n.shiftKey?h.transformEnd(0,-1):h.transformStart(0,-1);n.preventDefault();n.stopPropagation();break;case 8:case 46:h.empty(n);n.preventDefault();break;case 40:n.shiftKey?h.transformEnd(1,0):h.transformStart(1,0);n.preventDefault();n.stopPropagation();break;case 113:n.preventDefault();break;case 13:o=typeof f.settings.enterMoves=="function"?f.settings.enterMoves(n):f.settings.enterMoves;n.shiftKey?h.transformStart(-o.row,-o.col):h.transformStart(o.row,o.col,!0);n.preventDefault();break;case 36:n.ctrlKey||n.metaKey?t({row:0,col:f.selStart.col()}):t({row:f.selStart.row(),col:0});n.preventDefault();n.stopPropagation();break;case 35:n.ctrlKey||n.metaKey?t({row:e.countRows()-1,col:f.selStart.col()}):t({row:f.selStart.row(),col:e.countCols()-1});n.preventDefault();n.stopPropagation();break;case 33:h.transformStart(-e.countVisibleRows(),0);e.view.wt.scrollVertical(-e.countVisibleRows());e.view.render();n.preventDefault();n.stopPropagation();break;case 34:h.transformStart(e.countVisibleRows(),0);e.view.wt.scrollVertical(e.countVisibleRows());e.view.render();n.preventDefault();n.stopPropagation()}}}}var u=n(document.body);e.copyPaste=new s(e.rootElement[0]);e.copyPaste.onCut(t);e.copyPaste.onPaste(r);e.rootElement.on("keydown.handsontable."+e.guid,o)},destroy:function(n){if(typeof f.editorDestroyer=="function"){var t=f.editorDestroyer;f.editorDestroyer=null;t(n)}},setCopyableText:function(){var n=Math.min(f.selStart.row(),f.selEnd.row()),t=Math.min(f.selStart.col(),f.selEnd.col()),i=Math.max(f.selStart.row(),f.selEnd.row()),r=Math.max(f.selStart.col(),f.selEnd.col()),u=Math.min(i,n+f.settings.copyRowsLimit-1),s=Math.min(r,t+f.settings.copyColsLimit-1);if(e.copyPaste.copyable(o.getText({row:n,col:t},{row:u,col:s})),(i!==u||r!==s)&&f.settings.onCopyLimit)f.settings.onCopyLimit(i-n+1,r-t+1,f.settings.copyRowsLimit,f.settings.copyColsLimit)},prepare:function(){if(e.getCellMeta(f.selStart.row(),f.selStart.col()).isWritable){e.listen();var n=e.view.getCellAtCoords(f.selStart.coords());f.editorDestroyer=e.view.applyCellTypeMethod("editor",n,f.selStart.row(),f.selStart.col())}}};this.init=function(){i.PluginHooks.run(e,"beforeInit");a.init();p();this.updateSettings(u);this.parseSettingsFromDOM();this.focusCatcher=new i.FocusCatcher(this);this.view=new i.TableView(this);this.forceFullRender=!0;this.view.render();typeof f.firstRun=="object"&&(v("datachange.handsontable",f.firstRun),f.firstRun=!1);i.PluginHooks.run(e,"afterInit")};v=function(n,t){e.rootElement.triggerHandler(n,t)};p=function(){e.rootElement.on("datachange.handsontable",function(n,t,i){f.settings.onChange&&f.settings.onChange.apply(e.rootElement[0],[t,i])});e.rootElement.on("selection.handsontable",function(n,t,i,r,u){f.settings.onSelection&&f.settings.onSelection.apply(e.rootElement[0],[t,i,r,u])});e.rootElement.on("selectionbyprop.handsontable",function(n,t,i,r,u){f.settings.onSelectionByProp&&f.settings.onSelectionByProp.apply(e.rootElement[0],[t,i,r,u])});e.rootElement.on("selectionend.handsontable",function(n,t,i,r,u){f.settings.onSelectionEnd&&f.settings.onSelectionEnd.apply(e.rootElement[0],[t,i,r,u])});e.rootElement.on("selectionendbyprop.handsontable",function(n,t,i,r,u){f.settings.onSelectionEndByProp&&f.settings.onSelectionEndByProp.apply(e.rootElement[0],[t,i,r,u])})};this.setDataAtCell=function(n,t,i,r){for(var f=b(n,t,i),e=[],s,u=0,h=f.length;u<h;u++){if(typeof f[u][1]!="number")throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");s=o.colToProp(f[u][1]);e.push([f[u][0],s,o.get(f[u][0],s),f[u][2]])}y(e,r).then(function(){w(e,r)})};this.setDataAtRowProp=function(n,t,i,r){for(var f=b(n,t,i),e=[],u=0,s=f.length;u<s;u++)e.push([f[u][0],f[u][1],o.get(f[u][0],f[u][1]),f[u][2]]);y(e,r).then(function(){w(e,r)})};this.listen=function(){e.focusCatcher.listen()};this.destroyEditor=function(n){h.refreshBorders(n)};this.populateFromArray=function(n,t,i,r){return c.populateFromArray(n,t,i,r)};this.getCornerCoords=function(n){return c.getCornerCoords(n)};this.getSelected=function(){if(h.isSelected())return[f.selStart.row(),f.selStart.col(),f.selEnd.row(),f.selEnd.col()]};this.parseSettingsFromDOM=function(){var r=this.rootElement.css("overflow"),n,i,u;r==="scroll"||r==="auto"?(this.rootElement[0].style.overflow="visible",f.settingsFromDOM.overflow=r):(f.settings.width===void 0||f.settings.height===void 0)&&(f.settingsFromDOM.overflow="auto");f.settingsFromDOM.width=f.settings.width===void 0?this.rootElement.width():void 0;f.settingsFromDOM.height=void 0;f.settings.height===void 0&&(f.settingsFromDOM.overflow==="scroll"||f.settingsFromDOM.overflow==="auto")&&(n=this.rootElement[0].cloneNode(!1),i=this.rootElement[0].parentNode,i&&(n.removeAttribute("id"),i.appendChild(n),u=parseInt(t.getComputedStyle(n,null).getPropertyValue("height"),10),u>0&&(f.settingsFromDOM.height=u),i.removeChild(n)))};this.render=function(){e.view&&(e.forceFullRender=!0,e.parseSettingsFromDOM(),h.refreshBorders(null,!0))};this.loadData=function(t){if(!(t.push&&t.splice))throw new Error("loadData only accepts array of objects or array of arrays ("+typeof t+" given)");f.isPopulated=!1;f.settings.data=t;f.dataType=f.settings.dataSchema instanceof Array||t[0]instanceof Array?"array":n.isFunction(f.settings.dataSchema)?"function":"object";f.duckDataSchema=t[0]?o.recursiveDuckSchema(t[0]):{};o.createMap();c.keepEmptyRows();i.PluginHooks.run(e,"afterLoadData");f.firstRun?f.firstRun=[null,"loadData"]:(v("datachange.handsontable",[null,"loadData"]),e.render());f.isPopulated=!0;e.clearUndo()};this.getData=function(n,t,i,r){return typeof n=="undefined"?o.getAll():o.getRange({row:n,col:t},{row:i,col:r})};this.updateSettings=function(n){var t,r,u,s,v,a,y;if(typeof n.rows!="undefined")throw new Error("'rows' setting is no longer supported. do you mean startRows, minRows or maxRows?");if(typeof n.cols!="undefined")throw new Error("'cols' setting is no longer supported. do you mean startCols, minCols or maxCols?");typeof n.undo!="undefined"&&(f.undoRedo&&n.undo===!1?f.undoRedo=null:f.undoRedo||n.undo!==!0||(f.undoRedo=new i.UndoRedo(e)));for(t in n)if(t==="data")continue;else n.hasOwnProperty(t)&&(f.settings[t]=n[t],i.extension[t]&&(f.extensions[t]=new i.extension[t](e,n[t])));if(n.data===void 0&&f.settings.data===void 0){for(r=[],s=0,v=f.settings.startRows;s<v;s++){for(u=[],a=0,y=f.settings.startCols;a<y;a++)u.push(null);r.push(u)}e.loadData(r)}else n.data!==void 0?e.loadData(n.data):n.columns!==void 0&&o.createMap();typeof n.fillHandle!="undefined"&&(l.handle&&n.fillHandle===!1?l.disable():l.handle||n.fillHandle===!1||l.init());c.keepEmptyRows();e.view&&(e.forceFullRender=!0,h.refreshBorders(null,!0))};this.getSettings=function(){return f.settings};this.getSettingsFromDOM=function(){return f.settingsFromDOM};this.clear=function(){h.selectAll();h.empty()};this.isUndoAvailable=function(){return f.undoRedo&&f.undoRedo.isUndoAvailable()};this.isRedoAvailable=function(){return f.undoRedo&&f.undoRedo.isRedoAvailable()};this.undo=function(){f.undoRedo&&f.undoRedo.undo()};this.redo=function(){f.undoRedo&&f.undoRedo.redo()};this.clearUndo=function(){f.undoRedo&&f.undoRedo.clear()};this.alter=function(n,t,i){c.alter(n,t,i)};this.getCell=function(n,t){return e.view.getCellAtCoords({row:n,col:t})};this.colToProp=function(n){return o.colToProp(n)};this.propToCol=function(n){return o.propToCol(n)};this.getDataAtCell=function(n,t){return o.get(n,o.colToProp(t))};this.getDataAtRowProp=function(n,t){return o.get(n,t)};this.getCellMeta=function(t,r){var u=n.extend(!0,u,i.TextCell),c=o.colToProp(r),h,s;if(f.settings.columns&&(u=n.extend(!0,u,f.settings.columns[r]||{})),f.settings.cells&&(u=n.extend(!0,u,f.settings.cells(t,r,c)||{})),i.PluginHooks.run(e,"beforeGetCellMeta",t,r,u),typeof u.type=="string"&&i.cellTypes[u.type]?s=i.cellTypes[u.type]:typeof u.type=="object"&&(s=u.type),s)for(h in s)s.hasOwnProperty(h)&&(u[h]=s[h]);return u.isWritable=!u.readOnly,i.PluginHooks.run(e,"afterGetCellMeta",t,r,u),u};this.getRowHeader=function(n){var i,t,r;if(n===void 0){for(i=[],t=0,r=e.countRows();t<r;t++)i.push(e.getRowHeader(t));return i}return Object.prototype.toString.call(f.settings.rowHeaders)==="[object Array]"&&f.settings.rowHeaders[n]!==void 0?f.settings.rowHeaders[n]:typeof f.settings.rowHeaders=="function"?f.settings.rowHeaders(n):f.settings.rowHeaders&&typeof f.settings.rowHeaders!="string"&&typeof f.settings.rowHeaders!="number"?n+1:f.settings.rowHeaders};this.getColHeader=function(n){var r,t,u;if(n===void 0){for(r=[],t=0,u=e.countCols();t<u;t++)r.push(e.getColHeader(t));return r}return n=i.PluginModifiers.run(e,"col",n),f.settings.columns&&f.settings.columns[n]&&f.settings.columns[n].title?f.settings.columns[n].title:Object.prototype.toString.call(f.settings.colHeaders)==="[object Array]"&&f.settings.colHeaders[n]!==void 0?f.settings.colHeaders[n]:typeof f.settings.colHeaders=="function"?f.settings.colHeaders(n):f.settings.colHeaders&&typeof f.settings.colHeaders!="string"&&typeof f.settings.colHeaders!="number"?i.helper.spreadsheetColumnLabel(n):f.settings.colHeaders};this.getColWidth=function(n){n=i.PluginModifiers.run(e,"col",n);var t={};return t.width=f.settings.columns&&f.settings.columns[n]&&f.settings.columns[n].width?f.settings.columns[n].width:Object.prototype.toString.call(f.settings.colWidths)==="[object Array]"&&f.settings.colWidths[n]!==void 0?f.settings.colWidths[n]:50,i.PluginHooks.run(e,"afterGetColWidth",n,t),t.width};this.countRows=function(){return f.settings.data.length};this.countCols=function(){return f.dataType==="object"||f.dataType==="function"?f.settings.columns&&f.settings.columns.length?f.settings.columns.length:f.colToProp.length:f.dataType==="array"?f.settings.columns&&f.settings.columns.length?f.settings.columns.length:f.settings.data&&f.settings.data[0]&&f.settings.data[0].length?f.settings.data[0].length:0:void 0};this.rowOffset=function(){return e.view.wt.getSetting("offsetRow")};this.colOffset=function(){return e.view.wt.getSetting("offsetColumn")};this.countVisibleRows=function(){return e.view.wt.wtTable.countVisibleRows()};this.countVisibleCols=function(){return e.view.wt.wtTable.countVisibleColumns()};this.countEmptyRows=function(n){for(var t=e.countRows()-1,i=0;t>=0;){if(e.isEmptyRow(t))i++;else if(n)break;t--}return i};this.countEmptyCols=function(n){if(e.countRows()<1)return 0;for(var t=e.countCols()-1,i=0;t>=0;){if(e.isEmptyCol(t))i++;else if(n)break;t--}return i};this.isEmptyRow=function(n){var t,i,r;if(f.settings.isEmptyRow)return f.settings.isEmptyRow.call(this,n);for(i=0,r=this.countCols();i<r;i++)if(t=this.getDataAtCell(n,i),t!==""&&t!==null&&typeof t!="undefined")return!1;return!0};this.isEmptyCol=function(n){var t,i,r;if(f.settings.isEmptyCol)return f.settings.isEmptyCol.call(this,n);for(i=0,r=this.countRows();i<r;i++)if(t=this.getDataAtCell(i,n),t!==""&&t!==null&&typeof t!="undefined")return!1;return!0};this.selectCell=function(n,t,i,r,u){return typeof n!="number"||n<0||n>=e.countRows()?!1:typeof t!="number"||t<0||t>=e.countCols()?!1:typeof i!="undefined"&&(typeof i!="number"||i<0||i>=e.countRows()||typeof r!="number"||r<0||r>=e.countCols())?!1:(f.selStart.coords({row:n,col:t}),e.listen(),typeof i=="undefined"?h.setRangeEnd({row:n,col:t},u):h.setRangeEnd({row:i,col:r},u),e.selection.finish(),!0)};this.selectCellByProp=function(){return arguments[1]=o.propToCol(arguments[1]),typeof arguments[3]!="undefined"&&(arguments[3]=o.propToCol(arguments[3])),e.selectCell.apply(e,arguments)};this.deselectCell=function(){h.deselect()};this.destroy=function(){e.clearTimeouts();e.view&&e.view.wt.destroy();e.rootElement.empty();e.rootElement.removeData("handsontable");e.rootElement.off(".handsontable");n(t).off("."+e.guid);n(document.documentElement).off("."+e.guid);i.PluginHooks.run(e,"afterDestroy")};this.timeouts={};this.registerTimeout=function(n,t,i){clearTimeout(this.timeouts[n]);this.timeouts[n]=setTimeout(t,i||0)};this.clearTimeouts=function(){for(var n in this.timeouts)this.timeouts.hasOwnProperty(n)&&clearTimeout(this.timeouts[n])};this.version="0.8.23"};ht={data:void 0,width:void 0,height:void 0,startRows:5,startCols:5,minRows:0,minCols:0,maxRows:Infinity,maxCols:Infinity,minSpareRows:0,minSpareCols:0,multiSelect:!0,fillHandle:!0,undo:!0,outsideClickDeselects:!0,enterBeginsEditing:!0,enterMoves:{row:1,col:0},tabMoves:{row:0,col:1},autoWrapRow:!1,autoWrapCol:!1,copyRowsLimit:1e3,copyColsLimit:1e3,currentRowClassName:void 0,currentColClassName:void 0,stretchH:"hybrid",isEmptyRow:void 0,isEmptyCol:void 0,observeDOMVisibility:!0};n.fn.handsontable=function(t){var r,e,f,o=[],u;if(typeof t!="string")return u=t||{},this.each(function(){var f=n(this),e,t;if(f.data("handsontable"))t=f.data("handsontable"),t.updateSettings(u);else{e=n.extend(!0,{},ht);for(r in u)u.hasOwnProperty(r)&&(e[r]=u[r]);t=new i.Core(f,e);f.data("handsontable",t);t.init()}});if(f=[],arguments.length>1)for(r=1,e=arguments.length;r<e;r++)f.push(arguments[r]);return this.each(function(){var i=n(this).data("handsontable");i&&(o=i[t].apply(this,f))}),o};i.FocusCatcher=function(t){this.el=document.createElement("DIV");this.el.style.position="fixed";this.el.style.top="0";this.el.style.left="0";this.el.style.width="1px";this.el.style.height="1px";this.el.setAttribute("tabindex",1e4);t.rootElement.append(this.el);this.$el=n(this.el)};i.FocusCatcher.prototype.listen=function(){this.el.focus()};i.TableView=function(r){var u=this,a=n(t),c=n(document.documentElement),f,h,s,l,o;this.instance=r;this.settings=r.getSettings();this.settingsFromDOM=r.getSettingsFromDOM();r.rootElement.data("originalStyle",r.rootElement.attr("style"));r.rootElement.addClass("handsontable");f=document.createElement("TABLE");f.className="htCore";f.appendChild(document.createElement("THEAD"));f.appendChild(document.createElement("TBODY"));r.$table=n(f);r.rootElement.prepend(r.$table);c.on("keyup."+r.guid,function(n){r.selection.isInProgress()&&!n.shiftKey&&r.selection.finish()});c.on("mouseup."+r.guid,function(n){r.selection.isInProgress()&&n.which===1&&r.selection.finish();h=!1;clearInterval(s);s=null;r.autofill.handle&&r.autofill.handle.isDragged&&(r.autofill.handle.isDragged>1&&r.autofill.apply(),r.autofill.handle.isDragged=0)});c.on("mousedown."+r.guid,function(t){var i=t.target;if(i!==u.wt.wtTable.spreader)while(i!==null&&i!==document.documentElement){if(i===r.rootElement[0]||i.nodeName==="X-HANDSONTABLE"||i.id==="context-menu-layer"||n(i).is(".context-menu-list")||n(i).is(".typeahead li"))return;i=i.parentNode}u.settings.outsideClickDeselects?r.deselectCell():r.destroyEditor()});r.$table.on("selectstart",function(n){n.preventDefault()});r.$table.on("mouseenter",function(){s&&(clearInterval(s),s=null)});r.$table.on("mouseleave",function(n){if(h||r.autofill.handle&&r.autofill.handle.isDragged){var i=1,l=u.wt.wtDom.offset(f),a=l.top+i,v=l.left+i,y=u.containerWidth-u.wt.getSetting("scrollbarWidth")-2*i,p=u.containerHeight-u.wt.getSetting("scrollbarHeight")-2*i,t,e=0,o=0,c;n.pageY<a?(e=-1,t="scrollVertical"):n.pageY>=a+p?(e=1,t="scrollVertical"):n.pageX<v?(o=-1,t="scrollHorizontal"):n.pageX>=v+y&&(o=1,t="scrollHorizontal");t&&(c=function(){(h||r.autofill.handle&&r.autofill.handle.isDragged)&&u.wt[t](e+o).draw()},c(),s=setInterval(c,100))}});l=function(){t.getSelection?t.getSelection().empty?t.getSelection().empty():t.getSelection().removeAllRanges&&t.getSelection().removeAllRanges():document.selection&&document.selection.empty()};o={table:f,stretchH:this.settings.stretchH,data:r.getDataAtCell,totalRows:r.countRows,totalColumns:r.countCols,offsetRow:0,offsetColumn:0,width:this.getWidth(),height:this.getHeight(),fixedColumnsLeft:this.settings.fixedColumnsLeft,fixedRowsTop:this.settings.fixedRowsTop,rowHeaders:this.settings.rowHeaders?function(n,t){u.appendRowHeader(n,t)}:null,columnHeaders:this.settings.colHeaders?function(n,t){u.appendColHeader(n,t)}:null,columnWidth:r.getColWidth,cellRenderer:function(n,t,i){u.applyCellTypeMethod("renderer",i,n,t)},selections:{current:{className:"current",border:{width:2,color:"#5292F7",style:"solid",cornerVisible:function(){return u.settings.fillHandle&&!u.isCellEdited()&&!r.selection.isMultiple()}}},area:{className:"area",border:{width:1,color:"#89AFF9",style:"solid",cornerVisible:function(){return u.settings.fillHandle&&!u.isCellEdited()&&r.selection.isMultiple()}}},highlight:{highlightRowClassName:u.settings.currentRowClassName,highlightColumnClassName:u.settings.currentColClassName},fill:{className:"fill",border:{width:1,color:"red",style:"solid"}}},onCellMouseDown:function(n,t,i){h=!0;var f={row:t[0],col:t[1]};n.button===2&&r.selection.inInSelection(f)||(n.shiftKey?r.selection.setRangeEnd(f):r.selection.setRangeStart(f));n.preventDefault();l();u.settings.afterOnCellMouseDown&&u.settings.afterOnCellMouseDown.call(r,n,t,i);setTimeout(function(){r.listen()})},onCellMouseOver:function(n,t){var i={row:t[0],col:t[1]};h?r.selection.setRangeEnd(i):r.autofill.handle&&r.autofill.handle.isDragged&&(r.autofill.handle.isDragged++,r.autofill.showBorder(t))},onCellCornerMouseDown:function(n){r.autofill.handle.isDragged=1;n.preventDefault()},onCellCornerDblClick:function(){r.autofill.selectAdjacent()},beforeDraw:function(n){u.beforeRender(n)}};i.PluginHooks.run(r,"walkontableConfig",o);this.wt=new e(o);a.on("resize."+r.guid,function(){r.registerTimeout("resizeTimeout",function(){r.parseSettingsFromDOM();var n=u.getWidth(),t=u.getHeight();(o.width!==n||o.height!==t)&&(r.forceFullRender=!0,u.render(),o.width=n,o.height=t)},60)});n(u.wt.wtTable.spreader).on("mousedown.handsontable, contextmenu.handsontable",function(n){n.target===u.wt.wtTable.spreader&&n.which===3&&n.stopPropagation()});c.on("click."+r.guid,function(){u.settings.observeDOMVisibility&&u.wt.drawInterrupted&&(u.instance.forceFullRender=!0,u.render())})};i.TableView.prototype.isCellEdited=function(){return this.instance.textEditor&&this.instance.textEditor.isCellEdited||this.instance.autocompleteEditor&&this.instance.autocompleteEditor.isCellEdited||this.instance.handsontableEditor&&this.instance.handsontableEditor.isCellEdited};i.TableView.prototype.getWidth=function(){var n=this.settings.width!==void 0?this.settings.width:this.settingsFromDOM.width;return typeof n=="function"?n():n};i.TableView.prototype.getHeight=function(){var n=this.settings.height!==void 0?this.settings.height:this.settingsFromDOM.height;return typeof n=="function"?n():n};i.TableView.prototype.beforeRender=function(n){n&&(i.PluginHooks.run(this.instance,"beforeRender"),this.wt.update("width",this.getWidth()),this.wt.update("height",this.getHeight()))};i.TableView.prototype.render=function(){this.wt.draw(!this.instance.forceFullRender);this.instance.rootElement.triggerHandler("render.handsontable");this.instance.forceFullRender&&i.PluginHooks.run(this.instance,"afterRender");this.instance.forceFullRender=!1};i.TableView.prototype.applyCellTypeMethod=function(n,t,i,r){var f=this.instance.colToProp(r),u=this.instance.getCellMeta(i,r);if(u[n])return u[n](this.instance,t,i,r,f,this.instance.getDataAtRowProp(i,f),u)};i.TableView.prototype.getCellAtCoords=function(n){var t=this.wt.wtTable.getCell([n.row,n.col]);return t<0?null:t};i.TableView.prototype.scrollViewport=function(n){this.wt.scrollViewport([n.row,n.col])};i.TableView.prototype.appendRowHeader=function(n,t){this.wt.wtDom.avoidInnerHTML(t,this.instance.getRowHeader(n))};i.TableView.prototype.appendColHeader=function(n,t){var r=document.createElement("DIV"),u=document.createElement("SPAN");for(r.className="relative",u.className="colHeader",this.wt.wtDom.avoidInnerHTML(u,this.instance.getColHeader(n)),r.appendChild(u);t.firstChild;)t.removeChild(t.firstChild);t.appendChild(r);i.PluginHooks.run(this.instance,"afterGetColHeader",n,t)};i.helper.isPrintableChar=function(n){return n==32||n>=48&&n<=57||n>=96&&n<=111||n>=186&&n<=192||n>=219&&n<=222||n>=226||n>=65&&n<=90};i.helper.stringify=function(n){switch(typeof n){case"string":case"number":return n+"";case"object":return n===null?"":n.toString();case"undefined":return"";default:return n.toString()}};i.helper.spreadsheetColumnLabel=function(n){for(var t=n+1,i="",r;t>0;)r=(t-1)%26,i=String.fromCharCode(65+r)+i,t=parseInt((t-r)/26,10);return i};i.helper.isDescendant=function(n,t){for(var i=t.parentNode;i!=null;){if(i==n)return!0;i=i.parentNode}return!1};i.helper.randomString=function(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return n()+n()+n()+n()};i.helper.inherit=function(n,t){function i(){}return i.prototype=t.prototype,n.prototype=new i,n.prototype.constructor=n,n};i.UndoRedo=function(n){var t=this;this.instance=n;this.clear();n.rootElement.on("datachange.handsontable",function(n,i,r){r!=="undo"&&r!=="redo"&&t.add(i)})};i.UndoRedo.prototype.undo=function(){var t,r,i;if(this.isUndoAvailable()){for(i=n.extend(!0,[],this.data[this.rev]),t=0,r=i.length;t<r;t++)i[t].splice(3,1);this.instance.setDataAtRowProp(i,null,null,"undo");this.rev--}};i.UndoRedo.prototype.redo=function(){var t,r,i;if(this.isRedoAvailable()){for(this.rev++,i=n.extend(!0,[],this.data[this.rev]),t=0,r=i.length;t<r;t++)i[t].splice(2,1);this.instance.setDataAtRowProp(i,null,null,"redo")}};i.UndoRedo.prototype.isUndoAvailable=function(){return this.rev>=0};i.UndoRedo.prototype.isRedoAvailable=function(){return this.rev<this.data.length-1};i.UndoRedo.prototype.add=function(n){this.rev++;this.data.splice(this.rev);this.data.push(n)};i.UndoRedo.prototype.clear=function(){this.data=[];this.rev=-1};i.SelectionPoint=function(){this._row=null;this._col=null};i.SelectionPoint.prototype.exists=function(){return this._row!==null};i.SelectionPoint.prototype.row=function(n){return n!==void 0&&(this._row=n),this._row};i.SelectionPoint.prototype.col=function(n){return n!==void 0&&(this._col=n),this._col};i.SelectionPoint.prototype.coords=function(n){return n!==void 0&&(this._row=n.row,this._col=n.col),{row:this._row,col:this._col}};i.SelectionPoint.prototype.arr=function(n){return n!==void 0&&(this._row=n[0],this._col=n[1]),[this._row,this._col]};i.TextRenderer=function(n,t,r,u,f,e,o){var s=i.helper.stringify(e);s.match(/\n/)?(s=s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),t.innerHTML=s.replace(/\n/g,"<br/>")):(n.view.wt.wtDom.empty(t),t.appendChild(document.createTextNode(s)));o.readOnly&&(t.className="htDimmed")};i.AutocompleteRenderer=function(n,t,r,u,f,e,o){var s=document.createElement("DIV"),h;if(s.className="htAutocomplete",h=document.createElement("DIV"),h.className="htAutocompleteArrow",h.appendChild(document.createTextNode("")),!n.acArrowListener){n.acArrowListener=function(){n.view.wt.getSetting("onCellDblClick")};n.rootElement.on("mouseup",".htAutocompleteArrow",n.acArrowListener)}i.TextRenderer(n,s,r,u,f,e,o);s.firstChild||s.appendChild(document.createTextNode(" "));s.appendChild(h);n.view.wt.wtDom.empty(t);t.appendChild(s)};i.CheckboxRenderer=function(t,r,u,f,e,o,s){var h,c;if(typeof s.checkedTemplate=="undefined"&&(s.checkedTemplate=!0),typeof s.uncheckedTemplate=="undefined"&&(s.uncheckedTemplate=!1),t.view.wt.wtDom.empty(r),h=document.createElement("INPUT"),h.className="htCheckboxRendererInput",h.type="checkbox",h.setAttribute("autocomplete","off"),o===s.checkedTemplate||o===i.helper.stringify(s.checkedTemplate)?(h.checked=!0,r.appendChild(h)):o===s.uncheckedTemplate||o===i.helper.stringify(s.uncheckedTemplate)?r.appendChild(h):o===null?(h.className+=" noValue",r.appendChild(h)):r.appendChild(document.createTextNode("#bad value#")),c=n(h),s.readOnly)c.on("click",function(n){n.preventDefault()});else{c.on("mousedown",function(n){this.checked?t.setDataAtRowProp(u,e,s.uncheckedTemplate):t.setDataAtRowProp(u,e,s.checkedTemplate);n.stopPropagation()});c.on("mouseup",function(n){n.stopPropagation()})}return r};i.NumericRenderer=function(n,t,r,u,f,e,o){typeof e=="number"?(typeof o.language!="undefined"&&numeral.language(o.language),n.view.wt.wtDom.empty(t),t.className="htNumeric",t.appendChild(document.createTextNode(numeral(e).format(o.format||"0")))):i.TextRenderer(n,t,r,u,f,e,o)};r.prototype.createElements=function(){this.wtDom=new f;this.TEXTAREA=document.createElement("TEXTAREA");this.TEXTAREA.className="handsontableInput";this.textareaStyle=this.TEXTAREA.style;this.textareaStyle.width=0;this.textareaStyle.height=0;this.$textarea=n(this.TEXTAREA);this.TEXTAREA_PARENT=document.createElement("DIV");this.TEXTAREA_PARENT.className="handsontableInputHolder";this.textareaParentStyle=this.TEXTAREA_PARENT.style;this.textareaParentStyle.top=0;this.textareaParentStyle.left=0;this.textareaParentStyle.display="none";this.$textareaParent=n(this.TEXTAREA_PARENT);this.TEXTAREA_PARENT.appendChild(this.TEXTAREA);this.instance.rootElement[0].appendChild(this.TEXTAREA_PARENT);var t=this;i.PluginHooks.push("afterRender",function(){t.instance.registerTimeout("refresh_editor_dimensions",function(){t.refreshDimensions()},0)})};r.prototype.bindEvents=function(){var n=this;this.$textareaParent.off(".editor").on("keydown.editor",function(t){var u=(t.ctrlKey||t.metaKey)&&!t.altKey,i,r;if(t.keyCode===17||t.keyCode===224||t.keyCode===91||t.keyCode===93){t.stopImmediatePropagation();return}switch(t.keyCode){case 38:case 40:n.finishEditing(!1);break;case 9:n.finishEditing(!1);t.preventDefault();break;case 39:n.getCaretPosition(n.TEXTAREA)===n.TEXTAREA.value.length?n.finishEditing(!1):t.stopImmediatePropagation();break;case 37:n.getCaretPosition(n.TEXTAREA)===0?n.finishEditing(!1):t.stopImmediatePropagation();break;case 27:n.instance.destroyEditor(!0);t.stopImmediatePropagation();break;case 13:i=n.instance.getSelected();r=!(i[0]===i[2]&&i[1]===i[3]);t.ctrlKey&&!r||t.altKey?(n.TEXTAREA.value=n.TEXTAREA.value+"\n",n.TEXTAREA.focus(),t.stopImmediatePropagation()):n.finishEditing(!1,u);t.preventDefault();break;default:t.stopImmediatePropagation()}})};r.prototype.bindTemporaryEvents=function(n,t,r,u,f,e){function s(){o.beginEditing(t,r,u,!0)}this.TD=n;this.row=t;this.col=r;this.prop=u;this.originalValue=f;this.cellProperties=e;var o=this;this.instance.focusCatcher.$el.on("keydown.editor",function(n){var e=(n.ctrlKey||n.metaKey)&&!n.altKey,f,s;o.isCellEdited||(i.helper.isPrintableChar(n.keyCode)?e||o.beginEditing(t,r,u):n.keyCode===113?(o.beginEditing(t,r,u,!0),n.stopImmediatePropagation(),n.preventDefault()):n.keyCode===13&&o.instance.getSettings().enterBeginsEditing&&(f=o.instance.getSelected(),s=!(f[0]===f[2]&&f[1]===f[3]),e&&!s||n.altKey?o.beginEditing(t,r,u,!0,"\n"):o.beginEditing(t,r,u,!0),n.preventDefault(),n.stopImmediatePropagation()))});this.instance.view.wt.update("onCellDblClick",s)};r.prototype.unbindTemporaryEvents=function(){this.instance.focusCatcher.$el.off(".editor");this.instance.view.wt.update("onCellDblClick",null)};r.prototype.getCaretPosition=function(n){var i,t,r;return n.selectionStart?n.selectionStart:document.selection?(n.focus(),i=document.selection.createRange(),i==null)?0:(t=n.createTextRange(),r=t.duplicate(),t.moveToBookmark(i.getBookmark()),r.setEndPoint("EndToStart",t),r.text.length):0};r.prototype.setCaretPosition=function(n,t){if(n.setSelectionRange)n.focus(),n.setSelectionRange(t,t);else if(n.createTextRange){var i=n.createTextRange();i.collapse(!0);i.moveEnd("character",t);i.moveStart("character",t);i.select()}};r.prototype.beginEditing=function(n,t,r,u,f){if(!this.isCellEdited){this.isCellEdited=!0;this.row=n;this.col=t;this.prop=r;var e={row:n,col:t};this.instance.view.scrollViewport(e);this.instance.view.render();this.$textarea.on("cut.editor",function(n){n.stopPropagation()});this.$textarea.on("paste.editor",function(n){n.stopPropagation()});this.TEXTAREA.value=u?i.helper.stringify(this.originalValue)+(f||""):"";this.refreshDimensions();this.TEXTAREA.focus();this.setCaretPosition(this.TEXTAREA,this.TEXTAREA.value.length)}};r.prototype.refreshDimensions=function(){var u,f;if(this.isCellEdited){this.TD=this.instance.getCell(this.row,this.col);var t=n(this.TD),e=this.wtDom.offset(this.TD),o=this.wtDom.offset(this.instance.rootElement[0]),c=this.instance.rootElement.scrollTop(),l=this.instance.rootElement.scrollLeft(),i=e.top-o.top+c-1,r=e.left-o.left+l-1,s=this.instance.getSettings(),h=s.rowHeaders===!1?0:1,a=s.colHeaders===!1?0:1;i<0&&(i=0);r<0&&(r=0);h>0&&parseInt(t.css("border-top-width"),10)>0&&(i+=1);a>0&&parseInt(t.css("border-left-width"),10)>0&&(r+=1);n.browser.msie&&parseInt(n.browser.version,10)<=7&&(i-=1);this.textareaParentStyle.top=i+"px";this.textareaParentStyle.left=r+"px";u=t.width();f=t.outerHeight()-4;parseInt(t.css("border-top-width"),10)>0&&(f-=1);parseInt(t.css("border-left-width"),10)>0&&h>0&&(u-=1);this.$textarea.autoResize({maxHeight:200,minHeight:f,minWidth:u,maxWidth:Math.max(168,u),animate:!1,extraSpace:0});this.textareaParentStyle.display="block"}};r.prototype.finishEditing=function(t,i){var u,r;this.isCellEdited&&(this.isCellEdited=!1,t||(u=[[n.trim(this.TEXTAREA.value)]],i?(r=this.instance.getSelected(),this.instance.populateFromArray({row:r[0],col:r[1]},u,{row:r[2],col:r[3]},"edit")):this.instance.populateFromArray({row:this.row,col:this.col},u,null,"edit")));this.unbindTemporaryEvents();document.activeElement===this.TEXTAREA&&this.instance.listen();this.textareaParentStyle.display="none"};i.TextEditor=function(n,t,i,u,f,e,o){return n.textEditor||(n.textEditor=new r(n)),n.textEditor.bindTemporaryEvents(t,i,u,f,e,o),function(t){n.textEditor.finishEditing(t)}};i.helper.inherit(c,r);c.prototype.createElements=function(){r.prototype.createElements.call(this);this.$textarea.typeahead();this.typeahead=this.$textarea.data("typeahead");this.typeahead._render=this.typeahead.render;this.typeahead.minLength=0;this.typeahead.lookup=function(){var t;return this.query=this.$element.val(),t=n.isFunction(this.source)?this.source(this.query,n.proxy(this.process,this)):this.source,t?this.process(t):this};this.typeahead.matcher=function(){return!0};var t=this.typeahead.process,i=this;this.typeahead.process=function(r){for(var f=!1,u=0,e=r.length;u<e;u++)r[u]===""&&(f||(r=n.extend([],r),f=!0),r[u]=i.emptyStringLabel);return t.call(this,r)}};c.prototype.bindEvents=function(){var n=this;this.$textarea.off("keydown").off("keyup").off("keypress");this.$textareaParent.off(".acEditor").on("keydown.acEditor",function(t){switch(t.keyCode){case 38:n.typeahead.prev();t.stopImmediatePropagation();break;case 40:n.typeahead.next();t.stopImmediatePropagation();break;case 13:t.preventDefault()}});this.$textareaParent.on("keyup.acEditor",function(t){(i.helper.isPrintableChar(t.keyCode)||t.keyCode===113||t.keyCode===13||t.keyCode===8||t.keyCode===46)&&n.typeahead.lookup()});r.prototype.bindEvents.call(this)};c.prototype.bindTemporaryEvents=function(n,t,i,u,f,e){function c(){o.beginEditing(t,i,u,!0);o.instance.registerTimeout("IE9_align_fix",function(){o.typeahead.lookup()},1)}var o=this,s,h;this.typeahead.select=function(){var r=this.hide(),n;if(o.instance.destroyEditor(!0),n=this.$menu.find(".active").attr("data-value"),n===o.emptyStringLabel&&(n=""),typeof e.onSelect=="function")e.onSelect(t,i,u,n,this.$menu.find(".active").index());else o.instance.setDataAtRowProp(t,u,n);return r};this.typeahead.render=function(n){return o.typeahead._render.call(this,n),e.strict||this.$menu.find("li:eq(0)").removeClass("active"),this};for(s in e)if(e.hasOwnProperty(s))if(s==="options")for(h in e.options)e.options.hasOwnProperty(h)&&(this.typeahead.options[h]=e.options[h]);else this.typeahead[s]=e[s];r.prototype.bindTemporaryEvents.call(this,n,t,i,u,f,e);this.instance.view.wt.update("onCellDblClick",c)};c.prototype.finishEditing=function(n,t){n||(this.isMenuExpanded()&&this.typeahead.$menu.find(".active").length?(this.typeahead.select(),this.isCellEdited=!1):this.cellProperties.strict&&(this.isCellEdited=!1));r.prototype.finishEditing.call(this,n,t)};c.prototype.isMenuExpanded=function(){return this.typeahead.$menu.is(":visible")?this.typeahead:!1};i.AutocompleteEditor=function(n,t,i,r,u,f,e){return n.autocompleteEditor||(n.autocompleteEditor=new c(n)),n.autocompleteEditor.bindTemporaryEvents(t,i,r,u,f,e),function(t){n.autocompleteEditor.finishEditing(t)}};i.CheckboxEditor=function(n,t,r,u,f,e,o){typeof o=="undefined"&&(o={});typeof o.checkedTemplate=="undefined"&&(o.checkedTemplate=!0);typeof o.uncheckedTemplate=="undefined"&&(o.uncheckedTemplate=!1);n.$table.on("keydown.editor",function(t){var u=(t.ctrlKey||t.metaKey)&&!t.altKey;!u&&i.helper.isPrintableChar(t.keyCode)&&(ct(n,r,f,o),t.stopImmediatePropagation(),t.preventDefault())});return n.view.wt.update("onCellDblClick",function(){ct(n,r,f,o)}),function(){n.$table.off(".editor");n.view.wt.update("onCellDblClick",null)}};i.helper.inherit(l,r);l.prototype.createElements=function(){r.prototype.createElements.call(this);this.datePicker=document.createElement("DIV");this.datePickerStyle=this.datePicker.style;this.datePickerStyle.position="absolute";this.datePickerStyle.top=0;this.datePickerStyle.left=0;this.datePickerStyle.zIndex=99;this.instance.rootElement[0].appendChild(this.datePicker);this.$datePicker=n(this.datePicker);var t=this,i={dateFormat:"yy-mm-dd",showButtonPanel:!0,changeMonth:!0,changeYear:!0,altField:this.$textarea,onSelect:function(){t.finishEditing(!1)}};this.$datePicker.datepicker(i);this.hideDatepicker()};l.prototype.beginEditing=function(n,t,i,u,f){r.prototype.beginEditing.call(this,n,t,i,u,f);this.showDatepicker()};l.prototype.finishEditing=function(n,t){this.hideDatepicker();r.prototype.finishEditing.call(this,n,t)};l.prototype.showDatepicker=function(){var i=n(this.instance.dateEditor.TD),r=i.position(),t;this.datePickerStyle.top=r.top+i.height()+"px";this.datePickerStyle.left=r.left+"px";t={defaultDate:this.originalValue||void 0};n.extend(t,this.cellProperties);this.$datePicker.datepicker("option",t);this.originalValue&&this.$datePicker.datepicker("setDate",this.originalValue);this.datePickerStyle.display="block"};l.prototype.hideDatepicker=function(){this.datePickerStyle.display="none"};i.DateEditor=function(n,t,i,r,u,f,e){return n.dateEditor||(n.dateEditor=new l(n)),n.dateEditor.bindTemporaryEvents(t,i,r,u,f,e),function(t){n.dateEditor.finishEditing(t)}};i.helper.inherit(a,r);a.prototype.createElements=function(){r.prototype.createElements.call(this);var t=document.createElement("DIV");t.className="handsontableEditor";this.TEXTAREA_PARENT.appendChild(t);this.$htContainer=n(t)};a.prototype.bindTemporaryEvents=function(t,i,u,f,e,o){var s=this,h={colHeaders:!0,cells:function(){return{readOnly:!0}},fillHandle:!1,width:2e3,afterOnCellMouseDown:function(){var n=this.getSelected();s.TEXTAREA.value=this.getDataAtCell(n[0],n[1]);s.instance.destroyEditor()},beforeOnKeyDown:function(n){switch(n.keyCode){case 27:s.instance.destroyEditor(!0);break;case 13:var t=this.getSelected();s.TEXTAREA.value=this.getDataAtCell(t[0],t[1]);s.instance.destroyEditor()}}};o.handsontable&&(h=n.extend(h,o.handsontable));this.$htContainer.handsontable(h);r.prototype.bindTemporaryEvents.call(this,t,i,u,f,e,o)};a.prototype.beginEditing=function(n,t,i,u,f){var e=this.instance.getSettings().onBeginEditing;e&&e()===!1||(r.prototype.beginEditing.call(this,n,t,i,u,f),this.$htContainer.handsontable("render"),this.$htContainer.handsontable("selectCell",0,0))};a.prototype.finishEditing=function(n,t){if(i.helper.isDescendant(this.instance.rootElement[0],document.activeElement)){var u=this;setTimeout(function(){u.instance.listen()},0);u.instance.listen()}this.$htContainer.handsontable("destroy");r.prototype.finishEditing.call(this,n,t)};a.prototype.isMenuExpanded=function(){return this.typeahead.$menu.is(":visible")?this.typeahead:!1};i.HandsontableEditor=function(n,t,i,r,u,f,e){return n.handsontableEditor||(n.handsontableEditor=new a(n)),n.handsontableEditor.bindTemporaryEvents(t,i,r,u,f,e),n.registerEditor=n.handsontableEditor,function(t){n.handsontableEditor.finishEditing(t)}};i.AutocompleteCell={renderer:i.AutocompleteRenderer,editor:i.AutocompleteEditor};i.CheckboxCell={renderer:i.CheckboxRenderer,editor:i.CheckboxEditor};i.TextCell={renderer:i.TextRenderer,editor:i.TextEditor};i.NumericCell={renderer:i.NumericRenderer,editor:i.TextEditor,dataType:"number"};i.DateCell={renderer:i.AutocompleteRenderer,editor:i.DateEditor};i.HandsontableCell={renderer:i.AutocompleteRenderer,editor:i.HandsontableEditor};i.cellTypes={autocomplete:i.AutocompleteCell,checkbox:i.CheckboxCell,text:i.TextCell,numeric:i.NumericCell,date:i.DateCell,handsontable:i.HandsontableCell};i.PluginHooks={hooks:{beforeInit:[],afterInit:[],afterLoadData:[],beforeRender:[],afterRender:[],beforeGet:[],beforeSet:[],beforeGetCellMeta:[],afterGetCellMeta:[],afterGetColHeader:[],afterGetColWidth:[],walkontableConfig:[],afterDestroy:[]},push:function(n,t){this.hooks[n].push(t)},unshift:function(n,t){this.hooks[n].unshift(t)},run:function(n,t,i,r,u,f,e){for(var o=0,s=this.hooks[t].length;o<s;o++)this.hooks[t][o].call(n,i,r,u,f,e)}};i.PluginModifiers={modifiers:{col:[]},push:function(n,t){this.modifiers[n].push(t)},unshift:function(n,t){this.modifiers[n].unshift(t)},run:function(n,t,i,r,u,f,e){for(var o=0,s=this.modifiers[t].length;o<s;o++)i=this.modifiers[t][o].call(n,i,r,u,f,e);return i}};k=new yt;i.PluginHooks.push("beforeInit",k.beforeInit);i.PluginHooks.push("beforeRender",k.determineColumnsWidth);i.PluginHooks.push("afterGetColWidth",k.getColWidth);d=new pt;i.PluginHooks.push("afterInit",d.afterInit);i.PluginHooks.push("beforeGet",d.translateRow);i.PluginHooks.push("beforeSet",d.translateRow);i.PluginHooks.push("afterGetColHeader",d.getColHeader);i.PluginHooks.push("afterInit",wt);i.PluginHooks.push("afterDestroy",bt);i.PluginHooks.push("beforeGetCellMeta",function(n,t,r){var f=this.getSettings(),s=this.getData(),u,o,e;if(f.autoComplete)for(u=0,o=f.autoComplete.length;u<o;u++)if(f.autoComplete[u].match(n,t,s)){typeof r.type=="undefined"?r.type=i.AutocompleteCell:(typeof r.type.renderer=="undefined"&&(r.type.renderer=i.AutocompleteCell.renderer),typeof r.type.editor=="undefined"&&(r.type.editor=i.AutocompleteCell.editor));for(e in f.autoComplete[u])f.autoComplete[u].hasOwnProperty(e)&&e!=="match"&&typeof r[u]=="undefined"&&(r[e]=e==="source"?f.autoComplete[u][e](n,t):f.autoComplete[u][e]);break}});g=new kt;i.PluginHooks.push("beforeInit",g.beforeInit);i.PluginHooks.push("afterInit",g.afterInit);i.PluginHooks.push("afterGetColHeader",g.getColHeader);i.PluginModifiers.push("col",g.modifyCol);nt=new dt;i.PluginHooks.push("beforeInit",nt.beforeInit);i.PluginHooks.push("afterInit",nt.afterInit);i.PluginHooks.push("afterGetColHeader",nt.getColHeader);i.PluginHooks.push("afterGetColWidth",nt.getColWidth),function(n){function t(r){return this.filter(t.resizableFilterSelector).each(function(){new i(n(this),r)}),this}function i(i,r){this.clones||(this.config=n.extend({},t.defaults,r),this.el=i,this.nodeName=i[0].nodeName.toLowerCase(),this.previousScrollTop=null,r.maxWidth==="original"&&(r.maxWidth=i.width()),r.minWidth==="original"&&(r.minWidth=i.width()),r.maxHeight==="original"&&(r.maxHeight=i.height()),r.minHeight==="original"&&(r.minHeight=i.height()),this.nodeName==="textarea"&&i.css({resize:"none",overflowY:"hidden"}),i.data("AutoResizer",this),this.createClone(),this.injectClone(),this.bind())}t.defaults={onResize:function(){},animate:{duration:200,complete:function(){}},extraSpace:50,minHeight:"original",maxHeight:500,minWidth:"original",maxWidth:500};t.cloneCSSProperties=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","padding"];t.cloneCSSValues={position:"absolute",top:-9999,left:-9999,opacity:0,overflow:"hidden",border:"1px solid black",padding:"0.49em"};t.resizableFilterSelector="textarea,input:not(input[type]),input[type=text],input[type=password]";t.AutoResizer=i;n.fn.autoResize=t;i.prototype={bind:function(){var t=n.proxy(function(){return this.check(),!0},this);this.unbind();this.el.bind("keyup.autoResize",t).bind("change.autoResize",t);this.check(null,!0)},unbind:function(){this.el.unbind(".autoResize")},createClone:function(){var r=this.el,u=this,i=this.config;this.clones=n();(i.minHeight!=="original"||i.maxHeight!=="original")&&(this.hClone=r.clone().height("auto"),this.clones=this.clones.add(this.hClone));(i.minWidth!=="original"||i.maxWidth!=="original")&&(this.wClone=n("<div/>").width("auto").css({whiteSpace:"nowrap",float:"left"}),this.clones=this.clones.add(this.wClone));n.each(t.cloneCSSProperties,function(n,t){u.clones.css(t,r.css(t))});this.clones.removeAttr("name").removeAttr("id").attr("tabIndex",-1).css(t.cloneCSSValues)},check:function(n,t){var i=this.config,o=this.wClone,e=this.hClone,r=this.el,s=r.val(),f;if(o){o.text(s);var h=o.outerWidth(),u=h+i.extraSpace>=i.minWidth?h+i.extraSpace:i.minWidth,c=r.width();u=Math.min(u,i.maxWidth);(u<c&&u>=i.minWidth||u>=i.minWidth&&u<=i.maxWidth)&&(i.onResize.call(r),r.scrollLeft(0),i.animate&&!t?r.stop(1,1).animate({width:u},i.animate):r.width(u))}if(e){if(u&&e.width(u),e.height(0).val(s).scrollTop(1e4),f=e[0].scrollTop+i.extraSpace,this.previousScrollTop===f)return;if(this.previousScrollTop=f,f>=i.maxHeight){r.css("overflowY","");return}r.css("overflowY","hidden");f<i.minHeight&&(f=i.minHeight);i.onResize.call(r);i.animate&&!t?r.stop(1,1).animate({height:f},i.animate):r.height(f)}},destroy:function(){this.unbind();this.el.removeData("AutoResizer");this.clones.remove();delete this.el;delete this.hClone;delete this.wClone;delete this.clones},injectClone:function(){(t.cloneContainer||(t.cloneContainer=n("<arclones/>").appendTo("body"))).empty().append(this.clones)}}}(jQuery),function(n){function t(n){return n.split('"').length-1}n.SheetClip={parse:function(n){var r,c,i,u=[],f=0,e,h,o,s;for(i=n.split("\n"),i.length>1&&i[i.length-1]===""&&i.pop(),r=0,c=i.length;r<c;r+=1){for(i[r]=i[r].split("\t"),e=0,h=i[r].length;e<h;e+=1)u[f]||(u[f]=[]),o&&e===0?(s=u[f].length-1,u[f][s]=u[f][s]+"\n"+i[r][0],o&&t(i[r][0])&1&&(o=!1,u[f][s]=u[f][s].substring(0,u[f][s].length-1).replace(/""/g,'"'))):e===h-1&&i[r][e].indexOf('"')===0?(u[f].push(i[r][e].substring(1).replace(/""/g,'"')),o=!0):(u[f].push(i[r][e].replace(/""/g,'"')),o=!1);o||(f+=1)}return u},stringify:function(n){for(var r,e,u="",t,i=0,f=n.length;i<f;i+=1){for(r=0,e=n[i].length;r<e;r+=1)r>0&&(u+="\t"),t=n[i][r],u+=typeof t=="string"?t.indexOf("\n")>-1?'"'+t.replace(/"/g,'""')+'"':t:t===null||t===void 0?"":t;u+="\n"}return u}}}(t);s.prototype.selectNodeText=function(n){n.select()};s.prototype.copyable=function(n){if(typeof n!="string"&&n.toString===void 0)throw new Error("copyable requires string parameter");this.elTextarea.value=n};s.prototype.onCopy=function(n){this.copyCallback=n};s.prototype.onCut=function(n){this.cutCallback=n};s.prototype.onPaste=function(n){this.pasteCallback=n};s.prototype.triggerCut=function(n){var t=this;t.cutCallback&&setTimeout(function(){t.cutCallback(n)},0)};s.prototype.triggerPaste=function(n,t){var i=this;i.pasteCallback&&setTimeout(function(){i.pasteCallback((t||i.elTextarea.value).replace(/\n$/,""),n)},0)};s.prototype._bindEvent=function(){return document.addEventListener?function(n,t,i){n.addEventListener(t,i,!1)}:function(n,i,r){n.attachEvent("on"+i,function(){var i=t.event;return i.target=i.srcElement,i.relatedTarget=i.relatedTarget||i.type=="mouseover"?i.fromElement:i.toElement,i.target.nodeType===3&&(i.target=i.target.parentNode),r.call(n,i)})}}();rt.prototype.appear=function(t){var b,c,l,a,k,d,f,g,e,nt,o,s,ft;if(!this.disabled){var u=this.instance,v,y,tt,it,rt=!1,ut=!1,p=!1,w=!1,i,h,r;for(u.wtTable.isRowInViewport(t[0])||(rt=!0),u.wtTable.isRowInViewport(t[2])||(p=!0),h=u.wtTable.countVisibleRows(),i=0;i<h;i++)if(r=u.wtTable.rowFilter.visibleToSource(i),r>=t[0]&&r<=t[2]){v=r;break}for(i=h-1;i>=0;i--)if(r=u.wtTable.rowFilter.visibleToSource(i),r>=t[0]&&r<=t[2]){tt=r;break}if(rt&&p)ut=!0,w=!0;else{for(u.wtTable.isColumnInViewport(t[1])||(ut=!0),u.wtTable.isColumnInViewport(t[3])||(w=!0),h=u.wtTable.countVisibleColumns(),i=0;i<h;i++)if(r=u.wtTable.columnFilter.visibleToSource(i),r>=t[1]&&r<=t[3]){y=r;break}for(i=h-1;i>=0;i--)if(r=u.wtTable.columnFilter.visibleToSource(i),r>=t[1]&&r<=t[3]){it=r;break}}if(v!==void 0&&y!==void 0)b=v!==tt||y!==it,c=n(u.wtTable.getCell([v,y])),l=b?n(u.wtTable.getCell([tt,it])):c,a=this.wtDom.offset(c[0]),k=b?this.wtDom.offset(l[0]):a,d=this.wtDom.offset(u.wtTable.TABLE),g=a.top,o=k.top+l.outerHeight()-g,nt=a.left,s=k.left+l.outerWidth()-nt,f=g-d.top-1,e=nt-d.left-1,parseInt(c.css("border-top-width"),10)>0&&(f+=1,o-=1),parseInt(c.css("border-left-width"),10)>0&&(e+=1,s-=1);else{this.disappear();return}rt?this.topStyle.display="none":(this.topStyle.top=f+"px",this.topStyle.left=e+"px",this.topStyle.width=s+"px",this.topStyle.display="block");ut?this.leftStyle.display="none":(this.leftStyle.top=f+"px",this.leftStyle.left=e+"px",this.leftStyle.height=o+"px",this.leftStyle.display="block");ft=Math.floor(this.settings.border.width/2);p?this.bottomStyle.display="none":(this.bottomStyle.top=f+o-ft+"px",this.bottomStyle.left=e+"px",this.bottomStyle.width=s+"px",this.bottomStyle.display="block");w?this.rightStyle.display="none":(this.rightStyle.top=f+"px",this.rightStyle.left=e+s-ft+"px",this.rightStyle.height=o+1+"px",this.rightStyle.display="block");p||w||!this.hasSetting(this.settings.border.cornerVisible)?this.cornerStyle.display="none":(this.cornerStyle.top=f+o-4+"px",this.cornerStyle.left=e+s-4+"px",this.cornerStyle.display="block")}};rt.prototype.disappear=function(){this.topStyle.display="none";this.leftStyle.display="none";this.bottomStyle.display="none";this.rightStyle.display="none";this.cornerStyle.display="none"};rt.prototype.hasSetting=function(n){return typeof n=="function"?n():!!n};h.prototype.source=function(n){return n};h.prototype.offsetted=function(n){return n+this.offset};h.prototype.unOffsetted=function(n){return n-this.offset};h.prototype.fixed=function(n){return n<this.fixedCount?n-this.offset:n};h.prototype.unFixed=function(n){return n<this.fixedCount?n+this.offset:n};h.prototype.visibleToSource=function(n){return this.source(this.offsetted(this.fixed(n)))};h.prototype.sourceToVisible=function(n){return this.source(this.unOffsetted(this.unFixed(n)))};tt.prototype.add=function(n,t,i){this.cache[n]||(this.cache[n]=[]);this.cache[n][t]||(this.cache[n][t]=[]);this.cache[n][t][i]=!0};tt.prototype.test=function(n,t,i){return this.cache[n]&&this.cache[n][t]&&this.cache[n][t][i]};v.prototype=new h;v.prototype.readSettings=function(n){this.offset=n.wtSettings.settings.offsetColumn;this.total=n.getSetting("totalColumns");this.fixedCount=n.getSetting("fixedColumnsLeft");this.countTH=n.hasSetting("rowHeaders")?1:0};v.prototype.offsettedTH=function(n){return n-this.countTH};v.prototype.unOffsettedTH=function(n){return n+this.countTH};v.prototype.visibleRowHeadedColumnToSourceColumn=function(n){return this.visibleToSource(this.offsettedTH(n))};v.prototype.sourceColumnToVisibleRowHeadedColumn=function(n){return this.unOffsettedTH(this.sourceToVisible(n))};et.prototype.getContainerSize=function(n){var t=typeof this.containerSizeFn=="function"?this.containerSizeFn(n):this.containerSizeFn;return(t===void 0||t===null||t<1)&&(t=Infinity),t};et.prototype.getSize=function(n){return this.cellSizes[n]};e.prototype.isVisible=function(){for(var n=this.wtTable.TABLE;n!==document.documentElement;){if(n===null||n.style.display==="none"||this.wtTable.TABLE.parentNode.clientWidth===0)return!1;n=n.parentNode}return!0};e.prototype.draw=function(n){if(this.drawInterrupted=!1,!n&&!this.isVisible()){this.drawInterrupted=!0;return}return this.getSetting("beforeDraw",!n),n=n&&this.getSetting("offsetRow")===this.lastOffsetRow&&this.getSetting("offsetColumn")===this.lastOffsetColumn,this.drawn&&(this.scrollVertical(0),this.scrollHorizontal(0)),this.lastOffsetRow=this.getSetting("offsetRow"),this.lastOffsetColumn=this.getSetting("offsetColumn"),this.wtTable.draw(n),this.getSetting("onDraw"),this};e.prototype.update=function(n,t){return this.wtSettings.update(n,t)};e.prototype.scrollVertical=function(n){return this.wtScroll.scrollVertical(n)};e.prototype.scrollHorizontal=function(n){return this.wtScroll.scrollHorizontal(n)};e.prototype.scrollViewport=function(n){return this.wtScroll.scrollViewport(n),this};e.prototype.getViewport=function(){return[this.wtTable.rowFilter.visibleToSource(0),this.wtTable.columnFilter.visibleToSource(0),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]};e.prototype.getSetting=function(n,t,i,r){return this.wtSettings.getSetting(n,t,i,r)};e.prototype.hasSetting=function(n){return this.wtSettings.has(n)};e.prototype.destroy=function(){clearTimeout(this.wheelTimeout);clearTimeout(this.dblClickTimeout)};f.prototype.closest=function(n,t){while(n!=null){if(n.nodeType===1&&t.indexOf(n.nodeName)>-1)return n;n=n.parentNode}return null};f.prototype.prevSiblings=function(n){for(var t=[];(n=n.previousSibling)!=null;)n.nodeType===1&&t.push(n);return t};document.documentElement.classList?(f.prototype.hasClass=function(n,t){return n.classList.contains(t)},f.prototype.addClass=function(n,t){n.classList.add(t)},f.prototype.removeClass=function(n,t){n.classList.remove(t)}):(f.prototype.hasClass=function(n,t){return n.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},f.prototype.addClass=function(n,t){this.hasClass(n,t)||(n.className+=" "+t)},f.prototype.removeClass=function(n,t){if(this.hasClass(n,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");n.className=n.className.replace(i," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}});f.prototype.removeTextNodes=function(n,t){var r,i;if(n.nodeType===3)t.removeChild(n);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(n.nodeName)>-1)for(r=n.childNodes,i=r.length-1;i>=0;i--)this.removeTextNodes(r[i],n)};f.prototype.empty=function(n){for(var t;t=n.lastChild;)n.removeChild(t)};f.prototype.avoidInnerHTML=function(n,t){if(/(<(.*)>|&(.*);)/g.test(t))n.innerHTML=t;else{for(var i;i=n.lastChild;)n.removeChild(i);n.appendChild(document.createTextNode(t))}};f.prototype.offset=function(n){for(var t=n.offsetLeft,i=n.offsetTop;n=n.offsetParent;)t+=n.offsetLeft,i+=n.offsetTop;return{left:t,top:i}};lt.prototype.parentCell=function(n){var t={};return t.TD=this.wtDom.closest(n,["TD","TH"]),t.TD?t.coords=this.instance.wtTable.getCoords(t.TD):!t.TD&&this.wtDom.hasClass(n,"wtBorder")&&this.wtDom.hasClass(n,"current")&&!this.wtDom.hasClass(n,"corner")&&(t.coords=this.instance.selections.current.selected[0],t.TD=this.instance.wtTable.getCell(t.coords)),t};Array.prototype.indexOf||(Array.prototype.indexOf=function(n){var i=this.length>>>0,t=Number(arguments[1])||0;for(t=t<0?Math.ceil(t):Math.floor(t),t<0&&(t+=i);t<i;t++)if(t in this&&this[t]===n)return t;return-1});t.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(n){return t.setTimeout(n,1e3/60)}}();t.cancelRequestAnimFrame=function(){return t.cancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||clearTimeout}();t.getComputedStyle||function(){var n,i={getPropertyValue:function(t){return t=="float"&&(t="styleFloat"),n.currentStyle[t.toUpperCase()]||null}};t.getComputedStyle=function(t){return n=t,i}}();ot.prototype=new h;ot.prototype.readSettings=function(n){this.offset=n.wtSettings.settings.offsetRow;this.total=n.getSetting("totalRows");this.fixedCount=n.getSetting("fixedRowsTop")};w.prototype.refreshScrollbars=function(){this.wtScrollbarH.readSettings();this.wtScrollbarV.readSettings();this.wtScrollbarH.prepare();this.wtScrollbarV.prepare();this.wtScrollbarH.refresh();this.wtScrollbarV.refresh()};w.prototype.scrollVertical=function(n){var i,o,s,f;if(!this.instance.drawn)throw new Error("scrollVertical can only be called after table was drawn to DOM");var t=this.instance,r=t.getSetting("offsetRow"),e=t.getSetting("fixedRowsTop"),h=t.getSetting("totalRows"),u=t.getSetting("height")||Infinity;return u!==Infinity&&(i=t.wtTable.TBODY.firstChild.firstChild,i.nodeName==="TH"&&(i=i.nextSibling),o=t.wtDom.offset(i),s=t.wtTable.tableOffset,u-=o.top-s.top,u-=t.getSetting("scrollbarHeight")),f=this.scrollLogic(n,r,h,e,u,function(n){return n-r<e?t.getSetting("rowHeight",n-r):t.getSetting("rowHeight",n)}),f!==r&&t.update("offsetRow",f),t};w.prototype.scrollHorizontal=function(n){if(!this.instance.drawn)throw new Error("scrollHorizontal can only be called after table was drawn to DOM");var t=this.instance,i=t.getSetting("offsetColumn"),r=t.getSetting("fixedColumnsLeft"),f=t.getSetting("totalColumns"),e=t.getSetting("width")-t.getSetting("rowHeaderWidth"),u=this.scrollLogic(n,i,f,r,e,function(n){return n-i<r?t.getSetting("columnWidth",n-i):t.getSetting("columnWidth",n)});return u!==i&&t.update("offsetColumn",u),t};w.prototype.scrollLogic=function(n,t,i,r,u,f){var e=t+n,o=0,s;if(e>r){for(e>=i-r&&(e=i-r-1),s=e;o<u&&s<i;)o+=f(s),s++;if(o<u)while(e>0)if(o+=f(e-1),o<u)e--;else break}else e<0&&(e=0);return e};w.prototype.scrollViewport=function(n){var r=this.instance.getSetting("offsetRow"),u=this.instance.getSetting("offsetColumn"),t=this.instance.wtTable.getLastVisibleRow(),i=this.instance.wtTable.getLastVisibleColumn(),o=this.instance.getSetting("totalRows"),s=this.instance.getSetting("totalColumns"),f=this.instance.getSetting("fixedRowsTop"),e=this.instance.getSetting("fixedColumnsLeft");if(n[0]<0||n[0]>o-1)throw new Error("row "+n[0]+" does not exist");else if(n[1]<0||n[1]>s-1)throw new Error("column "+n[1]+" does not exist");return n[0]>t?this.scrollVertical(n[0]-t+1):n[0]===t&&this.instance.wtTable.isLastRowIncomplete()?this.scrollVertical(n[0]-t+1):n[0]-f<r?this.scrollVertical(n[0]-f-r):this.scrollVertical(0),n[1]>i?this.scrollHorizontal(n[1]-i+1):n[1]===i&&this.instance.wtTable.isLastColumnIncomplete()?this.scrollHorizontal(n[1]-i+1):n[1]-e<u?this.scrollHorizontal(n[1]-e-u):this.scrollHorizontal(0),this.instance};y.prototype.init=function(){var t=this,r,i,u;this.$table=n(this.instance.wtTable.TABLE);this.slider=document.createElement("DIV");this.sliderStyle=this.slider.style;this.sliderStyle.position="absolute";this.sliderStyle.top="0";this.sliderStyle.left="0";this.sliderStyle.display="none";this.slider.className="dragdealer "+this.type;this.handle=document.createElement("DIV");this.handleStyle=this.handle.style;this.handle.className="handle";this.slider.appendChild(this.handle);this.instance.wtTable.parent.appendChild(this.slider);r=!0;this.dragTimeout=null;u=function(){t.onScroll(i)};this.dragdealer=new st(this.slider,{vertical:this.type==="vertical",horizontal:this.type==="horizontal",slide:!1,speed:100,animationCallback:function(n,f){if(r){r=!1;return}t.skipRefresh=!0;i=t.type==="vertical"?f:n;t.dragTimeout===null&&(t.dragTimeout=setInterval(u,100),u())},callback:function(n,r){t.skipRefresh=!1;clearInterval(t.dragTimeout);t.dragTimeout=null;i=t.type==="vertical"?r:n;t.onScroll(i)}});this.skipRefresh=!1};y.prototype.onScroll=function(n){if(this.instance.drawn&&(this.readSettings(),this.total>this.visibleCount)){var t=Math.round(this.handlePosition*this.total/this.sliderSize);n===1?this.type==="vertical"?this.instance.scrollVertical(Infinity).draw():this.instance.scrollHorizontal(Infinity).draw():t!==this.offset?this.type==="vertical"?this.instance.scrollVertical(t-this.offset).draw():this.instance.scrollHorizontal(t-this.offset).draw():this.refresh()}};y.prototype.getHandleSizeRatio=function(n,t){return!t||n>t?1:n/t};y.prototype.prepare=function(){if(!this.skipRefresh){var n=this.getHandleSizeRatio(this.visibleCount,this.total);this.visible=(n===1||isNaN(n))&&this.scrollMode==="auto"||this.scrollMode==="none"?!1:!0}};y.prototype.refresh=function(){if(!this.skipRefresh){if(!this.visible){this.sliderStyle.display="none";return}var s,n,t,u,f=this.visibleCount,e=this.$table.outerWidth(),o=this.$table.outerHeight(),i=this.instance.hasSetting("width")?this.instance.getSetting("width"):e,r=this.instance.hasSetting("height")?this.instance.getSetting("height"):o;i&&r&&(this.instance.hasSetting("width")&&this.instance.wtScroll.wtScrollbarV.visible&&(i-=this.instance.getSetting("scrollbarWidth")),i>e+this.instance.getSetting("scrollbarWidth")&&(i=e),this.instance.hasSetting("height")&&this.instance.wtScroll.wtScrollbarH.visible&&(r-=this.instance.getSetting("scrollbarHeight")),r>o+this.instance.getSetting("scrollbarHeight")&&(r=o),this.type==="vertical"?(this.instance.wtTable.isLastRowIncomplete()&&f--,n=r-2,this.sliderStyle.top=this.$table.position().top+"px",this.sliderStyle.left=i-1+"px",this.sliderStyle.height=n+"px"):(this.instance.wtTable.isLastColumnIncomplete()&&f--,n=i-2,this.sliderStyle.left=this.$table.position().left+"px",this.sliderStyle.top=r-1+"px",this.sliderStyle.width=n+"px"),s=this.getHandleSizeRatio(f,this.total),t=Math.round(n*s),t<10&&(t=15),u=Math.floor(n*(this.offset/this.total)),t+u>n&&(u=n-t),this.type==="vertical"?(this.handleStyle.height=t+"px",this.handleStyle.top=u+"px"):(this.handleStyle.width=t+"px",this.handleStyle.left=u+"px"),this.sliderStyle.display="block")}};ut=function(n){this.instance=n;this.type="vertical";this.init()};ut.prototype=new y;ut.prototype.readSettings=function(){this.scrollMode=this.instance.getSetting("scrollV");this.offset=this.instance.getSetting("offsetRow");this.total=this.instance.getSetting("totalRows");this.visibleCount=this.instance.wtTable.countVisibleRows();this.handlePosition=parseInt(this.handleStyle.top,10);this.sliderSize=parseInt(this.sliderStyle.height,10);this.fixedCount=this.instance.getSetting("fixedRowsTop")};ft=function(n){this.instance=n;this.type="horizontal";this.init()};ft.prototype=new y;ft.prototype.readSettings=function(){this.scrollMode=this.instance.getSetting("scrollH");this.offset=this.instance.getSetting("offsetColumn");this.total=this.instance.getSetting("totalColumns");this.visibleCount=this.instance.wtTable.countVisibleColumns();this.handlePosition=parseInt(this.handleStyle.left,10);this.sliderSize=parseInt(this.sliderStyle.width,10);this.fixedCount=this.instance.getSetting("fixedColumnsLeft")};it.prototype.add=function(n){this.selected.push(n)};it.prototype.clear=function(){this.selected.length=0};it.prototype.getCorners=function(){var t,i,r,u,n,f=this.selected.length;if(f>0&&(t=r=this.selected[0][0],i=u=this.selected[0][1],f>1))for(n=1;n<f;n++)this.selected[n][0]<t?t=this.selected[n][0]:this.selected[n][0]>r&&(r=this.selected[n][0]),this.selected[n][1]<i?i=this.selected[n][1]:this.selected[n][1]>u&&(u=this.selected[n][1]);return[t,i,r,u]};it.prototype.draw=function(){var n,t,i,r,u,f=this.instance.wtTable.countVisibleRows(),e=this.instance.wtTable.countVisibleColumns();if(this.selected.length){for(n=this.getCorners(),t=0;t<f;t++)for(i=0;i<e;i++)r=this.instance.wtTable.rowFilter.visibleToSource(t),u=this.instance.wtTable.columnFilter.visibleToSource(i),r>=n[0]&&r<=n[2]&&u>=n[1]&&u<=n[3]?this.instance.wtTable.currentCellCache.add(t,i,this.settings.className):r>=n[0]&&r<=n[2]?this.instance.wtTable.currentCellCache.add(t,i,this.settings.highlightRowClassName):u>=n[1]&&u<=n[3]&&this.instance.wtTable.currentCellCache.add(t,i,this.settings.highlightColumnClassName);this.border&&this.border.appear(n)}else this.border&&this.border.disappear()};p.prototype.update=function(n,t){if(t===void 0)for(var i in n)n.hasOwnProperty(i)&&(this.settings[i]=n[i]);else this.settings[n]=t;return this.instance};p.prototype.getSetting=function(n,t,i,r){return this[n]?this[n](t,i,r):this._getSetting(n,t,i,r)};p.prototype._getSetting=function(n,t,i,r){return typeof this.settings[n]=="function"?this.settings[n](t,i,r):t!==void 0&&Object.prototype.toString.call(this.settings[n])==="[object Array]"&&t!==void 0?this.settings[n][t]:this.settings[n]};p.prototype.has=function(n){return!!this.settings[n]};p.prototype.rowHeight=function(n){return typeof this.rowHeightCache[n]!="undefined"?this.rowHeightCache[n]:20};p.prototype.columnWidth=function(n){return Math.min(1e3,this._getSetting("columnWidth",n))};var gt=1,ni=2,ti=4,at=8,ii=16,vt=32;u.prototype.refreshHiderDimensions=function(){var n=this.instance.getSetting("height"),t=this.instance.getSetting("width");(n||t)&&(this.hiderStyle.overflow="hidden");n&&(this.hiderStyle.height=this.instance.wtScroll.wtScrollbarH.visible?n-this.instance.getSetting("scrollbarHeight")+"px":n+"px");t&&(this.hiderStyle.width=this.instance.wtScroll.wtScrollbarV.visible?t-this.instance.getSetting("scrollbarWidth")+"px":t+"px")};u.prototype.refreshStretching=function(){var n=this.instance,t=n.getSetting("stretchH"),r=n.getSetting("scrollH"),u=n.getSetting("scrollbarWidth"),f=n.getSetting("totalColumns"),e=n.getSetting("offsetColumn"),o=n.hasSetting("rowHeaders")?n.getSetting("rowHeaderWidth"):0,i=n.getSetting("width")-o,s=function(n){return r==="scroll"||r==="auto"&&n>i?i-u:i},h=this,c=function(t){var i=h.columnFilter.visibleToSource(t);if(i<f)return n.getSetting("columnWidth",i)};t==="hybrid"&&(t=e>0?"last":"none");this.columnStrategy=new et(s,c,t);this.rowStrategy={cells:[],cellCount:0,remainingSize:0}};u.prototype.adjustAvailableNodes=function(){var n,t=this.instance.hasSetting("rowHeaders")?1:0,i;for(this.refreshStretching(),n=this.columnStrategy.cellCount;this.colgroupChildrenLength<n+t;)this.COLGROUP.appendChild(document.createElement("COL")),this.colgroupChildrenLength++;while(this.colgroupChildrenLength>n+t)this.COLGROUP.removeChild(this.COLGROUP.lastChild),this.colgroupChildrenLength--;if(this.instance.hasSetting("columnHeaders")){for(i=this.THEAD.firstChild;this.theadChildrenLength<n+t;)i.appendChild(document.createElement("TH")),this.theadChildrenLength++;while(this.theadChildrenLength>n+t)i.removeChild(i.lastChild),this.theadChildrenLength--}};u.prototype.adjustColumns=function(n,t){for(var i=n.childNodes.length,r;i<t;)r=document.createElement("TD"),n.appendChild(r),i++;while(i>t)n.removeChild(n.lastChild),i--};u.prototype.draw=function(n){return this.rowFilter.readSettings(this.instance),this.columnFilter.readSettings(this.instance),n||(this.tableOffset=this.wtDom.offset(this.TABLE),this.adjustAvailableNodes(),this._doDraw()),this.refreshPositions(n),this.instance.drawn=!0,this};u.prototype._doDraw=function(){for(var r=0,f,e,c=this.instance.getSetting("totalRows"),o=this.columnStrategy.cellCount,l=this.instance.hasSetting("rowHeaders"),u=l?1:0,t,i,s,h,n=0;n<this.colgroupChildrenLength;n++)n<u?this.wtDom.addClass(this.COLGROUP.childNodes[n],"rowHeader"):this.wtDom.removeClass(this.COLGROUP.childNodes[n],"rowHeader");for(s=this.instance.hasSetting("columnHeaders"),s&&(t=this.THEAD.firstChild,u&&(i=t.firstChild,this.wtDom.empty(i),this.hasEmptyCellProblem&&(i.innerHTML="&nbsp;"))),n=0;n<o;n++)s&&this.instance.getSetting("columnHeaders",this.columnFilter.visibleToSource(n),t.childNodes[u+n]),this.COLGROUP.childNodes[n+u].style.width=this.columnStrategy.getSize(n)+"px";for(f=this.rowFilter.visibleToSource(r);f<c;){for(r>=this.tbodyChildrenLength?(t=document.createElement("TR"),u&&t.appendChild(document.createElement("TH")),this.TBODY.appendChild(t),this.tbodyChildrenLength++):t=r===0?this.TBODY.firstChild:t.nextSibling,this.rowStrategy.cellCount++,u&&this.instance.getSetting("rowHeaders",f,t.firstChild),this.adjustColumns(t,o+u),n=0;n<o;n++)e=this.columnFilter.visibleToSource(n),i=n===0?t.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e)]:i.nextSibling,i.className="",i.removeAttribute("style"),this.instance.getSetting("cellRenderer",f,e,i),this.hasEmptyCellProblem&&i.innerHTML===""&&(i.innerHTML="&nbsp;");if(h=this.isCellVisible(f,e,i),h&(vt|at))break;r++;f=this.rowFilter.visibleToSource(r)}for(r=this.countVisibleRows();this.tbodyChildrenLength>r;)this.TBODY.removeChild(this.TBODY.lastChild),this.tbodyChildrenLength--};u.prototype.refreshPositions=function(n){this.instance.wtScroll.refreshScrollbars();this.refreshHiderDimensions();this.refreshSelections(n)};u.prototype.refreshSelections=function(n){var u,t,f,e,r,o,i=[],s=this.countVisibleRows(),h=this.countVisibleColumns();if(this.oldCellCache=this.currentCellCache,this.currentCellCache=new tt,this.instance.selections)for(t in this.instance.selections)this.instance.selections.hasOwnProperty(t)&&(this.instance.selections[t].draw(),this.instance.selections[t].settings.className&&i.push(this.instance.selections[t].settings.className),this.instance.selections[t].settings.highlightRowClassName&&i.push(this.instance.selections[t].settings.highlightRowClassName),this.instance.selections[t].settings.highlightColumnClassName&&i.push(this.instance.selections[t].settings.highlightColumnClassName));for(o=i.length,u=0;u<s;u++)for(f=0;f<h;f++)for(t=this.rowFilter.visibleToSource(u),e=this.columnFilter.visibleToSource(f),r=0;r<o;r++)this.currentCellCache.test(u,f,i[r])?this.wtDom.addClass(this.getCell([t,e]),i[r]):n&&this.oldCellCache.test(u,f,i[r])&&this.wtDom.removeClass(this.getCell([t,e]),i[r])};u.prototype.isCellVisible=function(t,i,r){var u=0,s=this.wtDom.offset(r),h=this.tableOffset,f=s.top-h.top,c=n(r),o=c.outerHeight(),e=this.instance.hasSetting("height")?this.instance.getSetting("height"):Infinity;return this.instance.wtSettings.rowHeightCache[t]=o,f>e?u|=vt:f+o>e?(this.rowStrategy.remainingSize=e-f,u|=at):u|=ni,u|(this.isColumnInViewport(i)?this.getLastVisibleColumn()===i&&this.columnStrategy.remainingSize>0?ti:gt:ii)};u.prototype.getCell=function(n){return this.isRowBeforeViewport(n[0])?-1:this.isRowAfterViewport(n[0])?-2:this.isColumnBeforeViewport(n[1])?-3:this.isColumnAfterViewport(n[1])?-4:this.TBODY.childNodes[this.rowFilter.sourceToVisible(n[0])].childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(n[1])]};u.prototype.getCoords=function(n){return[this.rowFilter.visibleToSource(this.wtDom.prevSiblings(n.parentNode).length),this.columnFilter.visibleRowHeadedColumnToSourceColumn(n.cellIndex)]};u.prototype.countVisibleRows=function(){return this.rowStrategy&&this.rowStrategy.cellCount||0};u.prototype.countVisibleColumns=function(){return this.columnStrategy&&this.columnStrategy.cellCount||0};u.prototype.getLastVisibleRow=function(){return this.rowFilter.visibleToSource(this.rowStrategy.cellCount-1)};u.prototype.getLastVisibleColumn=function(){return this.columnFilter.visibleToSource(this.columnStrategy.cellCount-1)};u.prototype.isLastRowIncomplete=function(){return this.rowStrategy.remainingSize>0};u.prototype.isLastColumnIncomplete=function(){return this.columnStrategy.remainingSize>0};u.prototype.isRowBeforeViewport=function(n){return this.rowFilter.sourceToVisible(n)<this.rowFilter.fixedCount&&n>=this.rowFilter.fixedCount};u.prototype.isRowAfterViewport=function(n){return n>this.getLastVisibleRow()};u.prototype.isColumnBeforeViewport=function(n){return this.columnFilter.sourceToVisible(n)<this.columnFilter.fixedCount&&n>=this.columnFilter.fixedCount};u.prototype.isColumnAfterViewport=function(n){return n>this.getLastVisibleColumn()};u.prototype.isRowInViewport=function(n){return!this.isRowBeforeViewport(n)&&!this.isRowAfterViewport(n)};u.prototype.isColumnInViewport=function(n){return!this.isColumnBeforeViewport(n)&&!this.isColumnAfterViewport(n)};o={x:0,y:0,init:function(){this.setEvent("mouse");this.setEvent("touch")},setEvent:function(n){var t=document["on"+n+"move"]||function(){};document["on"+n+"move"]=function(n){t(n);o.refresh(n)}},refresh:function(n){n||(n=t.event);n.type=="mousemove"?this.set(n):n.touches&&this.set(n.touches[0])},set:function(n){n.pageX||n.pageY?(this.x=n.pageX,this.y=n.pageY):(n.clientX||n.clientY)&&(this.x=n.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.y=n.clientY+document.body.scrollTop+document.documentElement.scrollTop)}};o.init();b={get:function(n){var t=0,i=0;if(n.offsetParent)do i+=n.offsetLeft,t+=n.offsetTop;while(n=n.offsetParent);return[i,t]}};st=function(n,t){if(typeof n=="string"&&(n=document.getElementById(n)),n){var i=n.getElementsByTagName("div")[0];i&&i.className.search(/(^|\s)handle(\s|$)/)!=-1&&(this.init(n,i,t||{}),this.setup())}};st.prototype={init:function(n,t,i){this.wrapper=n;this.handle=t;this.options=i;this.disabled=this.getOption("disabled",!1);this.horizontal=this.getOption("horizontal",!0);this.vertical=this.getOption("vertical",!1);this.slide=this.getOption("slide",!0);this.steps=this.getOption("steps",0);this.snap=this.getOption("snap",!1);this.loose=this.getOption("loose",!1);this.speed=this.getOption("speed",10)/100;this.xPrecision=this.getOption("xPrecision",0);this.yPrecision=this.getOption("yPrecision",0);this.callback=i.callback||null;this.animationCallback=i.animationCallback||null;this.bounds={left:i.left||0,right:-(i.right||0),top:i.top||0,bottom:-(i.bottom||0),x0:0,x1:0,xRange:0,y0:0,y1:0,yRange:0};this.value={prev:[-1,-1],current:[i.x||0,i.y||0],target:[i.x||0,i.y||0]};this.offset={wrapper:[0,0],mouse:[0,0],prev:[-999999,-999999],current:[0,0],target:[0,0]};this.change=[0,0];this.activity=!1;this.dragging=!1;this.tapping=!1},getOption:function(n,t){return this.options[n]!==undefined?this.options[n]:t},setup:function(){this.setWrapperOffset();this.setBoundsPadding();this.setBounds();this.setSteps();this.addListeners()},setWrapperOffset:function(){this.offset.wrapper=b.get(this.wrapper)},setBoundsPadding:function(){this.bounds.left||this.bounds.right||(this.bounds.left=b.get(this.handle)[0]-this.offset.wrapper[0],this.bounds.right=-this.bounds.left);this.bounds.top||this.bounds.bottom||(this.bounds.top=b.get(this.handle)[1]-this.offset.wrapper[1],this.bounds.bottom=-this.bounds.top)},setBounds:function(){this.bounds.x0=this.bounds.left;this.bounds.x1=this.wrapper.offsetWidth+this.bounds.right;this.bounds.xRange=this.bounds.x1-this.bounds.x0-this.handle.offsetWidth;this.bounds.y0=this.bounds.top;this.bounds.y1=this.wrapper.offsetHeight+this.bounds.bottom;this.bounds.yRange=this.bounds.y1-this.bounds.y0-this.handle.offsetHeight;this.bounds.xStep=1/(this.xPrecision||Math.max(this.wrapper.offsetWidth,this.handle.offsetWidth));this.bounds.yStep=1/(this.yPrecision||Math.max(this.wrapper.offsetHeight,this.handle.offsetHeight))},setSteps:function(){if(this.steps>1){this.stepRatios=[];for(var n=0;n<=this.steps-1;n++)this.stepRatios[n]=n/(this.steps-1)}},addListeners:function(){var n=this,i,r,u;this.wrapper.onselectstart=function(){return!1};this.handle.onmousedown=this.handle.ontouchstart=function(t){n.handleDownHandler(t)};this.wrapper.onmousedown=this.wrapper.ontouchstart=function(t){n.wrapperDownHandler(t)};i=document.onmouseup||function(){};document.onmouseup=function(t){i(t);n.documentUpHandler(t)};r=document.ontouchend||function(){};document.ontouchend=function(t){r(t);n.documentUpHandler(t)};u=t.onresize||function(){};t.onresize=function(t){u(t);n.documentResizeHandler(t)};this.wrapper.onmousemove=function(){n.activity=!0};this.wrapper.onclick=function(){return!n.activity};this.interval=setInterval(function(){n.animate()},25);n.animate(!1,!0)},handleDownHandler:function(n){this.activity=!1;o.refresh(n);this.preventDefaults(n,!0);this.startDrag();this.cancelEvent(n)},wrapperDownHandler:function(n){o.refresh(n);this.preventDefaults(n,!0);this.startTap()},documentUpHandler:function(){this.stopDrag();this.stopTap()},documentResizeHandler:function(){this.setWrapperOffset();this.setBounds();this.update()},enable:function(){this.disabled=!1;this.handle.className=this.handle.className.replace(/\s?disabled/g,"")},disable:function(){this.disabled=!0;this.handle.className+=" disabled"},setStep:function(n,t,i){this.setValue(this.steps&&n>1?(n-1)/(this.steps-1):0,this.steps&&t>1?(t-1)/(this.steps-1):0,i)},setValue:function(n,t,i){this.setTargetValue([n,t||0]);i&&this.groupCopy(this.value.current,this.value.target)},startTap:function(n){this.disabled||(this.tapping=!0,this.setWrapperOffset(),this.setBounds(),n===undefined&&(n=[o.x-this.offset.wrapper[0]-this.handle.offsetWidth/2,o.y-this.offset.wrapper[1]-this.handle.offsetHeight/2]),this.setTargetOffset(n))},stopTap:function(){!this.disabled&&this.tapping&&(this.tapping=!1,this.setTargetValue(this.value.current),this.result())},startDrag:function(){this.disabled||(this.setWrapperOffset(),this.setBounds(),this.offset.mouse=[o.x-b.get(this.handle)[0],o.y-b.get(this.handle)[1]],this.dragging=!0)},stopDrag:function(){var n,t;!this.disabled&&this.dragging&&(this.dragging=!1,n=this.groupClone(this.value.current),this.slide&&(t=this.change,n[0]+=t[0]*4,n[1]+=t[1]*4),this.setTargetValue(n),this.result())},feedback:function(){var n=this.value.current;this.snap&&this.steps>1&&(n=this.getClosestSteps(n));this.groupCompare(n,this.value.prev)||(typeof this.animationCallback=="function"&&this.animationCallback(n[0],n[1]),this.groupCopy(this.value.prev,n))},result:function(){typeof this.callback=="function"&&this.callback(this.value.target[0],this.value.target[1])},animate:function(n,t){if(!n||this.dragging){if(this.dragging){var i=this.groupClone(this.value.target),r=[o.x-this.offset.wrapper[0]-this.offset.mouse[0],o.y-this.offset.wrapper[1]-this.offset.mouse[1]];this.setTargetOffset(r,this.loose);this.change=[this.value.target[0]-i[0],this.value.target[1]-i[1]]}(this.dragging||t)&&this.groupCopy(this.value.current,this.value.target);(this.dragging||this.glide()||t)&&(this.update(),this.feedback())}},glide:function(){var n=[this.value.target[0]-this.value.current[0],this.value.target[1]-this.value.current[1]];return!n[0]&&!n[1]?!1:(Math.abs(n[0])>this.bounds.xStep||Math.abs(n[1])>this.bounds.yStep?(this.value.current[0]+=n[0]*this.speed,this.value.current[1]+=n[1]*this.speed):this.groupCopy(this.value.current,this.value.target),!0)},update:function(){this.offset.current=this.snap?this.getOffsetsByRatios(this.getClosestSteps(this.value.current)):this.getOffsetsByRatios(this.value.current);this.show()},show:function(){this.groupCompare(this.offset.current,this.offset.prev)||(this.horizontal&&(this.handle.style.left=String(this.offset.current[0])+"px"),this.vertical&&(this.handle.style.top=String(this.offset.current[1])+"px"),this.groupCopy(this.offset.prev,this.offset.current))},setTargetValue:function(n,t){var i=t?this.getLooseValue(n):this.getProperValue(n);this.groupCopy(this.value.target,i);this.offset.target=this.getOffsetsByRatios(i)},setTargetOffset:function(n,t){var i=this.getRatiosByOffsets(n),r=t?this.getLooseValue(i):this.getProperValue(i);this.groupCopy(this.value.target,r);this.offset.target=this.getOffsetsByRatios(r)},getLooseValue:function(n){var t=this.getProperValue(n);return[t[0]+(n[0]-t[0])/4,t[1]+(n[1]-t[1])/4]},getProperValue:function(n){var t=this.groupClone(n);return t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0),t[0]=Math.min(t[0],1),t[1]=Math.min(t[1],1),(this.dragging||this.tapping)&&!this.snap||this.steps>1&&(t=this.getClosestSteps(t)),t},getRatiosByOffsets:function(n){return[this.getRatioByOffset(n[0],this.bounds.xRange,this.bounds.x0),this.getRatioByOffset(n[1],this.bounds.yRange,this.bounds.y0)]},getRatioByOffset:function(n,t,i){return t?(n-i)/t:0},getOffsetsByRatios:function(n){return[this.getOffsetByRatio(n[0],this.bounds.xRange,this.bounds.x0),this.getOffsetByRatio(n[1],this.bounds.yRange,this.bounds.y0)]},getOffsetByRatio:function(n,t,i){return Math.round(n*t)+i},getClosestSteps:function(n){return[this.getClosestStep(n[0]),this.getClosestStep(n[1])]},getClosestStep:function(n){for(var i=0,r=1,t=0;t<=this.steps-1;t++)Math.abs(this.stepRatios[t]-n)<r&&(r=Math.abs(this.stepRatios[t]-n),i=t);return this.stepRatios[i]},groupCompare:function(n,t){return n[0]==t[0]&&n[1]==t[1]},groupCopy:function(n,t){n[0]=t[0];n[1]=t[1]},groupClone:function(n){return[n[0],n[1]]},preventDefaults:function(n,i){n||(n=t.event);n.preventDefault&&n.preventDefault();n.returnValue=!1;i&&document.selection&&document.selection.empty()},cancelEvent:function(n){n||(n=t.event);n.stopPropagation&&n.stopPropagation();n.cancelBubble=!0}};jQuery.browser||function(){var t,n;jQuery.uaMatch=function(n){n=n.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}};t=jQuery.uaMatch(navigator.userAgent);n={};t.browser&&(n[t.browser]=!0,n.version=t.version);n.chrome?n.webkit=!0:n.webkit&&(n.safari=!0);jQuery.browser=n}(),function(n){function u(i){var r=i||t.event,o=[].slice.call(arguments,1),u=0,e=0,f=0;return i=n.event.fix(r),i.type="mousewheel",r.wheelDelta&&(u=r.wheelDelta/120),r.detail&&(u=-r.detail/3),f=u,r.axis!==undefined&&r.axis===r.HORIZONTAL_AXIS&&(f=0,e=-1*u),r.wheelDeltaY!==undefined&&(f=r.wheelDeltaY/120),r.wheelDeltaX!==undefined&&(e=r.wheelDeltaX/-120),o.unshift(i,u,e,f),(n.event.dispatch||n.event.handle).apply(this,o)}var i=["DOMMouseScroll","mousewheel"],r;if(n.event.fixHooks)for(r=i.length;r;)n.event.fixHooks[i[--r]]=n.event.mouseHooks;n.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var n=i.length;n;)this.addEventListener(i[--n],u,!1);else this.onmousewheel=u},teardown:function(){if(this.removeEventListener)for(var n=i.length;n;)this.removeEventListener(i[--n],u,!1);else this.onmousewheel=null}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})}(jQuery)}(jQuery,window,Handsontable);!function(n){"use strict";var t=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.typeahead.defaults,i);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.$menu=n(this.options.menu);this.shown=!1;this.listen()},i;t.prototype={constructor:t,select:function(){var n=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(n)).change(),this.hide()},updater:function(n){return n},show:function(){var t=n.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t;return(this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength)?this.shown?this.hide():this:(t=n.isFunction(this.source)?this.source(this.query,n.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var i=this;return(t=n.grep(t,function(n){return i.matcher(n)}),t=this.sorter(t),!t.length)?this.shown?this.hide():this:this.render(t.slice(0,this.options.items)).show()},matcher:function(n){return~n.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(n){for(var i=[],r=[],u=[],t;t=n.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?r.push(t):u.push(t):i.push(t);return i.concat(r,u)},highlighter:function(n){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return n.replace(new RegExp("("+t+")","ig"),function(n,t){return"<strong>"+t+"<\/strong>"})},render:function(t){var i=this;return t=n(t).map(function(t,r){return t=n(i.options.item).attr("data-value",r),t.find("a").html(i.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var i=this.$menu.find(".active").removeClass("active"),t=i.next();t.length||(t=n(this.$menu.find("li")[0]));t.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last());n.addClass("active")},listen:function(){this.$element.on("focus",n.proxy(this.focus,this)).on("blur",n.proxy(this.blur,this)).on("keypress",n.proxy(this.keypress,this)).on("keyup",n.proxy(this.keyup,this));if(this.eventSupported("keydown"))this.$element.on("keydown",n.proxy(this.keydown,this));this.$menu.on("click",n.proxy(this.click,this)).on("mouseenter","li",n.proxy(this.mouseenter,this)).on("mouseleave","li",n.proxy(this.mouseleave,this))},eventSupported:function(n){var t=n in this.$element;return t||(this.$element.setAttribute(n,"return;"),t=typeof this.$element[n]=="function"),t},move:function(n){if(this.shown){switch(n.keyCode){case 9:case 13:case 27:n.preventDefault();break;case 38:n.preventDefault();this.prev();break;case 40:n.preventDefault();this.next()}n.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~n.inArray(t.keyCode,[40,38,9,13,27]);this.move(t)},keypress:function(n){this.suppressKeyPressRepeat||this.move(n)},keyup:function(n){switch(n.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}n.stopPropagation();n.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1;!this.mousedover&&this.shown&&this.hide()},click:function(n){n.stopPropagation();n.preventDefault();this.select();this.$element.focus()},mouseenter:function(t){this.mousedover=!0;this.$menu.find(".active").removeClass("active");n(t.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1;!this.focused&&this.shown&&this.hide()}};i=n.fn.typeahead;n.fn.typeahead=function(i){return this.each(function(){var u=n(this),r=u.data("typeahead"),f=typeof i=="object"&&i;r||u.data("typeahead",r=new t(this,f));typeof i=="string"&&r[i]()})};n.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"><\/ul>',item:'<li><a href="#"><\/a><\/li>',minLength:1};n.fn.typeahead.Constructor=t;n.fn.typeahead.noConflict=function(){return n.fn.typeahead=i,this};n(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var t=n(this);t.data("typeahead")||t.typeahead(t.data())})}(window.jQuery),function(){function u(n){this._n=n}function f(n,t,i){var u=Math.pow(10,t),r,f;return r=(Math.round(n*u)/u).toFixed(t),i&&(f=new RegExp("0{1,"+i+"}$"),r=r.replace(f,"")),r}function e(n,t){return t.indexOf("$")>-1?h(n,t):t.indexOf("%")>-1?c(n,t):t.indexOf(":")>-1?l(n,t):v(n,t)}function s(i,u){var f,o;if(u.indexOf(":")>-1)i._n=a(u);else if(u===r)i._n=0;else{f=u;n[t].delimiters.decimal!=="."&&(u=u.replace(/\./g,"").replace(n[t].delimiters.decimal,"."));var h=new RegExp(n[t].abbreviations.thousand+"(?:\\)|(\\"+n[t].currency.symbol+")?(?:\\))?)?$"),c=new RegExp(n[t].abbreviations.million+"(?:\\)|(\\"+n[t].currency.symbol+")?(?:\\))?)?$"),l=new RegExp(n[t].abbreviations.billion+"(?:\\)|(\\"+n[t].currency.symbol+")?(?:\\))?)?$"),v=new RegExp(n[t].abbreviations.trillion+"(?:\\)|(\\"+n[t].currency.symbol+")?(?:\\))?)?$"),s=["KB","MB","GB","TB","PB","EB","ZB","YB"],e=!1;for(o=0;o<=s.length;o++)if(e=u.indexOf(s[o])>-1?Math.pow(1024,o+1):!1,e)break;i._n=(e?e:1)*(f.match(h)?Math.pow(10,3):1)*(f.match(c)?Math.pow(10,6):1)*(f.match(l)?Math.pow(10,9):1)*(f.match(v)?Math.pow(10,12):1)*(u.indexOf("%")>-1?.01:1)*Number((u.indexOf("(")>-1?"-":"")+u.replace(/[^0-9\.-]+/g,""));i._n=e?Math.ceil(i._n):i._n}return i._n}function h(i,r){var o=r.indexOf("$")<=1?!0:!1,f="",u;return r.indexOf(" $")>-1?(f=" ",r=r.replace(" $","")):r.indexOf("$ ")>-1?(f=" ",r=r.replace("$ ","")):r=r.replace("$",""),u=e(i,r),o?u.indexOf("(")>-1||u.indexOf("-")>-1?(u=u.split(""),u.splice(1,0,n[t].currency.symbol+f),u=u.join("")):u=n[t].currency.symbol+f+u:u.indexOf(")")>-1?(u=u.split(""),u.splice(-1,0,f+n[t].currency.symbol),u=u.join("")):u=u+f+n[t].currency.symbol,u}function c(n,t){var r="",i;return t.indexOf(" %")>-1?(r=" ",t=t.replace(" %","")):t=t.replace("%",""),n._n=n._n*100,i=e(n,t),i.indexOf(")")>-1?(i=i.split(""),i.splice(-1,0,r+"%"),i=i.join("")):i=i+r+"%",i}function l(n){var i=Math.floor(n._n/3600),t=Math.floor((n._n-i*3600)/60),r=Math.round(n._n-i*3600-t*60);return i+":"+(t<10?"0"+t:t)+":"+(r<10?"0"+r:r)}function a(n){var i=n.split(":"),t=0;return i.length===3?(t=t+Number(i[0])*3600,t=t+Number(i[1])*60,t=t+Number(i[2])):i.lenght===2&&(t=t+Number(i[0])*60,t=t+Number(i[1])),Number(t)}function v(i,u){var y=!1,k=!1,e="",a="",v="",c=Math.abs(i._n),b,p,d,l;if(i._n===0&&r!==null)return r;if(u.indexOf("(")>-1&&(y=!0,u=u.slice(1,-1)),u.indexOf("a")>-1&&(u.indexOf(" a")>-1?(e=" ",u=u.replace(" a","")):u=u.replace("a",""),c>=Math.pow(10,12)?(e=e+n[t].abbreviations.trillion,i._n=i._n/Math.pow(10,12)):c<Math.pow(10,12)&&c>=Math.pow(10,9)?(e=e+n[t].abbreviations.billion,i._n=i._n/Math.pow(10,9)):c<Math.pow(10,9)&&c>=Math.pow(10,6)?(e=e+n[t].abbreviations.million,i._n=i._n/Math.pow(10,6)):c<Math.pow(10,6)&&c>=Math.pow(10,3)&&(e=e+n[t].abbreviations.thousand,i._n=i._n/Math.pow(10,3))),u.indexOf("b")>-1)for(u.indexOf(" b")>-1?(a=" ",u=u.replace(" b","")):u=u.replace("b",""),b=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],l=0;l<=b.length;l++)if(p=Math.pow(1024,l),d=Math.pow(1024,l+1),i._n>=p&&i._n<d){a=a+b[l];p>0&&(i._n=i._n/p);break}u.indexOf("o")>-1&&(u.indexOf(" o")>-1?(v=" ",u=u.replace(" o","")):u=u.replace("o",""),v=v+n[t].ordinal(i._n));u.indexOf("[.]")>-1&&(k=!0,u=u.replace("[.]","."));var s=i._n.toString().split(".")[0],o=u.split(".")[1],g=u.indexOf(","),h="",w=!1;return o?(o.indexOf("[")>-1?(o=o.replace("]",""),o=o.split("["),h=f(i._n,o[0].length+o[1].length,o[1].length)):h=f(i._n,o.length),s=h.split(".")[0],h=h.split(".")[1].length?n[t].delimiters.decimal+h.split(".")[1]:"",k&&Number(h)===0&&(h="")):s=f(i._n,null),s.indexOf("-")>-1&&(s=s.slice(1),w=!0),g>-1&&(s=s.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+n[t].delimiters.thousands)),u.indexOf(".")===0&&(s=""),(y&&w?"(":"")+(!y&&w?"-":"")+s+h+(v?v:"")+(e?e:"")+(a?a:"")+(y&&w?")":"")}function y(t,i){n[t]=i}var i,n={},t="en",r=null,o=typeof module!="undefined"&&module.exports;i=function(n){return i.isNumeral(n)?n=n.value():Number(n)||(n=0),new u(Number(n))};i.version="1.4.7";i.isNumeral=function(n){return n instanceof u};i.language=function(r,u){return r?(r&&!u&&(t=r),(u||!n[r])&&y(r,u),i):t};i.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(n){var t=n%10;return~~(n%100/10)==1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th"},currency:{symbol:"$"}});i.zeroFormat=function(n){r=typeof n=="string"?n:null};i.fn=u.prototype={clone:function(){return i(this)},format:function(n){return e(this,n?n:i.defaultFormat)},unformat:function(n){return s(this,n?n:i.defaultFormat)},value:function(){return this._n},valueOf:function(){return this._n},set:function(n){return this._n=Number(n),this},add:function(n){return this._n=this._n+Number(n),this},subtract:function(n){return this._n=this._n-Number(n),this},multiply:function(n){return this._n=this._n*Number(n),this},divide:function(n){return this._n=this._n/Number(n),this},difference:function(n){var t=this._n-Number(n);return t<0&&(t=-t),t}};o&&(module.exports=i);typeof ender=="undefined"&&(this.numeral=i);typeof define=="function"&&define.amd&&define([],function(){return i})}.call(this),function(n,t){function w(n){for(var u=n.split(/\s+/),r=[],t,i=0;t=u[i];i++)t=t[0].toUpperCase(),r.push(t);return r}function h(t){return t.id&&n('label[for="'+t.id+'"]').val()||t.name}function y(i,r,u){return u||(u=0),r.each(function(){var r=n(this),e=this,s=this.nodeName.toLowerCase(),o,f;s=="label"&&r.find("input, textarea, select").length&&(o=r.text(),r=r.children().first(),e=r.get(0),s=e.nodeName.toLowerCase());switch(s){case"menu":f={name:r.attr("label"),items:{}};u=y(f.items,r.children(),u);break;case"a":case"button":f={name:r.text(),disabled:!!r.attr("disabled"),callback:function(){return function(){r.click()}}()};break;case"menuitem":case"command":switch(r.attr("type")){case t:case"command":case"menuitem":f={name:r.attr("label"),disabled:!!r.attr("disabled"),callback:function(){return function(){r.click()}}()};break;case"checkbox":f={type:"checkbox",disabled:!!r.attr("disabled"),name:r.attr("label"),selected:!!r.attr("checked")};break;case"radio":f={type:"radio",disabled:!!r.attr("disabled"),name:r.attr("label"),radio:r.attr("radiogroup"),value:r.attr("id"),selected:!!r.attr("checked")};break;default:f=t}break;case"hr":f="-------";break;case"input":switch(r.attr("type")){case"text":f={type:"text",name:o||h(e),disabled:!!r.attr("disabled"),value:r.val()};break;case"checkbox":f={type:"checkbox",name:o||h(e),disabled:!!r.attr("disabled"),selected:!!r.attr("checked")};break;case"radio":f={type:"radio",name:o||h(e),disabled:!!r.attr("disabled"),radio:!!r.attr("name"),value:r.val(),selected:!!r.attr("checked")};break;default:f=t}break;case"select":f={type:"select",name:o||h(e),disabled:!!r.attr("disabled"),selected:r.val(),options:{}};r.children().each(function(){f.options[this.value]=n(this).text()});break;case"textarea":f={type:"textarea",name:o||h(e),disabled:!!r.attr("disabled"),value:r.val()};break;case"label":break;default:f={type:"html",html:r.clone(!0)}}f&&(u++,i["key"+u]=f)}),u}n.support.htmlMenuitem="HTMLMenuItemElement"in window;n.support.htmlCommand="HTMLCommandElement"in window;n.support.eventSelectstart="onselectstart"in document.documentElement;var r=null,c=!1,f=n(window),l=0,e={},s={},a={},v={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,determinePosition:function(t){if(n.ui&&n.ui.position)t.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var i=this.offset();i.top+=this.outerHeight();i.left+=this.outerWidth()/2-t.outerWidth()/2;t.css(i)}},position:function(t,i,r){var l=this,u,e;if(i||r)i==="maintain"&&r==="maintain"?u=t.$menu.position():(e=t.$trigger.parents().andSelf().filter(function(){return n(this).css("position")=="fixed"}).length,e&&(r-=f.scrollTop(),i-=f.scrollLeft()),u={top:r,left:i});else{t.determinePosition.call(this,t.$menu);return}var h=f.scrollTop()+f.height(),c=f.scrollLeft()+f.width(),o=t.$menu.height(),s=t.$menu.width();u.top+o>h&&(u.top-=o);u.left+s>c&&(u.left-=s);t.$menu.css(u)},positionSubmenu:function(t){if(n.ui&&n.ui.position)t.css("display","block").position({my:"left top",at:"right top",of:this,collision:"fit"}).css("display","");else{var i={top:0,left:this.outerWidth()};t.css(i)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:n.noop,hide:n.noop},callback:null,items:{}},u={timer:null,pageX:null,pageY:null},p=function(n){for(var i=0,t=n;;)if(i=Math.max(i,parseInt(t.css("z-index"),10)||0),t=t.parent(),!t||!t.length||"html body".indexOf(t.prop("nodeName").toLowerCase())>-1)break;return i},i={abortevent:function(n){n.preventDefault();n.stopImmediatePropagation()},contextmenu:function(t){var i=n(this),u;if((t.preventDefault(),t.stopImmediatePropagation(),t.data.trigger=="right"||!t.originalEvent)&&!i.hasClass("context-menu-disabled")){if(r=i,t.data.build){if(u=t.data.build(r,t),u===!1)return;if(t.data=n.extend(!0,{},v,t.data,u||{}),!t.data.items||n.isEmptyObject(t.data.items)){window.console&&(console.error||console.log)("No items specified to show in contextMenu");throw new Error("No Items sepcified");}t.data.$trigger=r;o.create(t.data)}o.show.call(i,t.data,t.pageX,t.pageY)}},click:function(t){t.preventDefault();t.stopImmediatePropagation();n(this).trigger(n.Event("contextmenu",{data:t.data,pageX:t.pageX,pageY:t.pageY}))},mousedown:function(t){var i=n(this);r&&r.length&&!r.is(i)&&r.data("contextMenu").$menu.trigger("contextmenu:hide");t.button==2&&(r=i.data("contextMenuActive",!0))},mouseup:function(t){var i=n(this);i.data("contextMenuActive")&&r&&r.length&&r.is(i)&&!i.hasClass("context-menu-disabled")&&(t.preventDefault(),t.stopImmediatePropagation(),r=i,i.trigger(n.Event("contextmenu",{data:t.data,pageX:t.pageX,pageY:t.pageY})));i.removeData("contextMenuActive")},mouseenter:function(t){var f=n(this),e=n(t.relatedTarget),o=n(document);if(!e.is(".context-menu-list")&&!e.closest(".context-menu-list").length&&(!r||!r.length)){u.pageX=t.pageX;u.pageY=t.pageY;u.data=t.data;o.on("mousemove.contextMenuShow",i.mousemove);u.timer=setTimeout(function(){u.timer=null;o.off("mousemove.contextMenuShow");r=f;f.trigger(n.Event("contextmenu",{data:u.data,pageX:u.pageX,pageY:u.pageY}))},t.data.delay)}},mousemove:function(n){u.pageX=n.pageX;u.pageY=n.pageY},mouseleave:function(t){var i=n(t.relatedTarget);if(!i.is(".context-menu-list")&&!i.closest(".context-menu-list").length){try{clearTimeout(u.timer)}catch(t){}u.timer=null}},layerClick:function(t){var h=n(this),i=h.data("contextMenuRoot"),l=!1,a=t.button,o=t.pageX,s=t.pageY,u,r,c;t.preventDefault();t.stopImmediatePropagation();h.on("mouseup",function(){l=!0});setTimeout(function(){var v,y,p;if(i.trigger=="left"&&a==0||i.trigger=="right"&&a==2)if(document.elementFromPoint){i.$layer.hide();u=document.elementFromPoint(o-f.scrollLeft(),s-f.scrollTop());i.$layer.show();c=[];for(p in e)c.push(p);if(u=n(u).closest(c.join(", ")),u.length&&u.is(i.$trigger[0])){i.position.call(i.$trigger,i,o,s);return}}else if(r=i.$trigger.offset(),v=n(window),r.top+=v.scrollTop(),r.top<=t.pageY&&(r.left+=v.scrollLeft(),r.left<=t.pageX&&(r.bottom=r.top+i.$trigger.outerHeight(),r.bottom>=t.pageY&&(r.right=r.left+i.$trigger.outerWidth(),r.right>=t.pageX)))){i.position.call(i.$trigger,i,o,s);return}if(y=function(n){n&&(n.preventDefault(),n.stopImmediatePropagation());i.$menu.trigger("contextmenu:hide");u&&u.length&&setTimeout(function(){u.contextMenu({x:o,y:s})},50)},l)y();else h.on("mouseup",y)},50)},keyStop:function(n,t){t.isInput||n.preventDefault();n.stopPropagation()},key:function(n){var t=r.data("contextMenu")||{},o=t.$menu.children(),e,u,f;switch(n.keyCode){case 9:case 38:if(i.keyStop(n,t),t.isInput){if(n.keyCode==9&&n.shiftKey){n.preventDefault();t.$selected&&t.$selected.find("input, textarea, select").blur();t.$menu.trigger("prevcommand");return}if(n.keyCode==38&&t.$selected.find("input, textarea, select").prop("type")=="checkbox"){n.preventDefault();return}}else if(n.keyCode!=9||n.shiftKey){t.$menu.trigger("prevcommand");return}case 40:if(i.keyStop(n,t),t.isInput){if(n.keyCode==9){n.preventDefault();t.$selected&&t.$selected.find("input, textarea, select").blur();t.$menu.trigger("nextcommand");return}if(n.keyCode==40&&t.$selected.find("input, textarea, select").prop("type")=="checkbox"){n.preventDefault();return}}else{t.$menu.trigger("nextcommand");return}break;case 37:if(i.keyStop(n,t),t.isInput||!t.$selected||!t.$selected.length)break;if(!t.$selected.parent().hasClass("context-menu-root")){e=t.$selected.parent().parent();t.$selected.trigger("contextmenu:blur");t.$selected=e;return}break;case 39:if(i.keyStop(n,t),t.isInput||!t.$selected||!t.$selected.length)break;if(u=t.$selected.data("contextMenu")||{},u.$menu&&t.$selected.hasClass("context-menu-submenu")){t.$selected=null;u.$selected=null;u.$menu.trigger("nextcommand");return}break;case 35:case 36:if(t.$selected&&t.$selected.find("input, textarea, select").length)return;(t.$selected&&t.$selected.parent()||t.$menu).children(":not(.disabled, .not-selectable)")[n.keyCode==36?"first":"last"]().trigger("contextmenu:focus");n.preventDefault();return;case 13:if(i.keyStop(n,t),t.isInput){if(t.$selected&&!t.$selected.is("textarea, select")){n.preventDefault();return}break}t.$selected&&t.$selected.trigger("mouseup");return;case 32:case 33:case 34:i.keyStop(n,t);return;case 27:i.keyStop(n,t);t.$menu.trigger("contextmenu:hide");return;default:if(f=String.fromCharCode(n.keyCode).toUpperCase(),t.accesskeys[f]){t.accesskeys[f].$node.trigger(t.accesskeys[f].$menu?"contextmenu:focus":"mouseup");return}}n.stopPropagation();t.$selected&&t.$selected.trigger(n)},prevItem:function(t){var r,e,f;t.stopPropagation();r=n(this).data("contextMenu")||{};r.$selected&&(e=r.$selected,r=r.$selected.parent().data("contextMenu")||{},r.$selected=e);for(var o=r.$menu.children(),u=!r.$selected||!r.$selected.prev().length?o.last():r.$selected.prev(),s=u;u.hasClass("disabled")||u.hasClass("not-selectable");)if(u=u.prev().length?u.prev():o.last(),u.is(s))return;r.$selected&&i.itemMouseleave.call(r.$selected.get(0),t);i.itemMouseenter.call(u.get(0),t);f=u.find("input, textarea, select");f.length&&f.focus()},nextItem:function(t){var r,e,f;t.stopPropagation();r=n(this).data("contextMenu")||{};r.$selected&&(e=r.$selected,r=r.$selected.parent().data("contextMenu")||{},r.$selected=e);for(var o=r.$menu.children(),u=!r.$selected||!r.$selected.next().length?o.first():r.$selected.next(),s=u;u.hasClass("disabled")||u.hasClass("not-selectable");)if(u=u.next().length?u.next():o.first(),u.is(s))return;r.$selected&&i.itemMouseleave.call(r.$selected.get(0),t);i.itemMouseenter.call(u.get(0),t);f=u.find("input, textarea, select");f.length&&f.focus()},focusInput:function(){var t=n(this).closest(".context-menu-item"),i=t.data(),r=i.contextMenu,u=i.contextMenuRoot;u.$selected=r.$selected=t;u.isInput=r.isInput=!0},blurInput:function(){var i=n(this).closest(".context-menu-item"),t=i.data(),r=t.contextMenu,u=t.contextMenuRoot;u.isInput=r.isInput=!1},menuMouseenter:function(){var t=n(this).data().contextMenuRoot;t.hovering=!0},menuMouseleave:function(t){var i=n(this).data().contextMenuRoot;i.$layer&&i.$layer.is(t.relatedTarget)&&(i.hovering=!1)},itemMouseenter:function(t){var i=n(this),f=i.data(),u=f.contextMenu,r=f.contextMenuRoot;if(r.hovering=!0,t&&r.$layer&&r.$layer.is(t.relatedTarget)&&(t.preventDefault(),t.stopImmediatePropagation()),(u.$menu?u:r).$menu.children(".hover").trigger("contextmenu:blur"),i.hasClass("disabled")||i.hasClass("not-selectable")){u.$selected=null;return}i.trigger("contextmenu:focus")},itemMouseleave:function(t){var u=n(this),f=u.data(),r=f.contextMenu,i=f.contextMenuRoot;if(i!==r&&i.$layer&&i.$layer.is(t.relatedTarget)){i.$selected&&i.$selected.trigger("contextmenu:blur");t.preventDefault();t.stopImmediatePropagation();i.$selected=r.$selected=r.$node;return}u.trigger("contextmenu:blur")},itemClick:function(t){var u=n(this),f=u.data(),s=f.contextMenu,i=f.contextMenuRoot,r=f.contextMenuKey,e;if(s.items[r]&&!u.hasClass("disabled")&&!u.hasClass("context-menu-submenu")){if(t.preventDefault(),t.stopImmediatePropagation(),n.isFunction(i.callbacks[r]))e=i.callbacks[r];else if(n.isFunction(i.callback))e=i.callback;else return;e.call(i.$trigger,r,i)!==!1?i.$menu.trigger("contextmenu:hide"):i.$menu.parent().length&&o.update.call(i.$trigger,i)}},inputClick:function(n){n.stopImmediatePropagation()},hideMenu:function(t,i){var r=n(this).data("contextMenuRoot");o.hide.call(r.$trigger,r,i&&i.force)},focusItem:function(t){t.stopPropagation();var r=n(this),u=r.data(),i=u.contextMenu,f=u.contextMenuRoot;r.addClass("hover").siblings(".hover").trigger("contextmenu:blur");i.$selected=f.$selected=r;i.$node&&f.positionSubmenu.call(i.$node,i.$menu)},blurItem:function(t){t.stopPropagation();var i=n(this),r=i.data(),u=r.contextMenu,f=r.contextMenuRoot;i.removeClass("hover");u.$selected=null}},o={show:function(t,u,f){var s=n(this),h={},e;if(n("#context-menu-layer").trigger("mousedown"),t.$trigger=s,t.events.show.call(s,t)===!1){r=null;return}o.update.call(s,t);t.position.call(s,t,u,f);t.zIndex&&(h.zIndex=p(s)+t.zIndex);o.layer.call(t.$menu,t,h.zIndex);t.$menu.find("ul").css("zIndex",h.zIndex+1);t.$menu.css(h)[t.animation.show](t.animation.duration);s.data("contextMenu",t);n(document).off("keydown.contextMenu").on("keydown.contextMenu",i.key);if(t.autoHide){e=s.position();e.right=e.left+s.outerWidth();e.bottom=e.top+this.outerHeight();n(document).on("mousemove.contextMenuAutoHide",function(n){!t.$layer||t.hovering||n.pageX>=e.left&&n.pageX<=e.right&&n.pageY>=e.top&&n.pageY<=e.bottom||t.$menu.trigger("contextmenu:hide")})}},hide:function(i,u){var f=n(this);if(i||(i=f.data("contextMenu")||{}),u||!i.events||i.events.hide.call(f,i)!==!1){if(i.$layer){setTimeout(function(n){return function(){n.remove()}}(i.$layer),10);try{delete i.$layer}catch(e){i.$layer=null}}r=null;i.$menu.find(".hover").trigger("contextmenu:blur");i.$selected=null;n(document).off(".contextMenuAutoHide").off("keydown.contextMenu");i.$menu&&i.$menu[i.animation.hide](i.animation.duration,function(){i.build&&(i.$menu.remove(),n.each(i,function(n){switch(n){case"ns":case"selector":case"build":case"trigger":return!0;default:i[n]=t;try{delete i[n]}catch(r){}return!0}}))})}},create:function(r,u){u===t&&(u=r);r.$menu=n('<ul class="context-menu-list '+(r.className||"")+'"><\/ul>').data({contextMenu:r,contextMenuRoot:u});n.each(["callbacks","commands","inputs"],function(n,t){r[t]={};u[t]||(u[t]={})});u.accesskeys||(u.accesskeys={});n.each(r.items,function(t,f){var e=n('<li class="context-menu-item '+(f.className||"")+'"><\/li>'),h=null,s=null,v,l,c;if(f.$node=e.data({contextMenu:r,contextMenuRoot:u,contextMenuKey:t}),f.accesskey)for(v=w(f.accesskey),l=0;c=v[l];l++)if(!u.accesskeys[c]){u.accesskeys[c]=f;f._name=f.name.replace(new RegExp("("+c+")","i"),'<span class="context-menu-accesskey">$1<\/span>');break}if(typeof f=="string")e.addClass("context-menu-separator not-selectable");else if(f.type&&a[f.type])a[f.type].call(e,f,r,u),n.each([r,u],function(i,r){r.commands[t]=f;n.isFunction(f.callback)&&(r.callbacks[t]=f.callback)});else{f.type=="html"?e.addClass("context-menu-html not-selectable"):f.type?(h=n("<label><\/label>").appendTo(e),n("<span><\/span>").html(f._name||f.name).appendTo(h),e.addClass("context-menu-input"),r.hasTypes=!0,n.each([r,u],function(n,i){i.commands[t]=f;i.inputs[t]=f})):f.items&&(f.type="sub");switch(f.type){case"text":s=n('<input type="text" value="1" name="context-menu-input-'+t+'" value="">').val(f.value||"").appendTo(h);break;case"textarea":s=n('<textarea name="context-menu-input-'+t+'"><\/textarea>').val(f.value||"").appendTo(h);f.height&&s.height(f.height);break;case"checkbox":s=n('<input type="checkbox" value="1" name="context-menu-input-'+t+'" value="">').val(f.value||"").prop("checked",!!f.selected).prependTo(h);break;case"radio":s=n('<input type="radio" value="1" name="context-menu-input-'+f.radio+'" value="">').val(f.value||"").prop("checked",!!f.selected).prependTo(h);break;case"select":s=n('<select name="context-menu-input-'+t+'">').appendTo(h);f.options&&(n.each(f.options,function(t,i){n("<option><\/option>").val(t).text(i).appendTo(s)}),s.val(f.selected));break;case"sub":n("<span><\/span>").html(f._name||f.name).appendTo(e);f.appendTo=f.$node;o.create(f,u);e.data("contextMenu",f).addClass("context-menu-submenu");f.callback=null;break;case"html":n(f.html).appendTo(e);break;default:n.each([r,u],function(i,r){r.commands[t]=f;n.isFunction(f.callback)&&(r.callbacks[t]=f.callback)});n("<span><\/span>").html(f._name||f.name||"").appendTo(e)}if(f.type&&f.type!="sub"&&f.type!="html"){s.on("focus",i.focusInput).on("blur",i.blurInput);if(f.events)s.on(f.events,r)}f.icon&&e.addClass("icon icon-"+f.icon)}if(f.$input=s,f.$label=h,e.appendTo(r.$menu),!r.hasTypes&&n.support.eventSelectstart)e.on("selectstart.disableTextSelect",i.abortevent)});r.$node||r.$menu.css("display","none").addClass("context-menu-root");r.$menu.appendTo(r.appendTo||document.body)},update:function(i,r){var u=this;r===t&&(r=i,i.$menu.find("ul").andSelf().css({position:"static",display:"block"}).each(function(){var t=n(this);t.width(t.css("position","absolute").width()).css("position","static")}).css({position:"",display:""}));i.$menu.children().each(function(){var f=n(this),e=f.data("contextMenuKey"),t=i.items[e],s=n.isFunction(t.disabled)&&t.disabled.call(u,e,r)||t.disabled===!0;if(f[s?"addClass":"removeClass"]("disabled"),t.type){f.find("input, select, textarea").prop("disabled",s);switch(t.type){case"text":case"textarea":t.$input.val(t.value||"");break;case"checkbox":case"radio":t.$input.val(t.value||"").prop("checked",!!t.selected);break;case"select":t.$input.val(t.selected||"")}}t.$menu&&o.update.call(u,t,r)})},layer:function(t,r){var u=t.$layer=n('<div id="context-menu-layer" style="position:fixed; z-index:'+r+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"><\/div>').css({height:f.height(),width:f.width(),display:"block"}).data("contextMenuRoot",t).insertBefore(this).on("contextmenu",i.abortevent).on("mousedown",i.layerClick);return n.support.fixedPosition||u.css({position:"absolute",height:n(document).height()}),u}};n.fn.contextMenu=function(i){if(i===t)this.first().trigger("contextmenu");else if(i.x&&i.y)this.first().trigger(n.Event("contextmenu",{pageX:i.x,pageY:i.y}));else if(i==="hide"){var r=this.data("contextMenu").$menu;r&&r.trigger("contextmenu:hide")}else i?this.removeClass("context-menu-disabled"):i||this.addClass("context-menu-disabled");return this};n.contextMenu=function(r,u){var f,h,a;typeof r!="string"&&(u=r,r="create");typeof u=="string"?u={selector:u}:u===t&&(u={});f=n.extend(!0,{},v,u||{});h=n(document);switch(r){case"create":if(!f.selector)throw new Error("No selector specified");if(f.selector.match(/.context-menu-(list|item|input)($|\s)/))throw new Error('Cannot bind to selector "'+f.selector+'" as it contains a reserved className');if(!f.build&&(!f.items||n.isEmptyObject(f.items)))throw new Error("No Items sepcified");if(l++,f.ns=".contextMenu"+l,e[f.selector]=f.ns,s[f.ns]=f,f.trigger||(f.trigger="right"),!c){h.on({"contextmenu:hide.contextMenu":i.hideMenu,"prevcommand.contextMenu":i.prevItem,"nextcommand.contextMenu":i.nextItem,"contextmenu.contextMenu":i.abortevent,"mouseenter.contextMenu":i.menuMouseenter,"mouseleave.contextMenu":i.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",i.inputClick).on({"mouseup.contextMenu":i.itemClick,"contextmenu:focus.contextMenu":i.focusItem,"contextmenu:blur.contextMenu":i.blurItem,"contextmenu.contextMenu":i.abortevent,"mouseenter.contextMenu":i.itemMouseenter,"mouseleave.contextMenu":i.itemMouseleave},".context-menu-item");c=!0}h.on("contextmenu"+f.ns,f.selector,f,i.contextmenu);switch(f.trigger){case"hover":h.on("mouseenter"+f.ns,f.selector,f,i.mouseenter).on("mouseleave"+f.ns,f.selector,f,i.mouseleave);break;case"left":h.on("click"+f.ns,f.selector,f,i.click)}f.build||o.create(f);break;case"destroy":if(f.selector){if(e[f.selector]){a=n(".context-menu-list").filter(":visible");a.length&&a.data().contextMenuRoot.$trigger.is(f.selector)&&a.trigger("contextmenu:hide",{force:!0});try{s[e[f.selector]].$menu&&s[e[f.selector]].$menu.remove();delete s[e[f.selector]]}catch(y){s[e[f.selector]]=null}h.off(e[f.selector])}}else h.off(".contextMenu .contextMenuAutoHide"),n.each(e,function(n,t){h.off(t)}),e={},s={},l=0,c=!1,n("#context-menu-layer, .context-menu-list").remove();break;case"html5":(n.support.htmlCommand||n.support.htmlMenuitem)&&(typeof u!="boolean"||!u)||n('menu[type="context"]').each(function(){this.id&&n.contextMenu({selector:"[contextmenu="+this.id+"]",items:n.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw new Error('Unknown operation "'+r+'"');}return this};n.contextMenu.setInputValues=function(i,r){r===t&&(r={});n.each(i.inputs,function(n,t){switch(t.type){case"text":case"textarea":t.value=r[n]||"";break;case"checkbox":t.selected=r[n]?!0:!1;break;case"radio":t.selected=(r[t.radio]||"")==t.value?!0:!1;break;case"select":t.selected=r[n]||""}})};n.contextMenu.getInputValues=function(i,r){return r===t&&(r={}),n.each(i.inputs,function(n,t){switch(t.type){case"text":case"textarea":case"select":r[n]=t.$input.val();break;case"checkbox":r[n]=t.$input.prop("checked");break;case"radio":t.$input.prop("checked")&&(r[t.radio]=t.value)}}),r};n.contextMenu.fromMenu=function(t){var r=n(t),i={};return y(i,r.children()),i};n.contextMenu.defaults=v;n.contextMenu.types=a}(jQuery),function(n){n.extend(n.fn,{livequery:function(t,i,r){var f=this,u;return n.isFunction(t)&&(r=i,i=t,t=undefined),n.each(n.livequery.queries,function(n,e){if(f.selector==e.selector&&f.context==e.context&&t==e.type&&(!i||i.$lqguid==e.fn.$lqguid)&&(!r||r.$lqguid==e.fn2.$lqguid))return(u=e)&&!1}),u=u||new n.livequery(this.selector,this.context,t,i,r),u.stopped=!1,u.run(),this},expire:function(t,i,r){var u=this;return n.isFunction(t)&&(r=i,i=t,t=undefined),n.each(n.livequery.queries,function(f,e){u.selector!=e.selector||u.context!=e.context||t&&t!=e.type||i&&i.$lqguid!=e.fn.$lqguid||r&&r.$lqguid!=e.fn2.$lqguid||this.stopped||n.livequery.stop(e.id)}),this}});n.livequery=function(t,i,r,u,f){return this.selector=t,this.context=i,this.type=r,this.fn=u,this.fn2=f,this.elements=[],this.stopped=!1,this.id=n.livequery.queries.push(this)-1,u.$lqguid=u.$lqguid||n.livequery.guid++,f&&(f.$lqguid=f.$lqguid||n.livequery.guid++),this};n.livequery.prototype={stop:function(){var n=this;this.type?this.elements.unbind(this.type,this.fn):this.fn2&&this.elements.each(function(t,i){n.fn2.apply(i)});this.elements=[];this.stopped=!0},run:function(){if(!this.stopped){var i=this,t=this.elements,r=n(this.selector,this.context),u=r.not(t);this.elements=r;this.type?(u.bind(this.type,this.fn),t.length>0&&n.each(t,function(t,u){n.inArray(u,r)<0&&n.event.remove(u,i.type,i.fn)})):(u.each(function(){i.fn.apply(this)}),this.fn2&&t.length>0&&n.each(t,function(t,u){n.inArray(u,r)<0&&i.fn2.apply(u)}))}}};n.extend(n.livequery,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(){if(n.livequery.running&&n.livequery.queue.length)for(var t=n.livequery.queue.length;t--;)n.livequery.queries[n.livequery.queue.shift()].run()},pause:function(){n.livequery.running=!1},play:function(){n.livequery.running=!0;n.livequery.run()},registerPlugin:function(){n.each(arguments,function(t,i){if(n.fn[i]){var r=n.fn[i];n.fn[i]=function(){var t=r.apply(this,arguments);return n.livequery.run(),t}}})},run:function(t){t!=undefined?n.inArray(t,n.livequery.queue)<0&&n.livequery.queue.push(t):n.each(n.livequery.queries,function(t){n.inArray(t,n.livequery.queue)<0&&n.livequery.queue.push(t)});n.livequery.timeout&&clearTimeout(n.livequery.timeout);n.livequery.timeout=setTimeout(n.livequery.checkQueue,20)},stop:function(t){t!=undefined?n.livequery.queries[t].stop():n.each(n.livequery.queries,function(t){n.livequery.queries[t].stop()})}});n.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html");n(function(){n.livequery.play()})}(jQuery),function(n){"use strict";var t=/["\\\x00-\x1f\x7f-\x9f]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r=Object.prototype.hasOwnProperty;n.toJSON=typeof JSON=="object"&&JSON.stringify?JSON.stringify:function(t){var e,u,a,v,i;if(t===null)return"null";if(i=n.type(t),i==="undefined")return undefined;if(i==="number"||i==="boolean")return String(t);if(i==="string")return n.quoteString(t);if(typeof t.toJSON=="function")return n.toJSON(t.toJSON());if(i==="date"){var o=t.getUTCMonth()+1,s=t.getUTCDate(),y=t.getUTCFullYear(),h=t.getUTCHours(),c=t.getUTCMinutes(),l=t.getUTCSeconds(),f=t.getUTCMilliseconds();return o<10&&(o="0"+o),s<10&&(s="0"+s),h<10&&(h="0"+h),c<10&&(c="0"+c),l<10&&(l="0"+l),f<100&&(f="0"+f),f<10&&(f="0"+f),'"'+y+"-"+o+"-"+s+"T"+h+":"+c+":"+l+"."+f+'Z"'}if(e=[],n.isArray(t)){for(u=0;u<t.length;u++)e.push(n.toJSON(t[u])||"null");return"["+e.join(",")+"]"}if(typeof t=="object"){for(u in t)if(r.call(t,u)){if(i=typeof u,i==="number")a='"'+u+'"';else if(i==="string")a=n.quoteString(u);else continue;i=typeof t[u];i!=="function"&&i!=="undefined"&&(v=n.toJSON(t[u]),e.push(a+":"+v))}return"{"+e.join(",")+"}"}};n.evalJSON=typeof JSON=="object"&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")};n.secureEvalJSON=typeof JSON=="object"&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+str+")");throw new SyntaxError("Error parsing JSON, source is not valid.");};n.quoteString=function(n){return n.match(t)?'"'+n.replace(t,function(n){var t=i[n];return typeof t=="string"?t:(t=n.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+n+'"'}}(jQuery);jQuery.cookie=function(n,t,i){var f,r,e,o,u,s;if(typeof t!="undefined"){i=i||{};t===null&&(t="",i.expires=-1);f="";i.expires&&(typeof i.expires=="number"||i.expires.toUTCString)&&(typeof i.expires=="number"?(r=new Date,r.setTime(r.getTime()+i.expires*864e5)):r=i.expires,f="; expires="+r.toUTCString());var h=i.path?"; path="+i.path:"",c=i.domain?"; domain="+i.domain:"",l=i.secure?"; secure":"";document.cookie=[n,"=",encodeURIComponent(t),f,h,c,l].join("")}else{if(e=null,document.cookie&&document.cookie!="")for(o=document.cookie.split(";"),u=0;u<o.length;u++)if(s=jQuery.trim(o[u]),s.substring(0,n.length+1)==n+"="){e=decodeURIComponent(s.substring(n.length+1));break}return e}},function(n){var o="0.3.4",f="hasOwnProperty",e=/[\.\/]/,s="*",h=function(){},c=function(n,t){return n-t},r,i,u={n:{}},t=function(n,f){var k=u,w=i,v=Array.prototype.slice.call(arguments,2),s=t.listeners(n),a=0,e,l=[],y={},h=[],b=r,o,p;for(r=n,i=0,o=0,p=s.length;o<p;o++)"zIndex"in s[o]&&(l.push(s[o].zIndex),s[o].zIndex<0&&(y[s[o].zIndex]=s[o]));for(l.sort(c);l[a]<0;)if(e=y[l[a++]],h.push(e.apply(f,v)),i)return i=w,h;for(o=0;o<p;o++)if(e=s[o],"zIndex"in e)if(e.zIndex==l[a]){if(h.push(e.apply(f,v)),i)break;do if(a++,e=y[l[a]],e&&h.push(e.apply(f,v)),i)break;while(e)}else y[e.zIndex]=e;else if(h.push(e.apply(f,v)),i)break;return i=w,r=b,h.length?h:null};t.listeners=function(n){for(var a=n.split(e),t=u,i,v,o,f,p,h,c=[t],l=[],r=0,y=a.length;r<y;r++){for(h=[],f=0,p=c.length;f<p;f++)for(t=c[f].n,v=[t[a[r]],t[s]],o=2;o--;)i=v[o],i&&(h.push(i),l=l.concat(i.f||[]));c=h}return l};t.on=function(n,t){for(var f=n.split(e),i=u,r=0,o=f.length;r<o;r++)i=i.n,!i[f[r]]&&(i[f[r]]={n:{}}),i=i[f[r]];for(i.f=i.f||[],r=0,o=i.f.length;r<o;r++)if(i.f[r]==t)return h;return i.f.push(t),function(n){+n==+n&&(t.zIndex=+n)}};t.stop=function(){i=1};t.nt=function(n){return n?new RegExp("(?:\\.|\\/|^)"+n+"(?:\\.|\\/|$)").test(r):r};t.off=t.unbind=function(n,t){for(var v=n.split(e),i,o,l,r,p,c=[u],a,h=0,y=v.length;h<y;h++)for(r=0;r<c.length;r+=l.length-2){if(l=[r,1],i=c[r].n,v[h]!=s)i[v[h]]&&l.push(i[v[h]]);else for(o in i)i[f](o)&&l.push(i[o]);c.splice.apply(c,l)}for(h=0,y=c.length;h<y;h++)for(i=c[h];i.n;){if(t){if(i.f){for(r=0,p=i.f.length;r<p;r++)if(i.f[r]==t){i.f.splice(r,1);break}i.f.length||delete i.f}for(o in i.n)if(i.n[f](o)&&i.n[o].f){for(a=i.n[o].f,r=0,p=a.length;r<p;r++)if(a[r]==t){a.splice(r,1);break}a.length||delete i.n[o].f}}else{delete i.f;for(o in i.n)i.n[f](o)&&i.n[o].f&&delete i.n[o].f}i=i.n}};t.once=function(n,i){var r=function(){var u=i.apply(this,arguments);return t.unbind(n,r),u};return t.on(n,r)};t.version=o;t.toString=function(){return"You are running Eve "+o};typeof module!="undefined"&&module.exports?module.exports=t:typeof define!="undefined"?define("eve",[],function(){return t}):n.eve=t}(this),function(){function or(n){for(var t=0;t<r.length;t++)r[t].el.paper==n&&r.splice(t--,1)}function vt(t,i,u,e,s,c){var g,a,et,l,lt,kt,ti,nt,at,dt,vt,k,rt,st,ht,gt,ut,ct;u=o(u);var tt,ot,yt,ni,wt,bt,w=t.ms,p={},d={},b={};if(e){for(a=0,et=r.length;a<et;a++)if(g=r[a],g.el.id==i.id&&g.anim==t){g.percent!=u?(r.splice(a,1),yt=1):ot=g;i.attr(g.totalOrigin);break}}else e=+d;for(a=0,et=t.percents.length;a<et;a++){if(t.percents[a]==u||t.percents[a]>e*t.top){u=t.percents[a];wt=t.percents[a-1]||0;w=w/t.top*(u-wt);ni=t.percents[a+1];tt=t.anim[u];break}e&&i.attr(t.anim[t.percents[a]])}if(!!tt){if(ot)ot.initstatus=e,ot.start=new Date-ot.ms*e;else{for(l in tt)if(tt[h](l)&&(pi[h](l)||i.paper.customAttributes[h](l))){p[l]=i.attr(l);p[l]==null&&(p[l]=ku[l]);d[l]=tt[l];switch(pi[l]){case v:b[l]=(d[l]-p[l])/w;break;case"colour":p[l]=n.getRGB(p[l]);lt=n.getRGB(d[l]);b[l]={r:(lt.r-p[l].r)/w,g:(lt.g-p[l].g)/w,b:(lt.b-p[l].b)/w};break;case"path":for(kt=pt(p[l],d[l]),ti=kt[1],p[l]=kt[0],b[l]=[],a=0,et=p[l].length;a<et;a++)for(b[l][a]=[0],nt=1,at=p[l][a].length;nt<at;nt++)b[l][a][nt]=(ti[a][nt]-p[l][a][nt])/w;break;case"transform":if(dt=i._,vt=af(dt[l],d[l]),vt)for(p[l]=vt.from,d[l]=vt.to,b[l]=[],b[l].real=!0,a=0,et=p[l].length;a<et;a++)for(b[l][a]=[p[l][a][0]],nt=1,at=p[l][a].length;nt<at;nt++)b[l][a][nt]=(d[l][a][nt]-p[l][a][nt])/w;else k=i.matrix||new ft,rt={_:{transform:dt.transform},getBBox:function(){return i.getBBox(1)}},p[l]=[k.a,k.b,k.c,k.d,k.e,k.f],iu(rt,d[l]),d[l]=rt._.transform,b[l]=[(rt.matrix.a-k.a)/w,(rt.matrix.b-k.b)/w,(rt.matrix.c-k.c)/w,(rt.matrix.d-k.d)/w,(rt.matrix.e-k.e)/w,(rt.matrix.f-k.f)/w];break;case"csv":if(st=y(tt[l])[it](ci),ht=y(p[l])[it](ci),l=="clip-rect")for(p[l]=ht,b[l]=[],a=ht.length;a--;)b[l][a]=(st[a]-p[l][a])/w;d[l]=st;break;default:for(st=[][f](tt[l]),ht=[][f](p[l]),b[l]=[],a=i.paper.customAttributes[l].length;a--;)b[l][a]=((st[a]||0)-(ht[a]||0))/w}}if(gt=tt.easing,ut=n.easing_formulas[gt],ut||(ut=y(gt).match(bu),ut&&ut.length==5?(ct=ut,ut=function(n){return su(n,+ct[1],+ct[2],+ct[3],+ct[4],w)}):ut=ff),bt=tt.start||t.start||+new Date,g={anim:t,percent:u,timestamp:bt,start:bt+(t.del||0),status:0,initstatus:e||0,stop:!1,ms:w,easing:ut,from:p,diff:b,to:d,el:i,callback:tt.callback,prev:wt,next:ni,repeat:c||t.times,origin:i.attr(),totalOrigin:s},r.push(g),e&&!ot&&!yt&&(g.stop=!0,g.start=new Date-w*e,r.length==1))return fr();yt&&(g.start=new Date-g.ms*e);r.length==1&&ou(fr)}eve("raphael.anim.start."+i.id,i,t)}}function rt(n,t){var i=[],u={},r;if(this.ms=t,this.times=1,n){for(r in n)n[h](r)&&(u[o(r)]=n[r],i.push(o(r)));i.sort(rf)}this.anim=u;this.top=i[i.length-1];this.percents=i}function su(n,t,i,r,u,f){function v(n,t){for(var r,u,f,s,i=n,l=0;l<8;l++){if(f=h(i)-n,a(f)<t)return i;if(s=(3*c*i+2*o)*i+e,a(s)<1e-6)break;i=i-f/s}if(r=0,u=1,i=n,i<r)return r;if(i>u)return u;while(r<u){if(f=h(i),a(f-n)<t)return i;n>f?r=i:u=i;i=(u-r)/2+r}return i}function y(n,t){var i=v(n,t);return((p*i+l)*i+s)*i}function h(n){return((c*n+o)*n+e)*n}var e=3*t,o=3*(r-t)-e,c=1-e-o,s=3*i,l=3*(u-i)-s,p=1-s-l;return y(n,1/(200*f))}function sr(){return this.x+at+this.y+at+this.width+"  "+this.height}function ft(n,t,i,r,u,f){n!=null?(this.a=+n,this.b=+t,this.c=+i,this.d=+r,this.e=+u,this.f=+f):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function oi(t,i,r){var e,o,s,h,b,k,d,g,c,l,y,p,nt,a,w,tt,v,u,f,it;for(t=n._path2curve(t),i=n._path2curve(i),y=r?0:[],p=0,nt=t.length;p<nt;p++)if(a=t[p],a[0]=="M")e=b=a[1],o=k=a[2];else for(a[0]=="C"?(c=[e,o].concat(a.slice(1)),e=c[6],o=c[7]):(c=[e,o,e,o,b,k,b,k],e=b,o=k),w=0,tt=i.length;w<tt;w++)if(v=i[w],v[0]=="M")s=d=v[1],h=g=v[2];else if(v[0]=="C"?(l=[s,h].concat(v.slice(1)),s=l[6],h=l[7]):(l=[s,h,s,h,d,g,d,g],s=d,h=g),u=si(c,l,r),r)y+=u;else{for(f=0,it=u.length;f<it;f++)u[f].segment1=p,u[f].segment2=w,u[f].bez1=c,u[f].bez2=l;y=y.concat(u)}return y}function si(t,i,r){var it=n.bezierBBox(t),rt=n.bezierBBox(i),u,s,h,b,k;if(!n.isBBoxIntersect(it,rt))return r?0:[];var ut=ct.apply(0,t),ft=ct.apply(0,i),v=~~(ut/5),y=~~(ft/5),d=[],g=[],tt={},nt=r?0:[];for(u=0;u<v+1;u++)s=n.findDotsAtSegment.apply(n,t.concat(u/v)),d.push({x:s.x,y:s.y,t:u/v});for(u=0;u<y+1;u++)s=n.findDotsAtSegment.apply(n,i.concat(u/y)),g.push({x:s.x,y:s.y,t:u/y});for(u=0;u<v;u++)for(h=0;h<y;h++){var e=d[u],c=d[u+1],o=g[h],l=g[h+1],p=a(c.x-e.x)<.001?"y":"x",w=a(l.x-o.x)<.001?"y":"x",f=hu(e.x,e.y,c.x,c.y,o.x,o.y,l.x,l.y);if(f){if(tt[f.x.toFixed(4)]==f.y.toFixed(4))continue;tt[f.x.toFixed(4)]=f.y.toFixed(4);b=e.t+a((f[p]-e[p])/(c[p]-e[p]))*(c.t-e.t);k=o.t+a((f[w]-o[w])/(l[w]-o[w]))*(l.t-o.t);b>=0&&b<=1&&k>=0&&k<=1&&(r?nt++:nt.push({x:f.x,y:f.y,t1:b,t2:k}))}}return nt}function hu(n,t,i,r,u,f,o,s){if(!(e(n,i)<l(u,o)||l(n,i)>e(u,o)||e(t,r)<l(f,s)||l(t,r)>e(f,s))){var p=(n*r-t*i)*(u-o)-(n-i)*(u*s-f*o),w=(n*r-t*i)*(f-s)-(t-r)*(u*s-f*o),a=(n-i)*(f-s)-(t-r)*(u-o);if(!a)return;var v=p/a,y=w/a,h=+v.toFixed(2),c=+y.toFixed(2);return h<+l(n,i).toFixed(2)||h>+e(n,i).toFixed(2)||h<+l(u,o).toFixed(2)||h>+e(u,o).toFixed(2)||c<+l(t,r).toFixed(2)||c>+e(t,r).toFixed(2)||c<+l(f,s).toFixed(2)||c>+e(f,s).toFixed(2)?void 0:{x:v,y:y}}}function cu(n,t,i,r,u,f,e,o,s){if(!(s<0||ct(n,t,i,r,u,f,e,o)<s)){for(var v=1,l=v/2,h=v-l,c=ct(n,t,i,r,u,f,e,o,h);a(c-s)>.01;)l/=2,h+=(c<s?1:-1)*l,c=ct(n,t,i,r,u,f,e,o,h);return h}}function ct(n,t,r,u,f,e,o,s,h){var c;h==null&&(h=1);h=h>1?1:h<0?0:h;var l=h/2,w=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],b=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],a=0;for(c=0;c<12;c++){var v=l*w[c]+l,y=hr(v,n,r,f,o),p=hr(v,t,u,e,s),k=y*y+p*p;a+=b[c]*i.sqrt(k)}return l*a}function hr(n,t,i,r,u){var f=-3*t+9*i-9*r+3*u,e=n*f+6*t-12*i+6*r;return n*e-3*t+3*i}function cr(n,t){for(var f=[],i,r=0,u=n.length;u-2*!t>r;r+=2)i=[{x:+n[r-2],y:+n[r-1]},{x:+n[r],y:+n[r+1]},{x:+n[r+2],y:+n[r+3]},{x:+n[r+4],y:+n[r+5]}],t?r?u-4==r?i[3]={x:+n[0],y:+n[1]}:u-2==r&&(i[2]={x:+n[0],y:+n[1]},i[3]={x:+n[2],y:+n[3]}):i[0]={x:+n[u-2],y:+n[u-1]}:u-4==r?i[3]=i[2]:r||(i[0]={x:+n[r],y:+n[r+1]}),f.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y]);return f}function bt(){return this.hex}function nt(n,t,i){function r(){var o=Array.prototype.slice.call(arguments,0),u=o.join(""),f=r.cache=r.cache||{},e=r.count=r.count||[];return f[h](u)?(lu(e,u),i?i(f[u]):f[u]):(e.length>=1e3&&delete f[e.shift()],e.push(u),f[u]=n[c](t,o),i?i(f[u]):f[u])}return r}function lu(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return n.push(n.splice(i,1)[0])}function lt(n){var i,t;if(Object(n)!==n)return n;i=new n.constructor;for(t in n)n[h](t)&&(i[t]=lt(n[t]));return i}function n(t){var i,r;return n.is(t,"function")?hi?t():eve.on("raphael.DOMload",t):n.is(t,g)?n._engine.create[c](n,t.splice(0,3+n.is(t[0],v))).add(t):(i=Array.prototype.slice.call(arguments,0),n.is(i[i.length-1],"function"))?(r=i.pop(),hi?r.call(n._engine.create[c](n,i)):eve.on("raphael.DOMload",function(){r.call(n._engine.create[c](n,i))})):n._engine.create[c](n,arguments)}var ni,ti,ef,hf,ut,wt,tr,st,uu,k,ht,w,ei;n.version="2.1.0";n.eve=eve;var hi,ci=/[, ]+/,au={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},vu=/\{(\d+)\}/g,h="hasOwnProperty",t={doc:document,win:window},li={was:Object.prototype[h].call(t.win,"Raphael"),is:t.win.Raphael},lr=function(){this.ca=this.customAttributes={}},s,c="apply",f="concat",ai="createTouch"in t.doc,b="",at=" ",y=String,it="split",ar="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[it](at),vi={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},kt=y.prototype.toLowerCase,i=Math,e=i.max,l=i.min,a=i.abs,d=i.pow,p=i.PI,v="number",dt="string",g="array",yu=Object.prototype.toString,kf=n._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,pu=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,wu={NaN:1,Infinity:1,"-Infinity":1},bu=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,yi=i.round,o=parseFloat,et=parseInt,vr=y.prototype.toUpperCase,ku=n._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},pi=n._availableAnimAttrs={blur:v,"clip-rect":"csv",cx:v,cy:v,fill:"colour","fill-opacity":v,"font-size":v,height:v,opacity:v,path:"path",r:v,rx:v,ry:v,stroke:"colour","stroke-opacity":v,"stroke-width":v,transform:"transform",width:v,x:v,y:v},wi=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,du={hs:1,rg:1},gu=/,?([achlmqrstvxz]),?/gi,nf=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,tf=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,yr=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,df=n._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,yt={},gf=function(n,t){return n.key-t.key},rf=function(n,t){return o(n)-o(t)},uf=function(){},ff=function(n){return n},bi=n._rectPath=function(n,t,i,r,u){return u?[["M",n+u,t],["l",i-u*2,0],["a",u,u,0,0,1,u,u],["l",0,r-u*2],["a",u,u,0,0,1,-u,u],["l",u*2-i,0],["a",u,u,0,0,1,-u,-u],["l",0,u*2-r],["a",u,u,0,0,1,u,-u],["z"]]:[["M",n,t],["l",i,0],["l",0,r],["l",-i,0],["z"]]},pr=function(n,t,i,r){return r==null&&(r=i),[["M",n,t],["m",0,-r],["a",i,r,0,1,1,0,2*r],["a",i,r,0,1,1,0,-2*r],["z"]]},gt=n._getPath={path:function(n){return n.attr("path")},circle:function(n){var t=n.attrs;return pr(t.cx,t.cy,t.r)},ellipse:function(n){var t=n.attrs;return pr(t.cx,t.cy,t.rx,t.ry)},rect:function(n){var t=n.attrs;return bi(t.x,t.y,t.width,t.height,t.r)},image:function(n){var t=n.attrs;return bi(t.x,t.y,t.width,t.height)},text:function(n){var t=n._getBBox();return bi(t.x,t.y,t.width,t.height)}},ki=n.mapPath=function(n,t){if(!t)return n;var f,e,u,i,o,s,r;for(n=pt(n),u=0,o=n.length;u<o;u++)for(r=n[u],i=1,s=r.length;i<s;i+=2)f=t.x(r[i],r[i+1]),e=t.y(r[i],r[i+1]),r[i]=f,r[i+1]=e;return n};if(n._g=t,n.type=t.win.SVGAngle||t.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",n.type=="VML"){if(ni=t.doc.createElement("div"),ni.innerHTML='<v:shape adj="1"/>',ti=ni.firstChild,ti.style.behavior="url(#default#VML)",!ti||typeof ti.adj!="object")return n.type=b;ni=null}n.svg=!(n.vml=n.type=="VML");n._Paper=lr;n.fn=s=lr.prototype=n.prototype;n._id=0;n._oid=0;n.is=function(n,t){return(t=kt.call(t),t=="finite")?!wu[h](+n):t=="array"?n instanceof Array:t=="null"&&n===null||t==typeof n&&n!==null||t=="object"&&n===Object(n)||t=="array"&&Array.isArray&&Array.isArray(n)||yu.call(n).slice(8,-1).toLowerCase()==t};n.angle=function(t,r,u,f,e,o){if(e==null){var s=t-u,h=r-f;return!s&&!h?0:(180+i.atan2(-h,-s)*180/p+360)%360}return n.angle(t,r,e,o)-n.angle(u,f,e,o)};n.rad=function(n){return n%360*p/180};n.deg=function(n){return n*180/p%360};n.snapTo=function(t,i,r){var f,u;if(r=n.is(r,"finite")?r:10,n.is(t,g)){for(f=t.length;f--;)if(a(t[f]-i)<=r)return t[f]}else{if(t=+t,u=i%t,u<r)return i-u;if(u>t-r)return i-u+t}return i};ef=n.createUUID=function(n,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(n,t).toUpperCase()}}(/[xy]/g,function(n){var t=i.random()*16|0,r=n=="x"?t:t&3|8;return r.toString(16)});n.setWindow=function(i){eve("raphael.setWindow",n,t.win,i);t.win=i;t.doc=t.win.document;n._engine.initWin&&n._engine.initWin(t.win)};var ii=function(i){var e,u,f,o,r;if(n.vml){e=/^\s+|\s+$/g;try{f=new ActiveXObject("htmlfile");f.write("<body>");f.close();u=f.body}catch(s){u=createPopup().document.body}o=u.createTextRange();ii=nt(function(n){try{u.style.color=y(n).replace(e,b);var t=o.queryCommandValue("ForeColor");return t=(t&255)<<16|t&65280|(t&16711680)>>>16,"#"+("000000"+t.toString(16)).slice(-6)}catch(i){return"none"}})}else r=t.doc.createElement("i"),r.title="Raphal Colour Picker",r.style.display="none",t.doc.body.appendChild(r),ii=nt(function(n){return r.style.color=n,t.doc.defaultView.getComputedStyle(r,b).getPropertyValue("color")});return ii(i)},of=function(){return"hsb("+[this.h,this.s,this.b]+")"},sf=function(){return"hsl("+[this.h,this.s,this.l]+")"},wr=function(){return this.hex},br=function(t,i,r){if(i==null&&n.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(r=t.b,i=t.g,t=t.r),i==null&&n.is(t,dt)){var u=n.getRGB(t);t=u.r;i=u.g;r=u.b}return(t>1||i>1||r>1)&&(t/=255,i/=255,r/=255),[t,i,r]},kr=function(t,i,r,u){t*=255;i*=255;r*=255;var f={r:t,g:i,b:r,hex:n.rgb(t,i,r),toString:wr};return n.is(u,"finite")&&(f.opacity=u),f};n.color=function(t){var i;return n.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(i=n.hsb2rgb(t),t.r=i.r,t.g=i.g,t.b=i.b,t.hex=i.hex):n.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(i=n.hsl2rgb(t),t.r=i.r,t.g=i.g,t.b=i.b,t.hex=i.hex):(n.is(t,"string")&&(t=n.getRGB(t)),n.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(i=n.rgb2hsl(t),t.h=i.h,t.s=i.s,t.l=i.l,i=n.rgb2hsb(t),t.v=i.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=wr,t};n.hsb2rgb=function(n,t,i,r){this.is(n,"object")&&"h"in n&&"s"in n&&"b"in n&&(i=n.b,t=n.s,n=n.h,r=n.o);n*=360;var e,o,s,f,u;return n=n%360/60,u=i*t,f=u*(1-a(n%2-1)),e=o=s=i-u,n=~~n,e+=[u,f,0,0,f,u][n],o+=[f,u,u,f,0,0][n],s+=[0,0,f,u,u,f][n],kr(e,o,s,r)};n.hsl2rgb=function(n,t,i,r){this.is(n,"object")&&"h"in n&&"s"in n&&"l"in n&&(i=n.l,t=n.s,n=n.h);(n>1||t>1||i>1)&&(n/=360,t/=100,i/=100);n*=360;var e,o,s,f,u;return n=n%360/60,u=2*t*(i<.5?i:1-i),f=u*(1-a(n%2-1)),e=o=s=i-u/2,n=~~n,e+=[u,f,0,0,f,u][n],o+=[f,u,u,f,0,0][n],s+=[0,0,f,u,u,f][n],kr(e,o,s,r)};n.rgb2hsb=function(n,t,i){i=br(n,t,i);n=i[0];t=i[1];i=i[2];var f,o,u,r;return u=e(n,t,i),r=u-l(n,t,i),f=r==0?null:u==n?(t-i)/r:u==t?(i-n)/r+2:(n-t)/r+4,f=(f+360)%6/6,o=r==0?0:r/u,{h:f,s:o,b:u,toString:of}};n.rgb2hsl=function(n,t,i){i=br(n,t,i);n=i[0];t=i[1];i=i[2];var o,h,u,f,s,r;return f=e(n,t,i),s=l(n,t,i),r=f-s,o=r==0?null:f==n?(t-i)/r:f==t?(i-n)/r+2:(n-t)/r+4,o=(o+360)%6/6,u=(f+s)/2,h=r==0?0:u<.5?r/(2*u):r/(2-2*u),{h:o,s:h,l:u,toString:sf}};n._path2string=function(){return this.join(",").replace(gu,"$1")};hf=n._preload=function(n,i){var r=t.doc.createElement("img");r.style.cssText="position:absolute;left:-9999em;top:-9999em";r.onload=function(){i.call(this);this.onload=null;t.doc.body.removeChild(this)};r.onerror=function(){t.doc.body.removeChild(this)};t.doc.body.appendChild(r);r.src=n};n.getRGB=nt(function(t){if(!t||!!((t=y(t)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:bt};if(t=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:bt};du[h](t.toLowerCase().substring(0,2))||t.charAt()=="#"||(t=ii(t));var u,f,e,s,c,i,r=t.match(pu);return r?(r[2]&&(e=et(r[2].substring(5),16),f=et(r[2].substring(3,5),16),u=et(r[2].substring(1,3),16)),r[3]&&(e=et((c=r[3].charAt(3))+c,16),f=et((c=r[3].charAt(2))+c,16),u=et((c=r[3].charAt(1))+c,16)),r[4]&&(i=r[4][it](wi),u=o(i[0]),i[0].slice(-1)=="%"&&(u*=2.55),f=o(i[1]),i[1].slice(-1)=="%"&&(f*=2.55),e=o(i[2]),i[2].slice(-1)=="%"&&(e*=2.55),r[1].toLowerCase().slice(0,4)=="rgba"&&(s=o(i[3])),i[3]&&i[3].slice(-1)=="%"&&(s/=100)),r[5])?(i=r[5][it](wi),u=o(i[0]),i[0].slice(-1)=="%"&&(u*=2.55),f=o(i[1]),i[1].slice(-1)=="%"&&(f*=2.55),e=o(i[2]),i[2].slice(-1)=="%"&&(e*=2.55),(i[0].slice(-3)=="deg"||i[0].slice(-1)=="")&&(u/=360),r[1].toLowerCase().slice(0,4)=="hsba"&&(s=o(i[3])),i[3]&&i[3].slice(-1)=="%"&&(s/=100),n.hsb2rgb(u,f,e,s)):r[6]?(i=r[6][it](wi),u=o(i[0]),i[0].slice(-1)=="%"&&(u*=2.55),f=o(i[1]),i[1].slice(-1)=="%"&&(f*=2.55),e=o(i[2]),i[2].slice(-1)=="%"&&(e*=2.55),(i[0].slice(-3)=="deg"||i[0].slice(-1)=="")&&(u/=360),r[1].toLowerCase().slice(0,4)=="hsla"&&(s=o(i[3])),i[3]&&i[3].slice(-1)=="%"&&(s/=100),n.hsl2rgb(u,f,e,s)):(r={r:u,g:f,b:e,toString:bt},r.hex="#"+(16777216|e|f<<8|u<<16).toString(16).slice(1),n.is(s,"finite")&&(r.opacity=s),r):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:bt}},n);n.hsb=nt(function(t,i,r){return n.hsb2rgb(t,i,r).hex});n.hsl=nt(function(t,i,r){return n.hsl2rgb(t,i,r).hex});n.rgb=nt(function(n,t,i){return"#"+(16777216|i|t<<8|n<<16).toString(16).slice(1)});n.getColor=function(n){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:n||.75},i=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),i.hex};n.getColor.reset=function(){delete this.start};n.parsePathString=function(t){var r,u,i;return t?(r=ut(t),r.arr)?tt(r.arr):(u={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[],n.is(t,g)&&n.is(t[0],g)&&(i=tt(t)),i.length||y(t).replace(nf,function(n,t,r){var e=[],o=t.toLowerCase();if(r.replace(yr,function(n,t){t&&e.push(+t)}),o=="m"&&e.length>2&&(i.push([t][f](e.splice(0,2))),o="l",t=t=="m"?"l":"L"),o=="r")i.push([t][f](e));else while(e.length>=u[o])if(i.push([t][f](e.splice(0,u[o]))),!u[o])break}),i.toString=n._path2string,r.arr=tt(i),i):null};n.parseTransformString=nt(function(t){if(!t)return null;var i=[];return n.is(t,g)&&n.is(t[0],g)&&(i=tt(t)),i.length||y(t).replace(tf,function(n,t,r){var u=[],e=kt.call(t);r.replace(yr,function(n,t){t&&u.push(+t)});i.push([t][f](u))}),i.toString=n._path2string,i});ut=function(n){var t=ut.ps=ut.ps||{};return t[n]?t[n].sleep=100:t[n]={sleep:100},setTimeout(function(){for(var i in t)t[h](i)&&i!=n&&(t[i].sleep--,!t[i].sleep&&delete t[i])}),t[n]};n.findDotsAtSegment=function(n,t,r,u,f,e,o,s,h){var c=1-h,b=d(c,3),k=d(c,2),l=h*h,g=l*h,tt=b*n+k*3*h*r+c*3*h*h*f+g*o,it=b*t+k*3*h*u+c*3*h*h*e+g*s,a=n+2*h*(r-n)+l*(f-2*r+n),v=t+2*h*(u-t)+l*(e-2*u+t),y=r+2*h*(f-r)+l*(o-2*f+r),w=u+2*h*(e-u)+l*(s-2*e+u),rt=c*n+h*r,ut=c*t+h*u,ft=c*f+h*o,et=c*e+h*s,nt=90-i.atan2(a-y,v-w)*180/p;return(a>y||v<w)&&(nt+=180),{x:tt,y:it,m:{x:a,y:v},n:{x:y,y:w},start:{x:rt,y:ut},end:{x:ft,y:et},alpha:nt}};n.bezierBBox=function(t,i,r,u,f,e,o,s){n.is(t,"array")||(t=[t,i,r,u,f,e,o,s]);var h=tu.apply(null,t);return{x:h.min.x,y:h.min.y,x2:h.max.x,y2:h.max.y,width:h.max.x-h.min.x,height:h.max.y-h.min.y}};n.isPointInsideBBox=function(n,t,i){return t>=n.x&&t<=n.x2&&i>=n.y&&i<=n.y2};n.isBBoxIntersect=function(t,i){var r=n.isPointInsideBBox;return r(i,t.x,t.y)||r(i,t.x2,t.y)||r(i,t.x,t.y2)||r(i,t.x2,t.y2)||r(t,i.x,i.y)||r(t,i.x2,i.y)||r(t,i.x,i.y2)||r(t,i.x2,i.y2)||(t.x<i.x2&&t.x>i.x||i.x<t.x2&&i.x>t.x)&&(t.y<i.y2&&t.y>i.y||i.y<t.y2&&i.y>t.y)};n.pathIntersection=function(n,t){return oi(n,t)};n.pathIntersectionNumber=function(n,t){return oi(n,t,1)};n.isPointInsidePath=function(t,i,r){var u=n.pathBBox(t);return n.isPointInsideBBox(u,i,r)&&oi(t,[["M",i,r],["H",u.x2+10]],1)%2==1};n._removedFactory=function(n){return function(){eve("raphael.log",null,"Raphal: you are calling to method "+n+" of removed object",n)}};var di=n.pathBBox=function(n){var a=ut(n),h,v,u;if(a.bbox)return lt(a.bbox);if(!n)return{x:0,y:0,width:0,height:0,x2:0,y2:0};n=pt(n);var o=0,s=0,i=[],r=[],t;for(h=0,v=n.length;h<v;h++)t=n[h],t[0]=="M"?(o=t[1],s=t[2],i.push(o),r.push(s)):(u=tu(o,s,t[1],t[2],t[3],t[4],t[5],t[6]),i=i[f](u.min.x,u.max.x),r=r[f](u.min.y,u.max.y),o=t[5],s=t[6]);var y=l[c](0,i),p=l[c](0,r),w=e[c](0,i),b=e[c](0,r),k={x:y,y:p,x2:w,y2:b,width:w-y,height:b-p};return a.bbox=lt(k),k},tt=function(t){var i=lt(t);return i.toString=n._path2string,i},cf=n._pathToRelative=function(t){var v=ut(t),u,p,f,i,s,w,h,b,c;if(v.rel)return tt(v.rel);n.is(t,g)&&n.is(t&&t[0],g)||(t=n.parsePathString(t));var r=[],o=0,e=0,l=0,a=0,y=0;for(t[0][0]=="M"&&(o=t[0][1],e=t[0][2],l=o,a=e,y++,r.push(["M",o,e])),u=y,p=t.length;u<p;u++){if(f=r[u]=[],i=t[u],i[0]!=kt.call(i[0])){f[0]=kt.call(i[0]);switch(f[0]){case"a":f[1]=i[1];f[2]=i[2];f[3]=i[3];f[4]=i[4];f[5]=i[5];f[6]=+(i[6]-o).toFixed(3);f[7]=+(i[7]-e).toFixed(3);break;case"v":f[1]=+(i[1]-e).toFixed(3);break;case"m":l=i[1];a=i[2];default:for(s=1,w=i.length;s<w;s++)f[s]=+(i[s]-(s%2?o:e)).toFixed(3)}}else for(f=r[u]=[],i[0]=="m"&&(l=i[1]+o,a=i[2]+e),h=0,b=i.length;h<b;h++)r[u][h]=i[h];c=r[u].length;switch(r[u][0]){case"z":o=l;e=a;break;case"h":o+=+r[u][c-1];break;case"v":e+=+r[u][c-1];break;default:o+=+r[u][c-2];e+=+r[u][c-1]}}return r.toString=n._path2string,v.rel=tt(r),r},dr=n._pathToAbsolute=function(t){var p=ut(t),w,i,r,v,k,h,o,y,c,d;if(p.abs)return tt(p.abs);if(n.is(t,g)&&n.is(t&&t[0],g)||(t=n.parsePathString(t)),!t||!t.length)return[["M",0,0]];var s=[],u=0,e=0,l=0,a=0,b=0;for(t[0][0]=="M"&&(u=+t[0][1],e=+t[0][2],l=u,a=e,b++,s[0]=["M",u,e]),w=t.length==3&&t[0][0]=="M"&&t[1][0].toUpperCase()=="R"&&t[2][0].toUpperCase()=="Z",v=b,k=t.length;v<k;v++){if(s.push(i=[]),r=t[v],r[0]!=vr.call(r[0])){i[0]=vr.call(r[0]);switch(i[0]){case"A":i[1]=r[1];i[2]=r[2];i[3]=r[3];i[4]=r[4];i[5]=r[5];i[6]=+(r[6]+u);i[7]=+(r[7]+e);break;case"V":i[1]=+r[1]+e;break;case"H":i[1]=+r[1]+u;break;case"R":for(h=[u,e][f](r.slice(1)),o=2,y=h.length;o<y;o++)h[o]=+h[o]+u,h[++o]=+h[o]+e;s.pop();s=s[f](cr(h,w));break;case"M":l=+r[1]+u;a=+r[2]+e;default:for(o=1,y=r.length;o<y;o++)i[o]=+r[o]+(o%2?u:e)}}else if(r[0]=="R")h=[u,e][f](r.slice(1)),s.pop(),s=s[f](cr(h,w)),i=["R"][f](r.slice(-2));else for(c=0,d=r.length;c<d;c++)i[c]=r[c];switch(i[0]){case"Z":u=l;e=a;break;case"H":u=i[1];break;case"V":e=i[1];break;case"M":l=i[i.length-2];a=i[i.length-1];default:u=i[i.length-2];e=i[i.length-1]}}return s.toString=n._path2string,p.abs=tt(s),s},ri=function(n,t,i,r){return[n,t,i,r,i,r]},gr=function(n,t,i,r,u,f){var e=1/3,o=2/3;return[e*n+o*i,e*t+o*r,e*u+o*i,e*f+o*r,u,f]},nu=function(n,t,r,u,e,o,s,h,c,l){var at=p*120/180,et=p/180*(+e||0),w=[],g,ot=nt(function(n,t,r){var u=n*i.cos(r)-t*i.sin(r),f=n*i.sin(r)+t*i.cos(r);return{x:u,y:f}}),st,lt,b,gt;if(l)y=l[0],v=l[1],ut=l[2],ft=l[3];else{g=ot(n,t,-et);n=g.x;t=g.y;g=ot(h,c,-et);h=g.x;c=g.y;var oi=i.cos(p/180*e),si=i.sin(p/180*e),k=(n-h)/2,d=(t-c)/2,rt=k*k/(r*r)+d*d/(u*u);rt>1&&(rt=i.sqrt(rt),r=rt*r,u=rt*u);var ht=r*r,ct=u*u,vt=(o==s?-1:1)*i.sqrt(a((ht*ct-ht*d*d-ct*k*k)/(ht*d*d+ct*k*k))),ut=vt*r*d/u+(n+h)/2,ft=vt*-u*k/r+(t+c)/2,y=i.asin(((t-ft)/u).toFixed(9)),v=i.asin(((c-ft)/u).toFixed(9));y=n<ut?p-y:y;v=h<ut?p-v:v;y<0&&(y=p*2+y);v<0&&(v=p*2+v);s&&y>v&&(y=y-p*2);!s&&v>y&&(v=v-p*2)}if(st=v-y,a(st)>at){var ni=v,ti=h,ii=c;v=y+at*(s&&v>y?1:-1);h=ut+r*i.cos(v);c=ft+u*i.sin(v);w=nu(h,c,r,u,e,0,s,ti,ii,[v,ni,ut,ft])}st=v-y;var ri=i.cos(y),ui=i.sin(y),fi=i.cos(v),ei=i.sin(v),yt=i.tan(st/4),pt=4/3*r*yt,wt=4/3*u*yt,bt=[n,t],tt=[n+pt*ui,t-wt*ri],kt=[h+pt*ei,c-wt*fi],dt=[h,c];if(tt[0]=2*bt[0]-tt[0],tt[1]=2*bt[1]-tt[1],l)return[tt,kt,dt][f](w);for(w=[tt,kt,dt][f](w).join()[it](","),lt=[],b=0,gt=w.length;b<gt;b++)lt[b]=b%2?ot(w[b-1],w[b],et).y:ot(w[b],w[b+1],et).x;return lt},ui=function(n,t,i,r,u,f,e,o,s){var h=1-s;return{x:d(h,3)*n+d(h,2)*3*s*i+h*3*s*s*u+d(s,3)*e,y:d(h,3)*t+d(h,2)*3*s*r+h*3*s*s*f+d(s,3)*o}},tu=nt(function(n,t,r,u,f,o,s,h){var b=f-2*r+n-(s-2*f+r),v=2*(r-n)-2*(f-r),g=n-r,p=(-v+i.sqrt(v*v-4*b*g))/2/b,w=(-v-i.sqrt(v*v-4*b*g))/2/b,k=[t,h],d=[n,s],y;return a(p)>"1e12"&&(p=.5),a(w)>"1e12"&&(w=.5),p>0&&p<1&&(y=ui(n,t,r,u,f,o,s,h,p),d.push(y.x),k.push(y.y)),w>0&&w<1&&(y=ui(n,t,r,u,f,o,s,h,w),d.push(y.x),k.push(y.y)),b=o-2*u+t-(h-2*o+u),v=2*(u-t)-2*(o-u),g=t-u,p=(-v+i.sqrt(v*v-4*b*g))/2/b,w=(-v-i.sqrt(v*v-4*b*g))/2/b,a(p)>"1e12"&&(p=.5),a(w)>"1e12"&&(w=.5),p>0&&p<1&&(y=ui(n,t,r,u,f,o,s,h,p),d.push(y.x),k.push(y.y)),w>0&&w<1&&(y=ui(n,t,r,u,f,o,s,h,w),d.push(y.x),k.push(y.y)),{min:{x:l[c](0,d),y:l[c](0,k)},max:{x:e[c](0,d),y:e[c](0,k)}}}),pt=n._path2curve=nt(function(n,t){var w=!t&&ut(n),r,v;if(!t&&w.curve)return tt(w.curve);var u=dr(n),i=t&&dr(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b=function(n,t){var i,r;if(!n)return["C",t.x,t.y,t.x,t.y,t.x,t.y];n[0]in{T:1,Q:1}||(t.qx=t.qy=null);switch(n[0]){case"M":t.X=n[1];t.Y=n[2];break;case"A":n=["C"][f](nu[c](0,[t.x,t.y][f](n.slice(1))));break;case"S":i=t.x+(t.x-(t.bx||t.x));r=t.y+(t.y-(t.by||t.y));n=["C",i,r][f](n.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x));t.qy=t.y+(t.y-(t.qy||t.y));n=["C"][f](gr(t.x,t.y,t.qx,t.qy,n[1],n[2]));break;case"Q":t.qx=n[1];t.qy=n[2];n=["C"][f](gr(t.x,t.y,n[1],n[2],n[3],n[4]));break;case"L":n=["C"][f](ri(t.x,t.y,n[1],n[2]));break;case"H":n=["C"][f](ri(t.x,t.y,n[1],t.y));break;case"V":n=["C"][f](ri(t.x,t.y,t.x,n[1]));break;case"Z":n=["C"][f](ri(t.x,t.y,t.X,t.Y))}return n},k=function(n,t){if(n[t].length>7){n[t].shift();for(var r=n[t];r.length;)n.splice(t++,0,["C"][f](r.splice(0,6)));n.splice(t,1);v=e(u.length,i&&i.length||0)}},d=function(n,t,r,f,o){n&&t&&n[o][0]=="M"&&t[o][0]!="M"&&(t.splice(o,0,["M",f.x,f.y]),r.bx=0,r.by=0,r.x=n[o][1],r.y=n[o][2],v=e(u.length,i&&i.length||0))};for(r=0,v=e(u.length,i&&i.length||0);r<v;r++){u[r]=b(u[r],s);k(u,r);i&&(i[r]=b(i[r],h));i&&k(i,r);d(u,i,s,h,r);d(i,u,h,s,r);var l=u[r],a=i&&i[r],y=l.length,p=i&&a.length;s.x=l[y-2];s.y=l[y-1];s.bx=o(l[y-4])||s.x;s.by=o(l[y-3])||s.y;h.bx=i&&(o(a[p-4])||h.x);h.by=i&&(o(a[p-3])||h.y);h.x=i&&a[p-2];h.y=i&&a[p-1]}return i||(w.curve=tt(u)),i?[u,i]:u},null,tt),ne=n._parseDots=nt(function(t){for(var r=[],f,h,c,e,u,l,i=0,s=t.length;i<s;i++){if(f={},h=t[i].match(/^([^:]*):?([\d\.]*)/),f.color=n.getRGB(h[1]),f.color.error)return null;f.color=f.color.hex;h[2]&&(f.offset=h[2]+"%");r.push(f)}for(i=1,s=r.length-1;i<s;i++)if(!r[i].offset){for(c=o(r[i-1].offset||0),e=0,u=i+1;u<s;u++)if(r[u].offset){e=r[u].offset;break}for(e||(e=100,u=s),e=o(e),l=(e-c)/(u-i+1);i<u;i++)c+=l,r[i].offset=c+"%"}return r}),fi=n._tear=function(n,t){n==t.top&&(t.top=n.prev);n==t.bottom&&(t.bottom=n.next);n.next&&(n.next.prev=n.prev);n.prev&&(n.prev.next=n.next)},te=n._tofront=function(n,t){t.top!==n&&(fi(n,t),n.next=null,n.prev=t.top,t.top.next=n,t.top=n)},ie=n._toback=function(n,t){t.bottom!==n&&(fi(n,t),n.next=t.bottom,n.prev=null,t.bottom.prev=n,t.bottom=n)},re=n._insertafter=function(n,t,i){fi(n,i);t==i.top&&(i.top=n);t.next&&(t.next.prev=n);n.next=t.next;n.prev=t;t.next=n},ue=n._insertbefore=function(n,t,i){fi(n,i);t==i.bottom&&(i.bottom=n);t.prev&&(t.prev.next=n);n.prev=t.prev;t.prev=n;n.next=t},lf=n.toMatrix=function(n,t){var r=di(n),i={_:{transform:b},getBBox:function(){return r}};return iu(i,t),i.matrix},fe=n.transformPath=function(n,t){return ki(n,lf(n,t))},iu=n._extractTransform=function(t,i){var k,tt;if(i==null)return t._.transform;i=y(i).replace(/\.{3}|\u2026/g,t._.transform||b);var a=n.parseTransformString(i),v=0,g=0,nt=0,p=1,w=1,e=t._,u=new ft;if(e.transform=a||[],a)for(k=0,tt=a.length;k<tt;k++){var r=a[k],o=r.length,l=y(r[0]).toLowerCase(),d=r[0]!=l,s=d?u.invert():0,it,rt,h,c,f;l=="t"&&o==3?d?(it=s.x(0,0),rt=s.y(0,0),h=s.x(r[1],r[2]),c=s.y(r[1],r[2]),u.translate(h-it,c-rt)):u.translate(r[1],r[2]):l=="r"?o==2?(f=f||t.getBBox(1),u.rotate(r[1],f.x+f.width/2,f.y+f.height/2),v+=r[1]):o==4&&(d?(h=s.x(r[2],r[3]),c=s.y(r[2],r[3]),u.rotate(r[1],h,c)):u.rotate(r[1],r[2],r[3]),v+=r[1]):l=="s"?o==2||o==3?(f=f||t.getBBox(1),u.scale(r[1],r[o-1],f.x+f.width/2,f.y+f.height/2),p*=r[1],w*=r[o-1]):o==5&&(d?(h=s.x(r[3],r[4]),c=s.y(r[3],r[4]),u.scale(r[1],r[2],h,c)):u.scale(r[1],r[2],r[3],r[4]),p*=r[1],w*=r[2]):l=="m"&&o==7&&u.add(r[1],r[2],r[3],r[4],r[5],r[6]);e.dirtyT=1;t.matrix=u}t.matrix=u;e.sx=p;e.sy=w;e.deg=v;e.dx=g=u.e;e.dy=nt=u.f;p==1&&w==1&&!v&&e.bbox?(e.bbox.x+=+g,e.bbox.y+=+nt):e.dirtyT=1},ru=function(n){var t=n[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return n.length==4?[t,0,n[2],n[3]]:[t,0];case"s":return n.length==5?[t,1,1,n[3],n[4]]:n.length==3?[t,1,1]:[t,1]}},af=n._equaliseTransform=function(t,i){i=y(i).replace(/\.{3}|\u2026/g,t);t=n.parseTransformString(t)||[];i=n.parseTransformString(i)||[];for(var l=e(t.length,i.length),s=[],h=[],u=0,f,c,r,o;u<l;u++){if(r=t[u]||ru(i[u]),o=i[u]||ru(r),r[0]!=o[0]||r[0].toLowerCase()=="r"&&(r[2]!=o[2]||r[3]!=o[3])||r[0].toLowerCase()=="s"&&(r[3]!=o[3]||r[4]!=o[4]))return;for(s[u]=[],h[u]=[],f=0,c=e(r.length,o.length);f<c;f++)f in r&&(s[u][f]=r[f]),f in o&&(h[u][f]=o[f])}return{from:s,to:h}};n._getContainer=function(i,r,u,f){var e;return e=f==null&&!n.is(i,"object")?t.doc.getElementById(i):i,e!=null?e.tagName?r==null?{container:e,width:e.style.pixelWidth||e.offsetWidth,height:e.style.pixelHeight||e.offsetHeight}:{container:e,width:r,height:u}:{container:1,x:i,y:r,width:u,height:f}:void 0};n.pathToRelative=cf;n._engine={};n.path2curve=pt;n.matrix=function(n,t,i,r,u,f){return new ft(n,t,i,r,u,f)},function(t){function u(n){var t=i.sqrt(r(n));n[0]&&(n[0]/=t);n[1]&&(n[1]/=t)}function r(n){return n[0]*n[0]+n[1]*n[1]}t.add=function(n,t,i,r,u,f){var e=[[],[],[]],a=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],l=[[n,i,u],[t,r,f],[0,0,1]],o,s,h,c;for(n&&n instanceof ft&&(l=[[n.a,n.c,n.e],[n.b,n.d,n.f],[0,0,1]]),o=0;o<3;o++)for(s=0;s<3;s++){for(c=0,h=0;h<3;h++)c+=a[o][h]*l[h][s];e[o][s]=c}this.a=e[0][0];this.b=e[1][0];this.c=e[0][1];this.d=e[1][1];this.e=e[0][2];this.f=e[1][2]};t.invert=function(){var n=this,t=n.a*n.d-n.b*n.c;return new ft(n.d/t,-n.b/t,-n.c/t,n.a/t,(n.c*n.f-n.d*n.e)/t,(n.b*n.e-n.a*n.f)/t)};t.clone=function(){return new ft(this.a,this.b,this.c,this.d,this.e,this.f)};t.translate=function(n,t){this.add(1,0,0,1,n,t)};t.scale=function(n,t,i,r){t==null&&(t=n);(i||r)&&this.add(1,0,0,1,i,r);this.add(n,0,0,t,0,0);(i||r)&&this.add(1,0,0,1,-i,-r)};t.rotate=function(t,r,u){t=n.rad(t);r=r||0;u=u||0;var f=+i.cos(t).toFixed(9),e=+i.sin(t).toFixed(9);this.add(f,e,-e,f,r,u);this.add(1,0,0,1,-r,-u)};t.x=function(n,t){return n*this.a+t*this.c+this.e};t.y=function(n,t){return n*this.b+t*this.d+this.f};t.get=function(n){return+this[y.fromCharCode(97+n)].toFixed(4)};t.toString=function(){return n.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()};t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};t.split=function(){var t={},f,e,o;return t.dx=this.e,t.dy=this.f,f=[[this.a,this.c],[this.b,this.d]],t.scalex=i.sqrt(r(f[0])),u(f[0]),t.shear=f[0][0]*f[1][0]+f[0][1]*f[1][1],f[1]=[f[1][0]-f[0][0]*t.shear,f[1][1]-f[0][1]*t.shear],t.scaley=i.sqrt(r(f[1])),u(f[1]),t.shear/=t.scaley,e=-f[0][1],o=f[1][1],o<0?(t.rotate=n.deg(i.acos(o)),e<0&&(t.rotate=360-t.rotate)):t.rotate=n.deg(i.asin(e)),t.isSimple=!+t.shear.toFixed(9)&&(t.scalex.toFixed(9)==t.scaley.toFixed(9)||!t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t};t.toTransformString=function(n){var t=n||this[it]();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:b)+(t.scalex!=1||t.scaley!=1?"s"+[t.scalex,t.scaley,0,0]:b)+(t.rotate?"r"+[t.rotate,0,0]:b)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(ft.prototype);wt=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);s.safari=navigator.vendor=="Apple Computer, Inc."&&(wt&&wt[1]<4||navigator.platform.slice(0,2)=="iP")||navigator.vendor=="Google Inc."&&wt&&wt[1]<8?function(){var n=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){n.remove()})}:uf;var vf=function(){this.returnValue=!1},yf=function(){return this.originalEvent.preventDefault()},pf=function(){this.cancelBubble=!0},wf=function(){return this.originalEvent.stopPropagation()},bf=function(){return t.doc.addEventListener?function(n,i,r,u){var f=ai&&vi[i]?vi[i]:i,e=function(f){var c=t.doc.documentElement.scrollTop||t.doc.body.scrollTop,l=t.doc.documentElement.scrollLeft||t.doc.body.scrollLeft,a=f.clientX+l,v=f.clientY+c,e,o,s;if(ai&&vi[h](i))for(e=0,o=f.targetTouches&&f.targetTouches.length;e<o;e++)if(f.targetTouches[e].target==n){s=f;f=f.targetTouches[e];f.originalEvent=s;f.preventDefault=yf;f.stopPropagation=wf;break}return r.call(u,f,a,v)};return n.addEventListener(f,e,!1),function(){return n.removeEventListener(f,e,!1),!0}}:t.doc.attachEvent?function(n,i,r,u){var f=function(n){n=n||t.win.event;var i=t.doc.documentElement.scrollTop||t.doc.body.scrollTop,f=t.doc.documentElement.scrollLeft||t.doc.body.scrollLeft,e=n.clientX+f,o=n.clientY+i;return n.preventDefault=n.preventDefault||vf,n.stopPropagation=n.stopPropagation||pf,r.call(u,n,e,o)};return n.attachEvent("on"+i,f),function(){return n.detachEvent("on"+i,f),!0}}:void 0}(),ot=[],gi=function(n){for(var u=n.clientX,f=n.clientY,a=t.doc.documentElement.scrollTop||t.doc.body.scrollTop,v=t.doc.documentElement.scrollLeft||t.doc.body.scrollLeft,i,c=ot.length,o,e;c--;){if(i=ot[c],ai){for(o=n.touches.length;o--;)if(e=n.touches[o],e.identifier==i.el._drag.id){u=e.clientX;f=e.clientY;(n.originalEvent?n.originalEvent:n).preventDefault();break}}else n.preventDefault();var r=i.el.node,s,l=r.nextSibling,h=r.parentNode,y=r.style.display;t.win.opera&&h.removeChild(r);r.style.display="none";s=i.el.paper.getElementByPoint(u,f);r.style.display=y;t.win.opera&&(l?h.insertBefore(r,l):h.appendChild(r));s&&eve("raphael.drag.over."+i.el.id,i.el,s);u+=v;f+=a;eve("raphael.drag.move."+i.el.id,i.move_scope||i.el,u-i.el._drag.x,f-i.el._drag.y,u,f,n)}},nr=function(t){n.unmousemove(gi).unmouseup(nr);for(var r=ot.length,i;r--;)i=ot[r],i.el._drag={},eve("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,t);ot=[]},u=n.el={};for(tr=ar.length;tr--;)(function(i){n[i]=u[i]=function(r,u){return n.is(r,"function")&&(this.events=this.events||[],this.events.push({name:i,f:r,unbind:bf(this.shape||this.node||t.doc,i,r,u||this)})),this};n["un"+i]=u["un"+i]=function(n){for(var t=this.events||[],r=t.length;r--;)if(t[r].name==i&&t[r].f==n)return t[r].unbind(),t.splice(r,1),!t.length&&delete this.events,this;return this}})(ar[tr]);u.data=function(t,i){var u=yt[this.id]=yt[this.id]||{},r;if(arguments.length==1){if(n.is(t,"object")){for(r in t)t[h](r)&&this.data(r,t[r]);return this}return eve("raphael.data.get."+this.id,this,u[t],t),u[t]}return u[t]=i,eve("raphael.data.set."+this.id,this,i,t),this};u.removeData=function(n){return n==null?yt[this.id]={}:yt[this.id]&&delete yt[this.id][n],this};u.hover=function(n,t,i,r){return this.mouseover(n,i).mouseout(t,r||i)};u.unhover=function(n,t){return this.unmouseover(n).unmouseout(t)};st=[];u.drag=function(i,r,u,f,e,o){function s(s){(s.originalEvent||s).preventDefault();var h=t.doc.documentElement.scrollTop||t.doc.body.scrollTop,c=t.doc.documentElement.scrollLeft||t.doc.body.scrollLeft;this._drag.x=s.clientX+c;this._drag.y=s.clientY+h;this._drag.id=s.identifier;!ot.length&&n.mousemove(gi).mouseup(nr);ot.push({el:this,move_scope:f,start_scope:e,end_scope:o});r&&eve.on("raphael.drag.start."+this.id,r);i&&eve.on("raphael.drag.move."+this.id,i);u&&eve.on("raphael.drag.end."+this.id,u);eve("raphael.drag.start."+this.id,e||f||this,s.clientX+c,s.clientY+h,s)}return this._drag={},st.push({el:this,start:s}),this.mousedown(s),this};u.onDragOver=function(n){n?eve.on("raphael.drag.over."+this.id,n):eve.unbind("raphael.drag.over."+this.id)};u.undrag=function(){for(var t=st.length;t--;)st[t].el==this&&(this.unmousedown(st[t].start),st.splice(t,1),eve.unbind("raphael.drag.*."+this.id));st.length||n.unmousemove(gi).unmouseup(nr)};s.circle=function(t,i,r){var u=n._engine.circle(this,t||0,i||0,r||0);return this.__set__&&this.__set__.push(u),u};s.rect=function(t,i,r,u,f){var e=n._engine.rect(this,t||0,i||0,r||0,u||0,f||0);return this.__set__&&this.__set__.push(e),e};s.ellipse=function(t,i,r,u){var f=n._engine.ellipse(this,t||0,i||0,r||0,u||0);return this.__set__&&this.__set__.push(f),f};s.path=function(t){!t||n.is(t,dt)||n.is(t[0],g)||(t+=b);var i=n._engine.path(n.format[c](n,arguments),this);return this.__set__&&this.__set__.push(i),i};s.image=function(t,i,r,u,f){var e=n._engine.image(this,t||"about:blank",i||0,r||0,u||0,f||0);return this.__set__&&this.__set__.push(e),e};s.text=function(t,i,r){var u=n._engine.text(this,t||0,i||0,y(r));return this.__set__&&this.__set__.push(u),u};s.set=function(t){n.is(t,"array")||(t=Array.prototype.splice.call(arguments,0,arguments.length));var i=new ht(t);return this.__set__&&this.__set__.push(i),i};s.setStart=function(n){this.__set__=n||this.set()};s.setFinish=function(){var n=this.__set__;return delete this.__set__,n};s.setSize=function(t,i){return n._engine.setSize.call(this,t,i)};s.setViewBox=function(t,i,r,u,f){return n._engine.setViewBox.call(this,t,i,r,u,f)};s.top=s.bottom=null;s.raphael=n;uu=function(n){var u=n.getBoundingClientRect(),f=n.ownerDocument,i=f.body,r=f.documentElement,e=r.clientTop||i.clientTop||0,o=r.clientLeft||i.clientLeft||0,s=u.top+(t.win.pageYOffset||r.scrollTop||i.scrollTop)-e,h=u.left+(t.win.pageXOffset||r.scrollLeft||i.scrollLeft)-o;return{y:s,x:h}};s.getElementByPoint=function(n,i){var o=this,f=o.canvas,r=t.doc.elementFromPoint(n,i),s,u,e;if(t.win.opera&&r.tagName=="svg"&&(s=uu(f),u=f.createSVGRect(),u.x=n-s.x,u.y=i-s.y,u.width=u.height=1,e=f.getIntersectionList(u,null),e.length&&(r=e[e.length-1])),!r)return null;while(r.parentNode&&r!=f.parentNode&&!r.raphael)r=r.parentNode;return r==o.canvas.parentNode&&(r=f),r=r&&r.raphael?o.getById(r.raphaelid):null,r};s.getById=function(n){for(var t=this.bottom;t;){if(t.id==n)return t;t=t.next}return null};s.forEach=function(n,t){for(var i=this.bottom;i;){if(n.call(t,i)===!1)return this;i=i.next}return this};s.getElementsByPoint=function(n,t){var i=this.set();return this.forEach(function(r){r.isPointInside(n,t)&&i.push(r)}),i};u.isPointInside=function(t,i){var r=this.realPath=this.realPath||gt[this.type](this);return n.isPointInsidePath(r,t,i)};u.getBBox=function(n){if(this.removed)return{};var t=this._;return n?((t.dirty||!t.bboxwt)&&(this.realPath=gt[this.type](this),t.bboxwt=di(this.realPath),t.bboxwt.toString=sr,t.dirty=0),lt(t.bboxwt)):((t.dirty||t.dirtyT||!t.bbox)&&((t.dirty||!this.realPath)&&(t.bboxwt=0,this.realPath=gt[this.type](this)),t.bbox=di(ki(this.realPath,this.matrix)),t.bbox.toString=sr,t.dirty=t.dirtyT=0),lt(t.bbox))};u.getBBoxWOTransform=function(){return this.getBBox(1)};u.clone=function(){if(this.removed)return null;var n=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(n),n};u.glow=function(n){var r;if(this.type=="text")return null;n=n||{};var t={width:(n.width||10)+(+this.attr("stroke-width")||1),fill:n.fill||!1,opacity:n.opacity||.5,offsetx:n.offsetx||0,offsety:n.offsety||0,color:n.color||"#000"},u=t.width/2,f=this.paper,e=f.set(),i=this.realPath||gt[this.type](this);for(i=this.matrix?ki(i,this.matrix):i,r=1;r<u+1;r++)e.push(f.path(i).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/u*r).toFixed(3),opacity:+(t.opacity/u).toFixed(3)}));return e.insertBefore(this).translate(t.offsetx,t.offsety)};var ir=function(t,i,r,u,f,e,o,s,h){return h==null?ct(t,i,r,u,f,e,o,s):n.findDotsAtSegment(t,i,r,u,f,e,o,s,cu(t,i,r,u,f,e,o,s,h))},rr=function(t,i){return function(r,u,f){var y,p;r=pt(r);var s,h,e,a,c="",v={},o,l=0;for(y=0,p=r.length;y<p;y++){if(e=r[y],e[0]=="M")s=+e[1],h=+e[2];else{if(a=ir(s,h,e[1],e[2],e[3],e[4],e[5],e[6]),l+a>u){if(i&&!v.start){if(o=ir(s,h,e[1],e[2],e[3],e[4],e[5],e[6],u-l),c+=["C"+o.start.x,o.start.y,o.m.x,o.m.y,o.x,o.y],f)return c;v.start=c;c=["M"+o.x,o.y+"C"+o.n.x,o.n.y,o.end.x,o.end.y,e[5],e[6]].join();l+=a;s=+e[5];h=+e[6];continue}if(!t&&!i)return o=ir(s,h,e[1],e[2],e[3],e[4],e[5],e[6],u-l),{x:o.x,y:o.y,alpha:o.alpha}}l+=a;s=+e[5];h=+e[6]}c+=e.shift()+e}return v.end=c,o=t?l:i?v:n.findDotsAtSegment(s,h,e[0],e[1],e[2],e[3],e[4],e[5],1),o.alpha&&(o={x:o.x,y:o.y,alpha:o.alpha}),o}},fu=rr(1),eu=rr(),ur=rr(0,1);n.getTotalLength=fu;n.getPointAtLength=eu;n.getSubpath=function(n,t,i){if(this.getTotalLength(n)-i<1e-6)return ur(n,t).end;var r=ur(n,i,1);return t?ur(r,t).end:r};u.getTotalLength=function(){if(this.type=="path")return this.node.getTotalLength?this.node.getTotalLength():fu(this.attrs.path)};u.getPointAtLength=function(n){if(this.type=="path")return eu(this.attrs.path,n)};u.getSubpath=function(t,i){if(this.type=="path")return n.getSubpath(this.attrs.path,t,i)};k=n.easing_formulas={linear:function(n){return n},"<":function(n){return d(n,1.7)},">":function(n){return d(n,.48)},"<>":function(n){var r=.48-n/1.04,u=i.sqrt(.1734+r*r),f=u-r,o=d(a(f),1/3)*(f<0?-1:1),e=-u-r,s=d(a(e),1/3)*(e<0?-1:1),t=o+s+.5;return(1-t)*3*t*t+t*t*t},backIn:function(n){var t=1.70158;return n*n*((t+1)*n-t)},backOut:function(n){n=n-1;var t=1.70158;return n*n*((t+1)*n+t)+1},elastic:function(n){return n==!!n?n:d(2,-10*n)*i.sin((n-.075)*2*p/.3)+1},bounce:function(n){var r=7.5625,t=2.75,i;return n<1/t?i=r*n*n:n<2/t?(n-=1.5/t,i=r*n*n+.75):n<2.5/t?(n-=2.25/t,i=r*n*n+.9375):(n-=2.625/t,i=r*n*n+.984375),i}};k.easeIn=k["ease-in"]=k["<"];k.easeOut=k["ease-out"]=k[">"];k.easeInOut=k["ease-in-out"]=k["<>"];k["back-in"]=k.backIn;k["back-out"]=k.backOut;var r=[],ou=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){setTimeout(n,16)},fr=function(){for(var ut=+new Date,w=0,t,a,i,u,d,c,g,p,rt;w<r.length;w++)if(t=r[w],!t.el.removed&&!t.paused){var b=ut-t.start,s=t.ms,ft=t.easing,o=t.from,l=t.diff,nt=t.to,et=t.t,y=t.el,tt={},e,it={},k;if(t.initstatus?(b=(t.initstatus*t.anim.top-t.prev)/(t.percent-t.prev)*s,t.status=t.initstatus,delete t.initstatus,t.stop&&r.splice(w--,1)):t.status=(t.prev+(t.percent-t.prev)*(b/s))/t.anim.top,!(b<0))if(b<s){a=ft(b/s);for(i in o)if(o[h](i)){switch(pi[i]){case v:e=+o[i]+a*s*l[i];break;case"colour":e="rgb("+[er(yi(o[i].r+a*s*l[i].r)),er(yi(o[i].g+a*s*l[i].g)),er(yi(o[i].b+a*s*l[i].b))].join(",")+")";break;case"path":for(e=[],u=0,d=o[i].length;u<d;u++){for(e[u]=[o[i][u][0]],c=1,g=o[i][u].length;c<g;c++)e[u][c]=+o[i][u][c]+a*s*l[i][u][c];e[u]=e[u].join(at)}e=e.join(at);break;case"transform":if(l[i].real)for(e=[],u=0,d=o[i].length;u<d;u++)for(e[u]=[o[i][u][0]],c=1,g=o[i][u].length;c<g;c++)e[u][c]=o[i][u][c]+a*s*l[i][u][c];else p=function(n){return+o[i][n]+a*s*l[i][n]},e=[["m",p(0),p(1),p(2),p(3),p(4),p(5)]];break;case"csv":if(i=="clip-rect")for(e=[],u=4;u--;)e[u]=+o[i][u]+a*s*l[i][u];break;default:for(rt=[][f](o[i]),e=[],u=y.paper.customAttributes[i].length;u--;)e[u]=+rt[u]+a*s*l[i][u]}tt[i]=e}y.attr(tt),function(n,t,i){setTimeout(function(){eve("raphael.anim.frame."+n,t,i)})}(y.id,y,t.anim)}else{if(function(t,i,r){setTimeout(function(){eve("raphael.anim.frame."+i.id,i,r);eve("raphael.anim.finish."+i.id,i,r);n.is(t,"function")&&t.call(i)})}(t.callback,y,t.anim),y.attr(nt),r.splice(w--,1),t.repeat>1&&!t.next){for(k in nt)nt[h](k)&&(it[k]=t.totalOrigin[k]);t.el.attr(it);vt(t.anim,t.el,t.anim.percents[0],null,t.totalOrigin,t.repeat-1)}t.next&&!t.stop&&vt(t.anim,t.el,t.next,null,t.totalOrigin,t.repeat)}}n.svg&&y&&y.paper&&y.paper.safari();r.length&&ou(fr)},er=function(n){return n>255?255:n<0?0:n};u.animateWith=function(t,i,u,f,e,o){var s=this,c,h,l;if(s.removed)return o&&o.call(s),s;for(c=u instanceof rt?u:n.animation(u,f,e,o),vt(c,s,c.percents[0],null,s.attr()),h=0,l=r.length;h<l;h++)if(r[h].anim==i&&r[h].el==t){r[l-1].start=r[h].start;break}return s};u.onAnimation=function(n){return n?eve.on("raphael.anim.frame."+this.id,n):eve.unbind("raphael.anim.frame."+this.id),this};rt.prototype.delay=function(n){var t=new rt(this.anim,this.ms);return t.times=this.times,t.del=+n||0,t};rt.prototype.repeat=function(n){var t=new rt(this.anim,this.ms);return t.del=this.del,t.times=i.floor(e(n,0))||1,t};n.animation=function(t,i,r,u){if(t instanceof rt)return t;(n.is(r,"function")||!r)&&(u=u||r||null,r=null);t=Object(t);i=+i||0;var e={},s,f;for(f in t)t[h](f)&&o(f)!=f&&o(f)+"%"!=f&&(s=!0,e[f]=t[f]);return s?(r&&(e.easing=r),u&&(e.callback=u),new rt({100:e},i)):new rt(t,i)};u.animate=function(t,i,r,u){var f=this,e;return f.removed?(u&&u.call(f),f):(e=t instanceof rt?t:n.animation(t,i,r,u),vt(e,f,e.percents[0],null,f.attr()),f)};u.setTime=function(n,t){return n&&t!=null&&this.status(n,l(t,n.ms)/n.ms),this};u.status=function(n,t){var f=[],u=0,e,i;if(t!=null)return vt(n,this,-1,l(t,1)),this;for(e=r.length;u<e;u++)if(i=r[u],i.el.id==this.id&&(!n||i.anim==n)){if(n)return i.status;f.push({anim:i.anim,status:i.status})}return n?0:f};u.pause=function(n){for(var t=0;t<r.length;t++)r[t].el.id!=this.id||n&&r[t].anim!=n||eve("raphael.anim.pause."+this.id,this,r[t].anim)===!1||(r[t].paused=!0);return this};u.resume=function(n){for(var i,t=0;t<r.length;t++)r[t].el.id!=this.id||n&&r[t].anim!=n||(i=r[t],eve("raphael.anim.resume."+this.id,this,i.anim)!==!1&&(delete i.paused,this.status(i.anim,i.status)));return this};u.stop=function(n){for(var t=0;t<r.length;t++)r[t].el.id!=this.id||n&&r[t].anim!=n||eve("raphael.anim.stop."+this.id,this,r[t].anim)===!1||r.splice(t--,1);return this};eve.on("raphael.remove",or);eve.on("raphael.clear",or);u.toString=function(){return"Raphals object"};ht=function(n){if(this.items=[],this.length=0,this.type="set",n)for(var t=0,i=n.length;t<i;t++)n[t]&&(n[t].constructor==u.constructor||n[t].constructor==ht)&&(this[this.items.length]=this.items[this.items.length]=n[t],this.length++)};w=ht.prototype;w.push=function(){for(var n,i,t=0,r=arguments.length;t<r;t++)n=arguments[t],n&&(n.constructor==u.constructor||n.constructor==ht)&&(i=this.items.length,this[i]=this.items[i]=n,this.length++);return this};w.pop=function(){return this.length&&delete this[this.length--],this.items.pop()};w.forEach=function(n,t){for(var i=0,r=this.items.length;i<r;i++)if(n.call(t,this.items[i],i)===!1)return this;return this};for(ei in u)u[h](ei)&&(w[ei]=function(n){return function(){var t=arguments;return this.forEach(function(i){i[n][c](i,t)})}}(ei));w.attr=function(t,i){var r,f,u,e;if(t&&n.is(t,g)&&n.is(t[0],"object"))for(r=0,f=t.length;r<f;r++)this.items[r].attr(t[r]);else for(u=0,e=this.items.length;u<e;u++)this.items[u].attr(t,i);return this};w.clear=function(){while(this.length)this.pop()};w.splice=function(n,t){var r;n=n<0?e(this.length+n,0):n;t=e(0,l(this.length-n,t));for(var u=[],o=[],f=[],i=2;i<arguments.length;i++)f.push(arguments[i]);for(i=0;i<t;i++)o.push(this[n+i]);for(;i<this.length-n;i++)u.push(this[n+i]);for(r=f.length,i=0;i<r+u.length;i++)this.items[n+i]=this[n+i]=i<r?f[i]:u[i-r];for(i=this.items.length=this.length-=t-r;this[i];)delete this[i++];return new ht(o)};w.exclude=function(n){for(var t=0,i=this.length;t<i;t++)if(this[t]==n)return this.splice(t,1),!0};w.animate=function(t,i,r,u){var e;(n.is(r,"function")||!r)&&(u=r||null);var o=this.items.length,f=o,h,c=this,s;if(!o)return this;for(u&&(s=function(){--o||u.call(c)}),r=n.is(r,dt)?r:s,e=n.animation(t,i,r,s),h=this.items[--f].animate(e);f--;)this.items[f]&&!this.items[f].removed&&this.items[f].animateWith(h,e,e);return this};w.insertAfter=function(n){for(var t=this.items.length;t--;)this.items[t].insertAfter(n);return this};w.getBBox=function(){for(var t=[],i=[],r=[],u=[],n,f=this.items.length;f--;)this.items[f].removed||(n=this.items[f].getBBox(),t.push(n.x),i.push(n.y),r.push(n.x+n.width),u.push(n.y+n.height));return t=l[c](0,t),i=l[c](0,i),r=e[c](0,r),u=e[c](0,u),{x:t,y:i,x2:r,y2:u,width:r-t,height:u-i}};w.clone=function(n){n=new ht;for(var t=0,i=this.items.length;t<i;t++)n.push(this.items[t].clone());return n};w.toString=function(){return"Raphals set"};n.registerFont=function(n){var i,u,f,r,t,e;if(!n.face)return n;this.fonts=this.fonts||{};i={w:n.w,face:{},glyphs:{}};u=n.face["font-family"];for(f in n.face)n.face[h](f)&&(i.face[f]=n.face[f]);if(this.fonts[u]?this.fonts[u].push(i):this.fonts[u]=[i],!n.svg){i.face["units-per-em"]=et(n.face["units-per-em"],10);for(r in n.glyphs)if(n.glyphs[h](r)&&(t=n.glyphs[r],i.glyphs[r]={w:t.w,k:{},d:t.d&&"M"+t.d.replace(/[mlcxtrv]/g,function(n){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[n]||"M"})+"z"},t.k))for(e in t.k)t[h](e)&&(i.glyphs[r].k[e]=t.k[e])}return n};s.getFont=function(t,i,r,u){var f,c,o,e,s,l;if(u=u||"normal",r=r||"normal",i=+i||{normal:400,bold:700,lighter:300,bolder:800}[i]||400,!!n.fonts){if(f=n.fonts[t],!f){c=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,b)+"(\\s|$)","i");for(o in n.fonts)if(n.fonts[h](o)&&c.test(o)){f=n.fonts[o];break}}if(f)for(s=0,l=f.length;s<l;s++)if(e=f[s],e.face["font-weight"]==i&&(e.face["font-style"]==r||!e.face["font-style"])&&e.face["font-stretch"]==u)break;return e}};s.print=function(t,i,r,u,f,o,s){var c,ft,k,v;o=o||"middle";s=e(l(s||0,1),-1);var a=y(r)[it](b),d=0,p=0,nt=b,h;if(n.is(u,r)&&(u=this.getFont(u)),u){h=(f||16)/u.face["units-per-em"];var w=u.face.bbox[it](ci),tt=+w[0],g=w[3]-w[1],rt=0,ut=+w[1]+(o=="baseline"?g+ +u.face.descent:g/2);for(c=0,ft=a.length;c<ft;c++)a[c]=="\n"?(d=0,v=0,p=0,rt+=g):(k=p&&u.glyphs[a[c-1]]||{},v=u.glyphs[a[c]],d+=p?(k.w||u.w)+(k.k&&k.k[a[c]]||0)+u.w*s:0,p=1),v&&v.d&&(nt+=n.transformPath(v.d,["t",d*h,rt*h,"s",h,h,tt,ut,"t",(t-tt)/h,(i-ut)/h]))}return this.path(nt).attr({fill:"#000",stroke:"none"})};s.add=function(t){if(n.is(t,"array"))for(var u=this.set(),r=0,f=t.length,i;r<f;r++)i=t[r]||{},au[h](i.type)&&u.push(this[i.type]().attr(i));return u};n.format=function(t,i){var r=n.is(i,g)?[0][f](i):arguments;return t&&n.is(t,dt)&&r.length-1&&(t=t.replace(vu,function(n,t){return r[++t]==null?b:r[t]})),t||b};n.fullfill=function(){var n=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,i=function(n,i,r){var u=r;return i.replace(t,function(n,t,i,r,f){t=t||r;u&&(t in u&&(u=u[t]),typeof u=="function"&&f&&(u=u()))}),u=(u==null||u==r?n:u)+"",u};return function(t,r){return String(t).replace(n,function(n,t){return i(n,t,r)})}}();n.ninja=function(){return li.was?t.win.Raphael=li.is:delete Raphael,n};n.st=w,function(t,i,r){function u(){/in/.test(t.readyState)?setTimeout(u,9):n.eve("raphael.DOMload")}t.readyState==null&&t.addEventListener&&(t.addEventListener(i,r=function(){t.removeEventListener(i,r,!1);t.readyState="complete"},!1),t.readyState="loading");u()}(document,"DOMContentLoaded");li.was?t.win.Raphael=n:Raphael=n;eve.on("raphael.DOMload",function(){hi=!0})}();window.Raphael.svg&&function(n){var i="hasOwnProperty",u=String,f=parseFloat,tt=parseInt,l=Math,k=l.max,p=l.abs,d=l.pow,a=/[, ]+/,c=n.eve,o="",w=" ",v="http://www.w3.org/1999/xlink",ft={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},e={},nt,y;n.toString=function(){return"Your browser supports SVG.\nYou are running Raphal "+this.version};var t=function(r,f){if(f){typeof r=="string"&&(r=t(r));for(var e in f)f[i](e)&&(e.substring(0,6)=="xlink:"?r.setAttributeNS(v,e.substring(6),u(f[e])):r.setAttribute(e,u(f[e])))}else r=n._g.doc.createElementNS("http://www.w3.org/2000/svg",r),r.style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)");return r},it=function(i,r){var w="linear",c=i.id+r,b=.5,s=.5,tt=i.node,it=i.paper,g=tt.style,a=n._g.doc.getElementById(c),v,e,nt,y,h,rt;if(!a){if(r=u(r).replace(n._radial_gradient,function(n,t,i){if(w="radial",t&&i){b=f(t);s=f(i);var r=(s>.5)*2-1;d(b-.5,2)+d(s-.5,2)>.25&&(s=l.sqrt(.25-d(b-.5,2))*r+.5)&&s!=.5&&(s=s.toFixed(5)-1e-5*r)}return o}),r=r.split(/\s*\-\s*/),w=="linear"){if(v=r.shift(),v=-f(v),isNaN(v))return null;e=[0,0,l.cos(n.rad(v)),l.sin(n.rad(v))];nt=1/(k(p(e[2]),p(e[3]))||1);e[2]*=nt;e[3]*=nt;e[2]<0&&(e[0]=-e[2],e[2]=0);e[3]<0&&(e[1]=-e[3],e[3]=0)}if(y=n._parseDots(r),!y)return null;if(c=c.replace(/[\(\)\s,\xb0#]/g,"_"),i.gradient&&c!=i.gradient.id&&(it.defs.removeChild(i.gradient),delete i.gradient),!i.gradient)for(a=t(w+"Gradient",{id:c}),i.gradient=a,t(a,w=="radial"?{fx:b,fy:s}:{x1:e[0],y1:e[1],x2:e[2],y2:e[3],gradientTransform:i.matrix.invert()}),it.defs.appendChild(a),h=0,rt=y.length;h<rt;h++)a.appendChild(t("stop",{offset:y[h].offset?y[h].offset:h?"100%":"0%","stop-color":y[h].color||"#fff"}))}return t(tt,{fill:"url(#"+c+")",opacity:1,"fill-opacity":1}),g.fill=o,g.opacity=1,g.fillOpacity=1,1},b=function(n){var i=n.getBBox(1);t(n.pattern,{patternTransform:n.matrix.invert()+" translate("+i.x+","+i.y+")"})},s=function(r,f,s){var b,k,g,tt,it,rt;if(r.type=="path"){for(var ut=u(f).toLowerCase().split("-"),ht=r.paper,h=s?"end":"start",ct=r.node,l=r.attrs,d=l["stroke-width"],et=ut.length,a="classic",p,w,ot,st,c,v=3,y=3,nt=5;et--;)switch(ut[et]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":a=ut[et];break;case"wide":y=5;break;case"narrow":y=2;break;case"long":v=5;break;case"short":v=2}a=="open"?(v+=2,y+=2,nt+=2,ot=1,st=s?4:1,c={fill:"none",stroke:l.stroke}):(st=ot=v/2,c={fill:l.stroke,stroke:"none"});r._.arrows?s?(r._.arrows.endPath&&e[r._.arrows.endPath]--,r._.arrows.endMarker&&e[r._.arrows.endMarker]--):(r._.arrows.startPath&&e[r._.arrows.startPath]--,r._.arrows.startMarker&&e[r._.arrows.startMarker]--):r._.arrows={};a!="none"?(b="raphael-marker-"+a,k="raphael-marker-"+h+a+v+y,n._g.doc.getElementById(b)?e[b]++:(ht.defs.appendChild(t(t("path"),{"stroke-linecap":"round",d:ft[a],id:b})),e[b]=1),g=n._g.doc.getElementById(k),g?(e[k]++,tt=g.getElementsByTagName("use")[0]):(g=t(t("marker"),{id:k,markerHeight:y,markerWidth:v,orient:"auto",refX:st,refY:y/2}),tt=t(t("use"),{"xlink:href":"#"+b,transform:(s?"rotate(180 "+v/2+" "+y/2+") ":o)+"scale("+v/nt+","+y/nt+")","stroke-width":(2/(v/nt+y/nt)).toFixed(4)}),g.appendChild(tt),ht.defs.appendChild(g),e[k]=1),t(tt,c),it=ot*(a!="diamond"&&a!="oval"),s?(p=r._.arrows.startdx*d||0,w=n.getTotalLength(l.path)-it*d):(p=it*d,w=n.getTotalLength(l.path)-(r._.arrows.enddx*d||0)),c={},c["marker-"+h]="url(#"+k+")",(w||p)&&(c.d=Raphael.getSubpath(l.path,p,w)),t(ct,c),r._.arrows[h+"Path"]=b,r._.arrows[h+"Marker"]=k,r._.arrows[h+"dx"]=it,r._.arrows[h+"Type"]=a,r._.arrows[h+"String"]=f):(s?(p=r._.arrows.startdx*d||0,w=n.getTotalLength(l.path)-p):(p=0,w=n.getTotalLength(l.path)-(r._.arrows.enddx*d||0)),r._.arrows[h+"Path"]&&t(ct,{d:Raphael.getSubpath(l.path,p,w)}),delete r._.arrows[h+"Path"],delete r._.arrows[h+"Marker"],delete r._.arrows[h+"dx"],delete r._.arrows[h+"Type"],delete r._.arrows[h+"String"]);for(c in e)e[i](c)&&!e[c]&&(rt=n._g.doc.getElementById(c),rt&&rt.parentNode.removeChild(rt))}},et={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},rt=function(n,i,r){if(i=et[u(i).toLowerCase()],i){for(var e=n.attrs["stroke-width"]||"1",s={round:e,square:e,butt:0}[n.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,o=[],f=i.length;f--;)o[f]=i[f]*e+(f%2?1:-1)*s;t(n.node,{"stroke-dasharray":o.join(",")})}};c.on("raphael.util.attr.blur",function(n){this.blur(n)});c.on("raphael.util.attr.cursor",function(n){this.node.style.cursor=n});var g=function(r,f){var l=r.node,h=r.attrs,yt=l.style.visibility,y,e,g,et,nt,w,st,at,ht,ct,lt,d,ut,ft,vt;l.style.visibility="hidden";for(y in f)if(c("raphael.util.attr."+y,r,f[y]),f[i](y)){if(!n._availableAttrs[i](y))continue;e=f[y];h[y]=e;switch(y){case"blur":r.blur(e);break;case"href":case"title":case"target":g=l.parentNode;g.tagName.toLowerCase()!="a"&&(et=t("a"),g.insertBefore(et,l),et.appendChild(l),g=et);y=="target"?g.setAttributeNS(v,"show",e=="blank"?"new":e):g.setAttributeNS(v,y,e);break;case"cursor":break;case"transform":r.transform(e);break;case"arrow-start":s(r,e);break;case"arrow-end":s(r,e,1);break;case"clip-rect":nt=u(e).split(a);nt.length==4&&(r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode),w=t("clipPath"),st=t("rect"),w.id=n.createUUID(),t(st,{x:nt[0],y:nt[1],width:nt[2],height:nt[3]}),w.appendChild(st),r.paper.defs.appendChild(w),t(l,{"clip-path":"url(#"+w.id+")"}),r.clip=st);e||(at=l.getAttribute("clip-path"),at&&(ht=n._g.doc.getElementById(at.replace(/(^url\(#|\)$)/g,o)),ht&&ht.parentNode.removeChild(ht),t(l,{"clip-path":o}),delete r.clip));break;case"path":r.type=="path"&&(t(l,{d:e?h.path=n._pathToAbsolute(e):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&s(r,r._.arrows.startString),"endString"in r._.arrows&&s(r,r._.arrows.endString,1)));break;case"width":if(l.setAttribute(y,e),r._.dirty=1,h.fx)y="x",e=h.x;else break;case"x":h.fx&&(e=-h.x-(h.width||0));case"rx":if(y=="rx"&&r.type=="rect")break;case"cx":l.setAttribute(y,e);r.pattern&&b(r);r._.dirty=1;break;case"height":if(l.setAttribute(y,e),r._.dirty=1,h.fy)y="y",e=h.y;else break;case"y":h.fy&&(e=-h.y-(h.height||0));case"ry":if(y=="ry"&&r.type=="rect")break;case"cy":l.setAttribute(y,e);r.pattern&&b(r);r._.dirty=1;break;case"r":r.type=="rect"?t(l,{rx:e,ry:e}):l.setAttribute(y,e);r._.dirty=1;break;case"src":r.type=="image"&&l.setAttributeNS(v,"href",e);break;case"stroke-width":(r._.sx!=1||r._.sy!=1)&&(e/=k(p(r._.sx),p(r._.sy))||1);r.paper._vbSize&&(e*=r.paper._vbSize);l.setAttribute(y,e);h["stroke-dasharray"]&&rt(r,h["stroke-dasharray"],f);r._.arrows&&("startString"in r._.arrows&&s(r,r._.arrows.startString),"endString"in r._.arrows&&s(r,r._.arrows.endString,1));break;case"stroke-dasharray":rt(r,e,f);break;case"fill":if(ct=u(e).match(n._ISURL),ct){w=t("pattern");lt=t("image");w.id=n.createUUID();t(w,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});t(lt,{x:0,y:0,"xlink:href":ct[1]});w.appendChild(lt),function(i){n._preload(ct[1],function(){var n=this.offsetWidth,u=this.offsetHeight;t(i,{width:n,height:u});t(lt,{width:n,height:u});r.paper.safari()})}(w);r.paper.defs.appendChild(w);t(l,{fill:"url(#"+w.id+")"});r.pattern=w;r.pattern&&b(r);break}if(d=n.getRGB(e),d.error){if((r.type=="circle"||r.type=="ellipse"||u(e).charAt()!="r")&&it(r,e)){("opacity"in h||"fill-opacity"in h)&&(ut=n._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,o)),ut&&(ft=ut.getElementsByTagName("stop"),t(ft[ft.length-1],{"stop-opacity":("opacity"in h?h.opacity:1)*("fill-opacity"in h?h["fill-opacity"]:1)})));h.gradient=e;h.fill="none";break}}else delete f.gradient,delete h.gradient,!n.is(h.opacity,"undefined")&&n.is(f.opacity,"undefined")&&t(l,{opacity:h.opacity}),!n.is(h["fill-opacity"],"undefined")&&n.is(f["fill-opacity"],"undefined")&&t(l,{"fill-opacity":h["fill-opacity"]});d[i]("opacity")&&t(l,{"fill-opacity":d.opacity>1?d.opacity/100:d.opacity});case"stroke":d=n.getRGB(e);l.setAttribute(y,d.hex);y=="stroke"&&d[i]("opacity")&&t(l,{"stroke-opacity":d.opacity>1?d.opacity/100:d.opacity});y=="stroke"&&r._.arrows&&("startString"in r._.arrows&&s(r,r._.arrows.startString),"endString"in r._.arrows&&s(r,r._.arrows.endString,1));break;case"gradient":(r.type=="circle"||r.type=="ellipse"||u(e).charAt()!="r")&&it(r,e);break;case"opacity":h.gradient&&!h[i]("stroke-opacity")&&t(l,{"stroke-opacity":e>1?e/100:e});case"fill-opacity":if(h.gradient){ut=n._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,o));ut&&(ft=ut.getElementsByTagName("stop"),t(ft[ft.length-1],{"stop-opacity":e}));break}default:y=="font-size"&&(e=tt(e,10)+"px");vt=y.replace(/(\-.)/g,function(n){return n.substring(1).toUpperCase()});l.style[vt]=e;r._.dirty=1;l.setAttribute(y,e)}}ot(r,f);l.style.visibility=yt},ut=1.2,ot=function(r,f){var y,h,l,e,a,p,v;if(r.type=="text"&&!!(f[i]("text")||f[i]("font")||f[i]("font-size")||f[i]("x")||f[i]("y"))){var c=r.attrs,s=r.node,w=s.firstChild?tt(n._g.doc.defaultView.getComputedStyle(s.firstChild,o).getPropertyValue("font-size"),10):10;if(f[i]("text")){for(c.text=f.text;s.firstChild;)s.removeChild(s.firstChild);for(y=u(f.text).split("\n"),h=[],e=0,a=y.length;e<a;e++)l=t("tspan"),e&&t(l,{dy:w*ut,x:c.x}),l.appendChild(n._g.doc.createTextNode(y[e])),s.appendChild(l),h[e]=l}else for(h=s.getElementsByTagName("tspan"),e=0,a=h.length;e<a;e++)e?t(h[e],{dy:w*ut,x:c.x}):t(h[0],{dy:0});t(s,{x:c.x,y:c.y});r._.dirty=1;p=r._getBBox();v=c.y-(p.y+p.height/2);v&&n.is(v,"finite")&&t(h[0],{dy:v})}},h=function(t,i){this[0]=this.node=t;t.raphael=!0;this.id=n._oid++;t.raphaelid=this.id;this.matrix=n.matrix();this.realPath=null;this.paper=i;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!i.bottom&&(i.bottom=this);this.prev=i.top;i.top&&(i.top.next=this);i.top=this;this.next=null},r=n.el;h.prototype=r;r.constructor=h;n._engine.path=function(n,i){var u=t("path"),r;return i.canvas&&i.canvas.appendChild(u),r=new h(u,i),r.type="path",g(r,{fill:"none",stroke:"#000",path:n}),r};r.rotate=function(n,t,i){if(this.removed)return this;if(n=u(n).split(a),n.length-1&&(t=f(n[1]),i=f(n[2])),n=f(n[0]),i==null&&(t=i),t==null||i==null){var r=this.getBBox(1);t=r.x+r.width/2;i=r.y+r.height/2}return this.transform(this._.transform.concat([["r",n,t,i]])),this};r.scale=function(n,t,i,r){if(this.removed)return this;if(n=u(n).split(a),n.length-1&&(t=f(n[1]),i=f(n[2]),r=f(n[3])),n=f(n[0]),t==null&&(t=n),r==null&&(i=r),i==null||r==null)var e=this.getBBox(1);return i=i==null?e.x+e.width/2:i,r=r==null?e.y+e.height/2:r,this.transform(this._.transform.concat([["s",n,t,i,r]])),this};r.translate=function(n,t){return this.removed?this:(n=u(n).split(a),n.length-1&&(t=f(n[1])),n=f(n[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",n,t]])),this)};r.transform=function(r){var u=this._,f;return r==null?u.transform:(n._extractTransform(this,r),this.clip&&t(this.clip,{transform:this.matrix.invert()}),this.pattern&&b(this),this.node&&t(this.node,{transform:this.matrix}),(u.sx!=1||u.sy!=1)&&(f=this.attrs[i]("stroke-width")?this.attrs["stroke-width"]:1,this.attr({"stroke-width":f})),this)};r.hide=function(){return this.removed||this.paper.safari(this.node.style.display="none"),this};r.show=function(){return this.removed||this.paper.safari(this.node.style.display=""),this};r.remove=function(){var t,i;if(!this.removed&&!!this.node.parentNode){t=this.paper;t.__set__&&t.__set__.exclude(this);c.unbind("raphael.*.*."+this.id);this.gradient&&t.defs.removeChild(this.gradient);n._tear(this,t);this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(i in this)this[i]=typeof this[i]=="function"?n._removedFactory(i):null;this.removed=!0}};r._getBBox=function(){var t,n;this.node.style.display=="none"&&(this.show(),t=!0);n={};try{n=this.node.getBBox()}catch(i){}finally{n=n||{}}return t&&this.hide(),n};r.attr=function(t,r){var e,l,v,s,o,h,f,u,y,p;if(this.removed)return this;if(t==null){e={};for(l in this.attrs)this.attrs[i](l)&&(e[l]=this.attrs[l]);return e.gradient&&e.fill=="none"&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform,e}if(r==null&&n.is(t,"string")){if(t=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(t=="transform")return this._.transform;for(v=t.split(a),s={},o=0,h=v.length;o<h;o++)t=v[o],s[t]=t in this.attrs?this.attrs[t]:n.is(this.paper.customAttributes[t],"function")?this.paper.customAttributes[t].def:n._availableAttrs[t];return h-1?s:s[v[0]]}if(r==null&&n.is(t,"array")){for(s={},o=0,h=t.length;o<h;o++)s[t[o]]=this.attr(t[o]);return s}r!=null?(f={},f[t]=r):t!=null&&n.is(t,"object")&&(f=t);for(u in f)c("raphael.attr."+u+"."+this.id,this,f[u]);for(u in this.paper.customAttributes)if(this.paper.customAttributes[i](u)&&f[i](u)&&n.is(this.paper.customAttributes[u],"function")){y=this.paper.customAttributes[u].apply(this,[].concat(f[u]));this.attrs[u]=f[u];for(p in y)y[i](p)&&(f[p]=y[p])}return g(this,f),this};r.toFront=function(){if(this.removed)return this;this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&n._tofront(this,t),this};r.toBack=function(){var t,i;return this.removed?this:(t=this.node.parentNode,t.tagName.toLowerCase()=="a"?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),n._toback(this,this.paper),i=this.paper,this)};r.insertAfter=function(t){if(this.removed)return this;var i=t.node||t[t.length-1].node;return i.nextSibling?i.parentNode.insertBefore(this.node,i.nextSibling):i.parentNode.appendChild(this.node),n._insertafter(this,t,this.paper),this};r.insertBefore=function(t){if(this.removed)return this;var i=t.node||t[0].node;return i.parentNode.insertBefore(this.node,i),n._insertbefore(this,t,this.paper),this};r.blur=function(i){var r=this,u,f;+i!=0?(u=t("filter"),f=t("feGaussianBlur"),r.attrs.blur=i,u.id=n.createUUID(),t(f,{stdDeviation:+i||1.5}),u.appendChild(f),r.paper.defs.appendChild(u),r._blur=u,t(r.node,{filter:"url(#"+u.id+")"})):(r._blur&&(r._blur.parentNode.removeChild(r._blur),delete r._blur,delete r.attrs.blur),r.node.removeAttribute("filter"))};n._engine.circle=function(n,i,r,u){var e=t("circle"),f;return n.canvas&&n.canvas.appendChild(e),f=new h(e,n),f.attrs={cx:i,cy:r,r:u,fill:"none",stroke:"#000"},f.type="circle",t(e,f.attrs),f};n._engine.rect=function(n,i,r,u,f,e){var s=t("rect"),o;return n.canvas&&n.canvas.appendChild(s),o=new h(s,n),o.attrs={x:i,y:r,width:u,height:f,r:e||0,rx:e||0,ry:e||0,fill:"none",stroke:"#000"},o.type="rect",t(s,o.attrs),o};n._engine.ellipse=function(n,i,r,u,f){var o=t("ellipse"),e;return n.canvas&&n.canvas.appendChild(o),e=new h(o,n),e.attrs={cx:i,cy:r,rx:u,ry:f,fill:"none",stroke:"#000"},e.type="ellipse",t(o,e.attrs),e};n._engine.image=function(n,i,r,u,f,e){var o=t("image"),s;return t(o,{x:r,y:u,width:f,height:e,preserveAspectRatio:"none"}),o.setAttributeNS(v,"href",i),n.canvas&&n.canvas.appendChild(o),s=new h(o,n),s.attrs={x:r,y:u,width:f,height:e,src:i},s.type="image",s};n._engine.text=function(i,r,u,f){var o=t("text"),e;return i.canvas&&i.canvas.appendChild(o),e=new h(o,i),e.attrs={x:r,y:u,"text-anchor":"middle",text:f,font:n._availableAttrs.font,stroke:"none",fill:"#000"},e.type="text",g(e,e.attrs),e};n._engine.setSize=function(n,t){return this.width=n||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this};n._engine.create=function(){var u=n._getContainer.apply(0,arguments),i=u&&u.container,o=u.x,s=u.y,f=u.width,e=u.height,r,h,c;if(!i)throw new Error("SVG container not found.");return r=t("svg"),h="overflow:hidden;",o=o||0,s=s||0,f=f||512,e=e||342,t(r,{height:e,version:1.1,width:f,xmlns:"http://www.w3.org/2000/svg"}),i==1?(r.style.cssText=h+"position:absolute;left:"+o+"px;top:"+s+"px",n._g.doc.body.appendChild(r),c=1):(r.style.cssText=h+"position:relative",i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r)),i=new n._Paper,i.width=f,i.height=e,i.canvas=r,i.clear(),i._left=i._top=0,c&&(i.renderfix=function(){}),i.renderfix(),i};n._engine.setViewBox=function(n,i,r,u,f){c("raphael.setViewBox",this,this._viewBox,[n,i,r,u,f]);var o=k(r/this.width,u/this.height),e=this.top,l=f?"meet":"xMinYMin",s,h;for(n==null?(this._vbSize&&(o=1),delete this._vbSize,s="0 0 "+this.width+w+this.height):(this._vbSize=o,s=n+w+i+w+r+w+u),t(this.canvas,{viewBox:s,preserveAspectRatio:l});o&&e;)h="stroke-width"in e.attrs?e.attrs["stroke-width"]:1,e.attr({"stroke-width":h}),e._.dirty=1,e._.dirtyT=1,e=e.prev;return this._viewBox=[n,i,r,u,!!f],this};n.prototype.renderfix=function(){var n=this.canvas,u=n.style,t,i,r;try{t=n.getScreenCTM()||n.createSVGMatrix()}catch(f){t=n.createSVGMatrix()}i=-t.e%1;r=-t.f%1;(i||r)&&(i&&(this._left=(this._left+i)%1,u.left=this._left+"px"),r&&(this._top=(this._top+r)%1,u.top=this._top+"px"))};n.prototype.clear=function(){n.eve("raphael.clear",this);for(var i=this.canvas;i.firstChild;)i.removeChild(i.firstChild);this.bottom=this.top=null;(this.desc=t("desc")).appendChild(n._g.doc.createTextNode("Created with Raphal "+n.version));i.appendChild(this.desc);i.appendChild(this.defs=t("defs"))};n.prototype.remove=function(){c("raphael.remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=typeof this[t]=="function"?n._removedFactory(t):null};nt=n.st;for(y in r)r[i](y)&&!nt[i](y)&&(nt[y]=function(n){return function(){var t=arguments;return this.forEach(function(i){i[n].apply(i,t)})}}(y))}(window.Raphael);window.Raphael.vml&&function(n){var h="hasOwnProperty",i=String,f=parseFloat,c=Math,e=c.round,k=c.max,g=c.min,p=c.abs,l="fill",a=/[, ]+/,ut=n.eve,ft=" progid:DXImageTransform.Microsoft",o=" ",u="",nt={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},et=/([clmz]),?([^clmz]*)/gi,ot=/ progid:\S+Blur\([^\)]+\)/g,st=/-?[^,\s-]+/g,tt="position:absolute;left:0;top:0;width:1px;height:1px",t=21600,ht={path:1,rect:1,image:1},ct={circle:1,ellipse:1},lt=function(r){var l=/[ahqstv]/ig,a=n._pathToAbsolute,v,c,y,f,s,w,h,p;if(i(r).match(l)&&(a=n._path2curve),l=/[clmz]/g,a==n._pathToAbsolute&&!i(r).match(l))return i(r).replace(et,function(n,i,r){var u=[],o=i.toLowerCase()=="m",f=nt[i];return r.replace(st,function(n){o&&u.length==2&&(f+=u+nt[i=="m"?"l":"L"],u=[]);u.push(e(n*t))}),f+u});for(c=a(r),v=[],s=0,w=c.length;s<w;s++){for(y=c[s],f=c[s][0].toLowerCase(),f=="z"&&(f="x"),h=1,p=y.length;h<p;h++)f+=e(y[h]*t)+(h!=p-1?",":u);v.push(f)}return v.join(o)},it=function(t,i,r){var u=n.matrix();return u.rotate(-t,.5,.5),{dx:u.x(i,r),dy:u.y(i,r)}},w=function(n,i,r,u,f,e){var v=n._,k=n.matrix,h=v.fillpos,c=n.node,y=c.style,w=1,b="",d=t/i,g=t/r,a,s;y.visibility="hidden";!i||!r||(c.coordsize=p(d)+o+p(g),y.rotation=e*(i*r<0?-1:1),e&&(a=it(e,u,f),u=a.dx,f=a.dy),i<0&&(b+="x"),r<0&&(b+=" y")&&(w=-1),y.flip=b,c.coordorigin=u*-d+o+f*-g,(h||v.fillsize)&&(s=c.getElementsByTagName(l),s=s&&s[0],c.removeChild(s),h&&(a=it(e,k.x(h[0],h[1]),k.y(h[0],h[1])),s.position=a.dx*w+o+a.dy*w),v.fillsize&&(s.size=v.fillsize[0]*p(i)+o+v.fillsize[1]*p(r)),c.appendChild(s)),y.visibility="visible")},s,d,y;n.toString=function(){return"Your browser doesnt support SVG. Falling down to VML.\nYou are running Raphal "+this.version};var rt=function(n,t,r){for(var u=i(t).toLowerCase().split("-"),o=r?"end":"start",f=u.length,s="classic",h="medium",c="medium",e;f--;)switch(u[f]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":s=u[f];break;case"wide":case"narrow":c=u[f];break;case"long":case"short":h=u[f]}e=n.node.getElementsByTagName("stroke")[0];e[o+"arrow"]=s;e[o+"arrowlength"]=h;e[o+"arrowwidth"]=c},v=function(r,c){var yt,nt,ot,ut,ft,y,si,pt,st,tt,d,dt,gt,et,ni,vt,ri,bt,hi;r.attrs=r.attrs||{};var b=r.node,v=r.attrs,it=b.style,ui=ht[r.type]&&(c.x!=v.x||c.y!=v.y||c.width!=v.width||c.height!=v.height||c.cx!=v.cx||c.cy!=v.cy||c.rx!=v.rx||c.ry!=v.ry||c.r!=v.r),ci=ct[r.type]&&(v.cx!=c.cx||v.cy!=c.cy||v.r!=c.r||v.rx!=c.rx||v.ry!=c.ry),p=r;for(yt in c)c[h](yt)&&(v[yt]=c[yt]);if(ui&&(v.path=n._getPath[r.type](r),r._.dirty=1),c.href&&(b.href=c.href),c.title&&(b.title=c.title),c.target&&(b.target=c.target),c.cursor&&(it.cursor=c.cursor),"blur"in c&&r.blur(c.blur),(c.path&&r.type=="path"||ui)&&(b.path=lt(~i(v.path).toLowerCase().indexOf("r")?n._pathToAbsolute(v.path):v.path),r.type=="image"&&(r._.fillpos=[v.x,v.y],r._.fillsize=[v.width,v.height],w(r,1,1,0,0,0))),"transform"in c&&r.transform(c.transform),ci){var kt=+v.cx,fi=+v.cy,ei=+v.rx||+v.r||0,oi=+v.ry||+v.r||0;b.path=n.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",e((kt-ei)*t),e((fi-oi)*t),e((kt+ei)*t),e((fi+oi)*t),e(kt*t))}if("clip-rect"in c&&(nt=i(c["clip-rect"]).split(a),nt.length==4&&(nt[2]=+nt[2]+ +nt[0],nt[3]=+nt[3]+ +nt[1],ot=b.clipRect||n._g.doc.createElement("div"),ut=ot.style,ut.clip=n.format("rect({1}px {2}px {3}px {0}px)",nt),b.clipRect||(ut.position="absolute",ut.top=0,ut.left=0,ut.width=r.paper.width+"px",ut.height=r.paper.height+"px",b.parentNode.insertBefore(ot,b),ot.appendChild(b),b.clipRect=ot)),c["clip-rect"]||b.clipRect&&(b.clipRect.style.clip="auto")),r.textpath&&(ft=r.textpath.style,c.font&&(ft.font=c.font),c["font-family"]&&(ft.fontFamily='"'+c["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,u)+'"'),c["font-size"]&&(ft.fontSize=c["font-size"]),c["font-weight"]&&(ft.fontWeight=c["font-weight"]),c["font-style"]&&(ft.fontStyle=c["font-style"])),"arrow-start"in c&&rt(p,c["arrow-start"]),"arrow-end"in c&&rt(p,c["arrow-end"],1),(c.opacity!=null||c["stroke-width"]!=null||c.fill!=null||c.src!=null||c.stroke!=null||c["stroke-width"]!=null||c["stroke-opacity"]!=null||c["fill-opacity"]!=null||c["stroke-dasharray"]!=null||c["stroke-miterlimit"]!=null||c["stroke-linejoin"]!=null||c["stroke-linecap"]!=null)&&(y=b.getElementsByTagName(l),si=!1,y=y&&y[0],!y&&(si=y=s(l)),r.type=="image"&&c.src&&(y.src=c.src),c.fill&&(y.on=!0),(y.on==null||c.fill=="none"||c.fill===null)&&(y.on=!1),y.on&&c.fill&&(pt=i(c.fill).match(n._ISURL),pt?(y.parentNode==b&&b.removeChild(y),y.rotate=!0,y.src=pt[1],y.type="tile",st=r.getBBox(1),y.position=st.x+o+st.y,r._.fillpos=[st.x,st.y],n._preload(pt[1],function(){r._.fillsize=[this.offsetWidth,this.offsetHeight]})):(y.color=n.getRGB(c.fill).hex,y.src=u,y.type="solid",n.getRGB(c.fill).error&&(p.type in{circle:1,ellipse:1}||i(c.fill).charAt()!="r")&&at(p,c.fill,y)&&(v.fill="none",v.gradient=c.fill,y.rotate=!1))),("fill-opacity"in c||"opacity"in c)&&(tt=((+v["fill-opacity"]+1||2)-1)*((+v.opacity+1||2)-1)*((+n.getRGB(c.fill).o+1||2)-1),tt=g(k(tt,0),1),y.opacity=tt,y.src&&(y.color="none")),b.appendChild(y),d=b.getElementsByTagName("stroke")&&b.getElementsByTagName("stroke")[0],dt=!1,d||(dt=d=s("stroke")),(c.stroke&&c.stroke!="none"||c["stroke-width"]||c["stroke-opacity"]!=null||c["stroke-dasharray"]||c["stroke-miterlimit"]||c["stroke-linejoin"]||c["stroke-linecap"])&&(d.on=!0),(c.stroke=="none"||c.stroke===null||d.on==null||c.stroke==0||c["stroke-width"]==0)&&(d.on=!1),gt=n.getRGB(c.stroke),d.on&&c.stroke&&(d.color=gt.hex),tt=((+v["stroke-opacity"]+1||2)-1)*((+v.opacity+1||2)-1)*((+gt.o+1||2)-1),et=(f(c["stroke-width"])||1)*.75,tt=g(k(tt,0),1),c["stroke-width"]==null&&(et=v["stroke-width"]),c["stroke-width"]&&(d.weight=et),et&&et<1&&(tt*=et)&&(d.weight=1),d.opacity=tt,c["stroke-linejoin"]&&(d.joinstyle=c["stroke-linejoin"]||"miter"),d.miterlimit=c["stroke-miterlimit"]||8,c["stroke-linecap"]&&(d.endcap=c["stroke-linecap"]=="butt"?"flat":c["stroke-linecap"]=="square"?"square":"round"),c["stroke-dasharray"]&&(ni={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},d.dashstyle=ni[h](c["stroke-dasharray"])?ni[c["stroke-dasharray"]]:u),dt&&b.appendChild(d)),p.type=="text"){p.paper.canvas.style.display=u;var ti=p.paper.span,ii=100,wt=v.font&&v.font.match(/\d+(?:\.\d*)?(?=px)/);for(it=ti.style,v.font&&(it.font=v.font),v["font-family"]&&(it.fontFamily=v["font-family"]),v["font-weight"]&&(it.fontWeight=v["font-weight"]),v["font-style"]&&(it.fontStyle=v["font-style"]),wt=f(v["font-size"]||wt&&wt[0])||10,it.fontSize=wt*ii+"px",p.textpath.string&&(ti.innerHTML=i(p.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>")),vt=ti.getBoundingClientRect(),p.W=v.w=(vt.right-vt.left)/ii,p.H=v.h=(vt.bottom-vt.top)/ii,p.X=v.x,p.Y=v.y+p.H/2,(("x"in c)||("y"in c))&&(p.path.v=n.format("m{0},{1}l{2},{1}",e(v.x*t),e(v.y*t),e(v.x*t)+1)),ri=["x","y","text","font","font-family","font-weight","font-style","font-size"],bt=0,hi=ri.length;bt<hi;bt++)if(ri[bt]in c){p._.dirty=1;break}switch(v["text-anchor"]){case"start":p.textpath.style["v-text-align"]="left";p.bbx=p.W/2;break;case"end":p.textpath.style["v-text-align"]="right";p.bbx=-p.W/2;break;default:p.textpath.style["v-text-align"]="center";p.bbx=0}p.textpath.style["v-text-kern"]=!0}},at=function(t,r,e){var l,s,a,h,w;t.attrs=t.attrs||{};var b=t.attrs,v=Math.pow,y="linear",p=".5 .5";if((t.attrs.gradient=r,r=i(r).replace(n._radial_gradient,function(n,t,i){return y="radial",t&&i&&(t=f(t),i=f(i),v(t-.5,2)+v(i-.5,2)>.25&&(i=c.sqrt(.25-v(t-.5,2))*((i>.5)*2-1)+.5),p=t+o+i),u}),r=r.split(/\s*\-\s*/),y=="linear"&&(l=r.shift(),l=-f(l),isNaN(l)))||(s=n._parseDots(r),!s))return null;if(t=t.shape||t.node,s.length){for(t.removeChild(e),e.on=!0,e.method="none",e.color=s[0].color,e.color2=s[s.length-1].color,a=[],h=0,w=s.length;h<w;h++)s[h].offset&&a.push(s[h].offset+o+s[h].color);e.colors=a.length?a.join():"0% "+e.color;y=="radial"?(e.type="gradientTitle",e.focus="100%",e.focussize="0 0",e.focusposition=p,e.angle=0):(e.type="gradient",e.angle=(270-l)%360);t.appendChild(e)}return 1},b=function(t,i){this[0]=this.node=t;t.raphael=!0;this.id=n._oid++;t.raphaelid=this.id;this.X=0;this.Y=0;this.attrs={};this.paper=i;this.matrix=n.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};!i.bottom&&(i.bottom=this);this.prev=i.top;i.top&&(i.top.next=this);i.top=this;this.next=null},r=n.el;b.prototype=r;r.constructor=b;r.transform=function(r){var e,a,l;if(r==null)return this._.transform;e=this.paper._viewBoxShift;a=e?"s"+[e.scale,e.scale]+"-1-1t"+[e.dx,e.dy]:u;e&&(l=r=i(r).replace(/\.{3}|\u2026/g,this._.transform||u));n._extractTransform(this,a+r);var s=this.matrix.clone(),h=this.skew,c=this.node,f,v=~i(this.attrs.fill).indexOf("-"),d=!i(this.attrs.fill).indexOf("url(");if(s.translate(-.5,-.5),d||v||this.type=="image")if(h.matrix="1 0 0 1",h.offset="0 0",f=s.split(),v&&f.noRotation||!f.isSimple){c.style.filter=s.toFilter();var y=this.getBBox(),p=this.getBBox(1),b=y.x-p.x,k=y.y-p.y;c.coordorigin=b*-t+o+k*-t;w(this,1,1,b,k,0)}else c.style.filter=u,w(this,f.scalex,f.scaley,f.dx,f.dy,f.rotate);else c.style.filter=u,h.matrix=i(s),h.offset=s.offset();return l&&(this._.transform=l),this};r.rotate=function(n,t,r){if(this.removed)return this;if(n!=null){if(n=i(n).split(a),n.length-1&&(t=f(n[1]),r=f(n[2])),n=f(n[0]),r==null&&(t=r),t==null||r==null){var u=this.getBBox(1);t=u.x+u.width/2;r=u.y+u.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",n,t,r]])),this}};r.translate=function(n,t){return this.removed?this:(n=i(n).split(a),n.length-1&&(t=f(n[1])),n=f(n[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=n,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",n,t]])),this)};r.scale=function(n,t,r,u){if(this.removed)return this;if(n=i(n).split(a),n.length-1&&(t=f(n[1]),r=f(n[2]),u=f(n[3]),isNaN(r)&&(r=null),isNaN(u)&&(u=null)),n=f(n[0]),t==null&&(t=n),u==null&&(r=u),r==null||u==null)var e=this.getBBox(1);return r=r==null?e.x+e.width/2:r,u=u==null?e.y+e.height/2:u,this.transform(this._.transform.concat([["s",n,t,r,u]])),this._.dirtyT=1,this};r.hide=function(){return this.removed||(this.node.style.display="none"),this};r.show=function(){return this.removed||(this.node.style.display=u),this};r._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}};r.remove=function(){if(!this.removed&&!!this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this);n.eve.unbind("raphael.*.*."+this.id);n._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var t in this)this[t]=typeof this[t]=="function"?n._removedFactory(t):null;this.removed=!0}};r.attr=function(t,i){var f,c,y,o,e,s,r,u,p,w;if(this.removed)return this;if(t==null){f={};for(c in this.attrs)this.attrs[h](c)&&(f[c]=this.attrs[c]);return f.gradient&&f.fill=="none"&&(f.fill=f.gradient)&&delete f.gradient,f.transform=this._.transform,f}if(i==null&&n.is(t,"string")){if(t==l&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;for(y=t.split(a),o={},e=0,s=y.length;e<s;e++)t=y[e],o[t]=t in this.attrs?this.attrs[t]:n.is(this.paper.customAttributes[t],"function")?this.paper.customAttributes[t].def:n._availableAttrs[t];return s-1?o:o[y[0]]}if(this.attrs&&i==null&&n.is(t,"array")){for(o={},e=0,s=t.length;e<s;e++)o[t[e]]=this.attr(t[e]);return o}i!=null&&(r={},r[t]=i);i==null&&n.is(t,"object")&&(r=t);for(u in r)ut("raphael.attr."+u+"."+this.id,this,r[u]);if(r){for(u in this.paper.customAttributes)if(this.paper.customAttributes[h](u)&&r[h](u)&&n.is(this.paper.customAttributes[u],"function")){p=this.paper.customAttributes[u].apply(this,[].concat(r[u]));this.attrs[u]=r[u];for(w in p)p[h](w)&&(r[w]=p[w])}r.text&&this.type=="text"&&(this.textpath.string=r.text);v(this,r)}return this};r.toFront=function(){return this.removed||this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&n._tofront(this,this.paper),this};r.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),n._toback(this,this.paper)),this)};r.insertAfter=function(t){return this.removed?this:(t.constructor==n.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),n._insertafter(this,t,this.paper),this)};r.insertBefore=function(t){return this.removed?this:(t.constructor==n.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),n._insertbefore(this,t,this.paper),this)};r.blur=function(t){var i=this.node.runtimeStyle,r=i.filter;r=r.replace(ot,u);+t!=0?(this.attrs.blur=t,i.filter=r+o+ft+".Blur(pixelradius="+(+t||1.5)+")",i.margin=n.format("-{0}px 0 0 -{0}px",e(+t||1.5))):(i.filter=r,i.margin=0,delete this.attrs.blur)};n._engine.path=function(n,i){var f=s("shape"),r,h,e;return f.style.cssText=tt,f.coordsize=t+o+t,f.coordorigin=i.coordorigin,r=new b(f,i),h={fill:"none",stroke:"#000"},n&&(h.path=n),r.type="path",r.path=[],r.Path=u,v(r,h),i.canvas.appendChild(f),e=s("skew"),e.on=!0,f.appendChild(e),r.skew=e,r.transform(u),r};n._engine.rect=function(t,i,r,u,f,e){var h=n._rectPath(i,r,u,f,e),o=t.path(h),s=o.attrs;return o.X=s.x=i,o.Y=s.y=r,o.W=s.width=u,o.H=s.height=f,s.r=e,s.path=h,o.type="rect",o};n._engine.ellipse=function(n,t,i,r,u){var f=n.path(),e=f.attrs;return f.X=t-r,f.Y=i-u,f.W=r*2,f.H=u*2,f.type="ellipse",v(f,{cx:t,cy:i,rx:r,ry:u}),f};n._engine.circle=function(n,t,i,r){var u=n.path(),f=u.attrs;return u.X=t-r,u.Y=i-r,u.W=u.H=r*2,u.type="circle",v(u,{cx:t,cy:i,r:r}),u};n._engine.image=function(t,i,r,u,f,e){var a=n._rectPath(r,u,f,e),o=t.path(a).attr({stroke:"none"}),s=o.attrs,c=o.node,h=c.getElementsByTagName(l)[0];return s.src=i,o.X=s.x=r,o.Y=s.y=u,o.W=s.width=f,o.H=s.height=e,s.path=a,o.type="image",h.parentNode==c&&c.removeChild(h),h.rotate=!0,h.src=i,h.type="tile",o._.fillpos=[r,u],o._.fillsize=[f,e],c.appendChild(h),w(o,1,1,0,0,0),o};n._engine.text=function(r,f,h,c){var a=s("shape"),y=s("path"),p=s("textpath"),l,k,w;return f=f||0,h=h||0,c=c||"",y.v=n.format("m{0},{1}l{2},{1}",e(f*t),e(h*t),e(f*t)+1),y.textpathok=!0,p.string=i(c),p.on=!0,a.style.cssText=tt,a.coordsize=t+o+t,a.coordorigin="0 0",l=new b(a,r),k={fill:"#000",stroke:"none",font:n._availableAttrs.font,text:c},l.shape=a,l.path=y,l.textpath=p,l.type="text",l.attrs.text=i(c),l.attrs.x=f,l.attrs.y=h,l.attrs.w=1,l.attrs.h=1,v(l,k),a.appendChild(p),a.appendChild(y),r.canvas.appendChild(a),w=s("skew"),w.on=!0,a.appendChild(w),l.skew=w,l.transform(u),l};n._engine.setSize=function(t,i){var r=this.canvas.style;return this.width=t,this.height=i,t==+t&&(t+="px"),i==+i&&(i+="px"),r.width=t,r.height=i,r.clip="rect(0 "+t+" "+i+" 0)",this._viewBox&&n._engine.setViewBox.apply(this,this._viewBox),this};n._engine.setViewBox=function(t,i,r,u,f){n.eve("raphael.setViewBox",this,this._viewBox,[t,i,r,u,f]);var e=this.width,o=this.height,c=1/k(r/e,u/o),s,h;return f&&(s=o/u,h=e/r,r*s<e&&(t-=(e-r*s)/2/s),u*h<o&&(i-=(o-u*h)/2/h)),this._viewBox=[t,i,r,u,!!f],this._viewBoxShift={dx:-t,dy:-i,scale:c},this.forEach(function(n){n.transform("...")}),this};n._engine.initWin=function(n){var t=n.document;t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{t.namespaces.rvml||t.namespaces.add("rvml","urn:schemas-microsoft-com:vml");s=function(n){return t.createElement("<rvml:"+n+' class="rvml">')}}catch(i){s=function(n){return t.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};n._engine.initWin(n._g.win);n._engine.create=function(){var e=n._getContainer.apply(0,arguments),f=e.container,r=e.height,u=e.width,c=e.x,l=e.y;if(!f)throw new Error("VML container not found.");var i=new n._Paper,s=i.canvas=n._g.doc.createElement("div"),h=s.style;return c=c||0,l=l||0,u=u||512,r=r||342,i.width=u,i.height=r,u==+u&&(u+="px"),r==+r&&(r+="px"),i.coordsize=t*1e3+o+t*1e3,i.coordorigin="0 0",i.span=n._g.doc.createElement("span"),i.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",s.appendChild(i.span),h.cssText=n.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",u,r),f==1?(n._g.doc.body.appendChild(s),h.left=c+"px",h.top=l+"px",h.position="absolute"):f.firstChild?f.insertBefore(s,f.firstChild):f.appendChild(s),i.renderfix=function(){},i};n.prototype.clear=function(){n.eve("raphael.clear",this);this.canvas.innerHTML=u;this.span=n._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};n.prototype.remove=function(){n.eve("raphael.remove",this);this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=typeof this[t]=="function"?n._removedFactory(t):null;return!0};d=n.st;for(y in r)r[h](y)&&!d[h](y)&&(d[y]=function(n){return function(){var t=arguments;return this.forEach(function(i){i[n].apply(i,t)})}}(y))}(window.Raphael);Raphael.el.popup=function(n,t,i,r){var s=this.paper||this[0].paper,u,f,e,o;if(s){switch(this.type){case"text":case"circle":case"ellipse":f=!0;break;default:f=!1}return n=null==n?"up":n,t=t||5,u=this.getBBox(),i="number"==typeof i?i:f?u.x+u.width/2:u.x,r="number"==typeof r?r:f?u.y+u.height/2:u.y,e=Math.max(u.width/2-t,0),o=Math.max(u.height/2-t,0),this.translate(i-u.x-(f?u.width/2:0),r-u.y-(f?u.height/2:0)),u=this.getBBox(),i={up:["M",i,r,"l",-t,-t,-e,0,"a",t,t,0,0,1,-t,-t,"l",0,-u.height,"a",t,t,0,0,1,t,-t,"l",2*t+2*e,0,"a",t,t,0,0,1,t,t,"l",0,u.height,"a",t,t,0,0,1,-t,t,"l",-e,0,"z"].join(),down:["M",i,r,"l",t,t,e,0,"a",t,t,0,0,1,t,t,"l",0,u.height,"a",t,t,0,0,1,-t,t,"l",-(2*t+2*e),0,"a",t,t,0,0,1,-t,-t,"l",0,-u.height,"a",t,t,0,0,1,t,-t,"l",e,0,"z"].join(),left:["M",i,r,"l",-t,t,0,o,"a",t,t,0,0,1,-t,t,"l",-u.width,0,"a",t,t,0,0,1,-t,-t,"l",0,-(2*t+2*o),"a",t,t,0,0,1,t,-t,"l",u.width,0,"a",t,t,0,0,1,t,t,"l",0,o,"z"].join(),right:["M",i,r,"l",t,-t,0,-o,"a",t,t,0,0,1,t,-t,"l",u.width,0,"a",t,t,0,0,1,t,t,"l",0,2*t+2*o,"a",t,t,0,0,1,-t,t,"l",-u.width,0,"a",t,t,0,0,1,-t,-t,"l",0,-o,"z"].join()},t={up:{x:-!f*(u.width/2),y:2*-t-(f?u.height/2:u.height)},down:{x:-!f*(u.width/2),y:2*t+(f?u.height/2:u.height)},left:{x:2*-t-(f?u.width/2:u.width),y:-!f*(u.height/2)},right:{x:2*t+(f?u.width/2:u.width),y:-!f*(u.height/2)}}[n],this.translate(t.x,t.y),s.path(i[n]).attr({fill:"#000",stroke:"none"}).insertBefore(this.node?this:this[0])}};Raphael.el.tag=function(n,t,i,r){var e=this.paper||this[0].paper,u,s,f,o;if(e){e=e.path().attr({fill:"#000",stroke:"#000"});u=this.getBBox();switch(this.type){case"text":case"circle":case"ellipse":o=!0;break;default:o=!1}return n=n||0,i="number"==typeof i?i:o?u.x+u.width/2:u.x,r="number"==typeof r?r:o?u.y+u.height/2:u.y,t=null==t?5:t,f=.5522*t,u.height>=2*t?e.attr({path:["M",i,r+t,"a",t,t,0,1,1,0,2*-t,t,t,0,1,1,0,2*t,"m",0,2*-t-3,"a",t+3,t+3,0,1,0,0,2*(t+3),"L",i+t+3,r+u.height/2+3,"l",u.width+6,0,0,-u.height-6,-u.width-6,0,"L",i,r-t-3].join()}):(s=Math.sqrt(Math.pow(t+3,2)-Math.pow(u.height/2+3,2)),e.attr({path:["M",i,r+t,"c",-f,0,-t,f-t,-t,-t,0,-f,t-f,-t,t,-t,f,0,t,t-f,t,t,0,f,f-t,t,-t,t,"M",i+s,r-u.height/2-3,"a",t+3,t+3,0,1,0,0,u.height+6,"l",t+3-s+u.width+6,0,0,-u.height-6,"L",i+s,r-u.height/2-3].join()})),n=360-n,e.rotate(n,i,r),this.attrs?(this.attr(this.attrs.x?"x":"cx",i+t+3+(o?u.width/2:"text"==this.type?u.width:0)).attr("y",o?r:r-u.height/2),this.rotate(n,i,r),90<n&&270>n&&this.attr(this.attrs.x?"x":"cx",i-t-3-(o?u.width/2:u.width)).rotate(180,i,r)):90<n&&270>n?(this.translate(i-u.x-u.width-t-3,r-u.y-u.height/2),this.rotate(n-180,u.x+u.width+t+3,u.y+u.height/2)):(this.translate(i-u.x+t+3,r-u.y-u.height/2),this.rotate(n,u.x-t-3,u.y+u.height/2)),e.insertBefore(this.node?this:this[0])}};Raphael.el.drop=function(n,t,i){var r=this.getBBox(),e=this.paper||this[0].paper,f,u;if(e){switch(this.type){case"text":case"circle":case"ellipse":f=!0;break;default:f=!1}return n=n||0,t="number"==typeof t?t:f?r.x+r.width/2:r.x,i="number"==typeof i?i:f?r.y+r.height/2:r.y,u=Math.max(r.width,r.height)+Math.min(r.width,r.height),e=e.path(["M",t,i,"l",u,0,"A",.4*u,.4*u,0,1,0,t+.7*u,i-.7*u,"z"]).attr({fill:"#000",stroke:"none"}).rotate(22.5-n,t,i),n=(n+90)*Math.PI/180,t=t+u*Math.sin(n)-(f?0:r.width/2),n=i+u*Math.cos(n)-(f?0:r.height/2),this.attrs?this.attr(this.attrs.x?"x":"cx",t).attr(this.attrs.y?"y":"cy",n):this.translate(t-r.x,n-r.y),e.insertBefore(this.node?this:this[0])}};Raphael.el.flag=function(n,t,i){var e=this.paper||this[0].paper;if(e){var e=e.path().attr({fill:"#000",stroke:"#000"}),r=this.getBBox(),u=r.height/2,f;switch(this.type){case"text":case"circle":case"ellipse":f=!0;break;default:f=!1}return n=n||0,t="number"==typeof t?t:f?r.x+r.width/2:r.x,i="number"==typeof i?i:f?r.y+r.height/2:r.y,e.attr({path:["M",t,i,"l",u+3,-u-3,r.width+6,0,0,r.height+6,-r.width-6,0,"z"].join()}),n=360-n,e.rotate(n,t,i),this.attrs?(this.attr(this.attrs.x?"x":"cx",t+u+3+(f?r.width/2:"text"==this.type?r.width:0)).attr("y",f?i:i-r.height/2),this.rotate(n,t,i),90<n&&270>n&&this.attr(this.attrs.x?"x":"cx",t-u-3-(f?r.width/2:r.width)).rotate(180,t,i)):90<n&&270>n?(this.translate(t-r.x-r.width-u-3,i-r.y-r.height/2),this.rotate(n-180,r.x+r.width+u+3,r.y+r.height/2)):(this.translate(t-r.x+u+3,i-r.y-r.height/2),this.rotate(n,r.x-u-3,r.y+r.height/2)),e.insertBefore(this.node?this:this[0])}};Raphael.el.label=function(){var n=this.getBBox(),i=this.paper||this[0].paper,t=Math.min(20,n.width+10,n.height+10)/2;if(i)return i.rect(n.x-t/2,n.y-t/2,n.width+t,n.height+t,t).attr({stroke:"none",fill:"#000"}).insertBefore(this.node?this:this[0])};Raphael.el.blob=function(n,t,i){var u=this.getBBox(),f=Math.PI/180,h=this.paper||this[0].paper,s,r;if(h){switch(this.type){case"text":case"circle":case"ellipse":s=!0;break;default:s=!1}h=h.path().attr({fill:"#000",stroke:"none"});n=(+n+1?n:45)+90;r=Math.min(u.height,u.width);var t="number"==typeof t?t:s?u.x+u.width/2:u.x,i="number"==typeof i?i:s?u.y+u.height/2:u.y,e=Math.max(u.width+r,25*r/12),o=Math.max(u.height+r,25*r/12);s=t+r*Math.sin((n-22.5)*f);var c=i+r*Math.cos((n-22.5)*f),l=t+r*Math.sin((n+22.5)*f),n=i+r*Math.cos((n+22.5)*f),f=(l-s)/2;r=(n-c)/2;var e=e/2,o=o/2,a=-Math.sqrt(Math.abs(e*e*o*o-e*e*r*r-o*o*f*f)/(e*e*r*r+o*o*f*f));return r=a*e*r/o+(l+s)/2,f=a*-o*f/e+(n+c)/2,h.attr({x:r,y:f,path:["M",t,i,"L",l,n,"A",e,o,0,1,1,s,c,"z"].join()}),this.translate(r-u.x-u.width/2,f-u.y-u.height/2),h.insertBefore(this.node?this:this[0])}};Raphael.fn.label=function(n,t,i){var r=this.set(),i=this.text(n,t,i).attr(Raphael.g.txtattr);return r.push(i.label(),i)};Raphael.fn.popup=function(n,t,i,r,u){var f=this.set(),i=this.text(n,t,i).attr(Raphael.g.txtattr);return f.push(i.popup(r,u),i)};Raphael.fn.tag=function(n,t,i,r,u){var f=this.set(),i=this.text(n,t,i).attr(Raphael.g.txtattr);return f.push(i.tag(r,u),i)};Raphael.fn.flag=function(n,t,i,r){var u=this.set(),i=this.text(n,t,i).attr(Raphael.g.txtattr);return u.push(i.flag(r),i)};Raphael.fn.drop=function(n,t,i,r){var u=this.set(),i=this.text(n,t,i).attr(Raphael.g.txtattr);return u.push(i.drop(r),i)};Raphael.fn.blob=function(n,t,i,r){var u=this.set(),i=this.text(n,t,i).attr(Raphael.g.txtattr);return u.push(i.blob(r),i)};Raphael.el.lighter=function(n){var n=n||2,t=[this.attrs.fill,this.attrs.stroke];return this.fs=this.fs||[t[0],t[1]],t[0]=Raphael.rgb2hsb(Raphael.getRGB(t[0]).hex),t[1]=Raphael.rgb2hsb(Raphael.getRGB(t[1]).hex),t[0].b=Math.min(t[0].b*n,1),t[0].s/=n,t[1].b=Math.min(t[1].b*n,1),t[1].s/=n,this.attr({fill:"hsb("+[t[0].h,t[0].s,t[0].b]+")",stroke:"hsb("+[t[1].h,t[1].s,t[1].b]+")"}),this};Raphael.el.darker=function(n){var n=n||2,t=[this.attrs.fill,this.attrs.stroke];return this.fs=this.fs||[t[0],t[1]],t[0]=Raphael.rgb2hsb(Raphael.getRGB(t[0]).hex),t[1]=Raphael.rgb2hsb(Raphael.getRGB(t[1]).hex),t[0].s=Math.min(t[0].s*n,1),t[0].b/=n,t[1].s=Math.min(t[1].s*n,1),t[1].b/=n,this.attr({fill:"hsb("+[t[0].h,t[0].s,t[0].b]+")",stroke:"hsb("+[t[1].h,t[1].s,t[1].b]+")"}),this};Raphael.el.resetBrightness=function(){return this.fs&&(this.attr({fill:this.fs[0],stroke:this.fs[1]}),delete this.fs),this},function(){var t=["lighter","darker","resetBrightness"],i="popup tag flag label drop blob".split(" "),n;for(n in i)(function(n){Raphael.st[n]=function(){return Raphael.el[n].apply(this,arguments)}})(i[n]);for(n in t)(function(n){Raphael.st[n]=function(){for(var t=0;t<this.length;t++)this[t][n].apply(this[t],arguments);return this}})(t[n])}();Raphael.g={shim:{stroke:"none",fill:"#000","fill-opacity":0},txtattr:{font:"12px Arial, sans-serif",fill:"#fff"},colors:function(){for(var t=[.6,.2,.05,.1333,.75,0],i=[],n=0;10>n;n++)n<t.length?i.push("hsb("+t[n]+",.75, .75)"):i.push("hsb("+t[n-t.length]+", 1, .5)");return i}(),snapEnds:function(n,t,i){function f(n){return.25>Math.abs(n-.5)?~~n+.5:Math.round(n)}var r=n,u=t;if(r==u)return{from:r,to:u,power:0};var r=(u-r)/i,e=u=~~r,i=0;if(u){for(;e;)i--,e=~~(r*Math.pow(10,i))/Math.pow(10,i);i++}else{if(0!=r&&isFinite(r))for(;!u;)i=i||1,u=~~(r*Math.pow(10,i))/Math.pow(10,i),i++;else i=1;i&&i--}return u=f(t*Math.pow(10,i))/Math.pow(10,i),u<t&&(u=f((t+.5)*Math.pow(10,i))/Math.pow(10,i)),r=f((n-(0<i?0:.5))*Math.pow(10,i))/Math.pow(10,i),{from:r,to:u,power:i}},axis:function(n,t,i,r,u,f,e,o,s,h,c){var h=null==h?2:h,s=s||"t",f=f||10,c=arguments[arguments.length-1],v="|"==s||" "==s?["M",n+.5,t,"l",0,.001]:1==e||3==e?["M",n+.5,t,"l",0,-i]:["M",n,t+.5,"l",i,0],y=this.snapEnds(r,u,f),p=y.from,d=y.to,a=y.power,g=0,nt={font:"11px 'Fontin Sans', Fontin-Sans, sans-serif"},y=c.set(),d=(d-p)/f,l=p,b=0<a?a:0,k=i/f;if(1==+e||3==+e){for(a=t,p=(e-1?1:-1)*(h+3+!!(e-1));a>=t-i;)"-"!=s&&" "!=s&&(v=v.concat(["M",n-("+"==s||"|"==s?h:2*!(e-1)*h),a+.5,"l",2*h+1,0])),y.push(c.text(n+p,a,o&&o[g++]||(Math.round(l)==l?l:+l.toFixed(b))).attr(nt).attr({"text-anchor":e-1?"start":"end"})),l+=d,a-=k;Math.round(a+k-(t-i))&&("-"!=s&&" "!=s&&(v=v.concat(["M",n-("+"==s||"|"==s?h:2*!(e-1)*h),t-i+.5,"l",2*h+1,0])),y.push(c.text(n+p,t-i,o&&o[g]||(Math.round(l)==l?l:+l.toFixed(b))).attr(nt).attr({"text-anchor":e-1?"start":"end"})))}else{for(var l=p,b=(0<a)*a,p=(e?-1:1)*(h+9+!e),a=n,k=i/f,w=0,tt=0;a<=n+i;)"-"!=s&&" "!=s&&(v=v.concat(["M",a+.5,t-("+"==s?h:2*!!e*h),"l",0,2*h+1])),y.push(w=c.text(a,t+p,o&&o[g++]||(Math.round(l)==l?l:+l.toFixed(b))).attr(nt)),w=w.getBBox(),tt>=w.x-5?y.pop(y.length-1).remove():tt=w.x+w.width,l+=d,a+=k;Math.round(a-k-n-i)&&("-"!=s&&" "!=s&&(v=v.concat(["M",n+i+.5,t-("+"==s?h:2*!!e*h),"l",0,2*h+1])),y.push(c.text(n+i,t+p,o&&o[g]||(Math.round(l)==l?l:+l.toFixed(b))).attr(nt)))}return v=c.path(v),v.text=y,v.all=c.set([v,y]),v.remove=function(){this.text.remove();this.constructor.prototype.remove.call(this)},v},labelise:function(n,t,i){return n?(n+"").replace(/(##+(?:\.#+)?)|(%%+(?:\.%+)?)/g,function(n,r,u){return r?(+t).toFixed(r.replace(/^#+\.?/g,"").length):u?(100*t/i).toFixed(u.replace(/^%+\.?/g,"").length)+"%":void 0}):(+t).toFixed(0)}},function(){function t(t,i,r,f,e,o,s,h){var c;if(e&&!f||!e&&!r)return s?"":h.path();o={round:"round",sharp:"sharp",soft:"soft",square:"square"}[o]||"square";f=Math.round(f);r=Math.round(r);t=Math.round(t);i=Math.round(i);switch(o){case"round":e?(e=~~(r/2),c=f<e?["M",t-~~(r/2),i,"l",0,0,"a",~~(r/2),f,0,0,1,r,0,"l",0,0,"z"]:["M",t-e,i,"l",0,e-f,"a",e,e,0,1,1,r,0,"l",0,f-e,"z"]):(e=~~(f/2),c=r<e?["M",t+.5,i+.5-~~(f/2),"l",0,0,"a",r,~~(f/2),0,0,1,0,f,"l",0,0,"z"]:["M",t+.5,i+.5-e,"l",r-e,0,"a",e,e,0,1,1,0,f,"l",e-r,0,"z"]);break;case"sharp":e?(e=~~(r/2),c=["M",t+e,i,"l",-r,0,0,-u(f-e,0),e,-n(e,f),e,n(e,f),e,"z"]):(e=~~(f/2),c=["M",t,i+e,"l",0,-f,u(r-e,0),0,n(e,r),e,-n(e,r),e+(2*e<f),"z"]);break;case"square":c=e?["M",t+~~(r/2),i,"l",1-r,0,0,-f,r-1,0,"z"]:["M",t,i+~~(f/2),"l",0,-f,r,0,0,f,"z"];break;case"soft":e?(e=n(Math.round(r/5),f),c=["M",t-~~(r/2),i,"l",0,e-f,"a",e,e,0,0,1,e,-e,"l",r-2*e,0,"a",e,e,0,0,1,e,e,"l",0,f-e,"z"]):(e=n(r,Math.round(f/5)),c=["M",t+.5,i+.5-~~(f/2),"l",r-e,0,"a",e,e,0,0,1,e,e,"l",0,f-2*e,"a",e,e,0,0,1,-e,e,"l",e-r,0,"z"])}return s?c.join(","):h.path(c)}function i(n,i,r,u,f,e,o){var o=o||{},ft=o.type||"square",d=parseFloat(o.gutter||"20%"),w=n.set(),g=n.set(),v=n.set(),b=n.set(),nt=Math.max.apply(Math,e),k=[],c=0,ot=o.colors||this.colors,p=e.length,y,l,tt,rt,et;if(Raphael.is(e[0],"array")){for(var nt=[],c=p,p=0,s=e.length;s--;)g.push(n.set()),nt.push(Math.max.apply(Math,e[s])),p=Math.max(p,e[s].length);if(o.stacked)for(s=p;s--;){for(y=0,l=e.length;l--;)y+=+e[l][s]||0;k.push(y)}for(s=e.length;s--;)if(e[s].length<p)for(l=p;l--;)e[s].push(0);nt=Math.max.apply(Math,o.stacked?k:nt)}var nt=o.to||nt,u=100*(u/(p*(100+d)+d)),d=u*d/100,it=null==o.vgutter?20:o.vgutter,k=[],y=i+d,ut=(f-2*it)/nt;for(o.stretch||(d=Math.round(d),u=Math.floor(u)),o.stacked||(u/=c||1),s=0;s<p;s++){for(k=[],l=0;l<(c||1);l++){var a=Math.round((c?e[l][s]:e[s])*ut),tt=r+f-it-a,h=t(Math.round(y+u/2),tt+a,u,a,!0,ft,null,n).attr({stroke:"none",fill:ot[c?l:s]});c?g[l].push(h):g.push(h);h.y=tt;h.x=Math.round(y+u/2);h.w=u;h.h=a;h.value=c?e[l][s]:e[s];o.stacked?k.push(h):y+=u}if(o.stacked){for(b.push(l=n.rect(k[0].x-k[0].w/2,r,u,f).attr(this.shim)),l.bars=n.set(),tt=0,rt=k.length;rt--;)k[rt].toFront();for(rt=0,et=k.length;rt<et;rt++){var h=k[rt],a=(tt+h.value)*ut,st=t(h.x,r+f-it-.5*!!tt,u,a,!0,ft,1,n);l.bars.push(h);tt&&h.attr({path:st});h.h=a;h.y=r+f-it-.5*!!tt-a;v.push(a=n.rect(h.x-h.w/2,h.y,u,h.value*ut).attr(this.shim));a.bar=h;a.value=h.value;tt+=h.value}y+=u}y+=d}if(b.toFront(),y=i+d,!o.stacked)for(s=0;s<p;s++){for(l=0;l<(c||1);l++)v.push(a=n.rect(Math.round(y),r+it,u,f-it).attr(this.shim)),a.bar=c?g[l][s]:g[s],a.value=a.bar.value,y+=u;y+=d}return w.label=function(t,i){var h,a,u,y,s,l;if(t=t||[],this.labels=n.set(),a=-Infinity,o.stacked)for(u=0;u<p;u++)for(y=0,s=0;s<(c||1);s++)y=y+(c?e[s][u]:e[u]),s==c-1&&(h=n.labelise(t[u],y,nt),h=n.text(g[u*(c||1)+s].x,r+f-it/2,h).attr(txtattr).insertBefore(v[u*(c||1)+s]),l=h.getBBox(),l.x-7<a?h.remove():(this.labels.push(h),a=l.x+l.width));else for(u=0;u<p;u++)for(s=0;s<(c||1);s++)h=n.labelise(c?t[s]&&t[s][u]:t[u],c?e[s][u]:e[u],nt),h=n.text(g[u*(c||1)+s].x,i?r+f-it/2:g[u*(c||1)+s].y-10,h).attr(txtattr).insertBefore(v[u*(c||1)+s]),l=h.getBBox(),l.x-7<a?h.remove():(this.labels.push(h),a=l.x+l.width);return this},w.hover=function(n,t){return b.hide(),v.show(),v.mouseover(n).mouseout(t),this},w.hoverColumn=function(n,t){return v.hide(),b.show(),b.mouseover(n).mouseout(t||function(){}),this},w.click=function(n){return b.hide(),v.show(),v.click(n),this},w.each=function(n){if(!Raphael.is(n,"function"))return this;for(var t=v.length;t--;)n.call(v[t]);return this},w.eachColumn=function(n){if(!Raphael.is(n,"function"))return this;for(var t=b.length;t--;)n.call(b[t]);return this},w.clickColumn=function(n){return v.hide(),b.show(),b.click(n),this},w.push(g,v,b),w.bars=g,w.covers=v,w}function r(n,i,r,u,f,e,o){var o=o||{},ut=o.type||"square",p=parseFloat(o.gutter||"20%"),b=n.set(),g=n.set(),y=n.set(),k=n.set(),tt=Math.max.apply(Math,e),w=[],a=0,et=o.colors||this.colors,d=e.length,nt,c,l,h,rt,it,ft;if(Raphael.is(e[0],"array")){for(var tt=[],a=d,d=0,s=e.length;s--;)g.push(n.set()),tt.push(Math.max.apply(Math,e[s])),d=Math.max(d,e[s].length);if(o.stacked)for(s=d;s--;){for(nt=0,c=e.length;c--;)nt+=+e[c][s]||0;w.push(nt)}for(s=e.length;s--;)if(e[s].length<d)for(c=d;c--;)e[s].push(0);tt=Math.max.apply(Math,o.stacked?w:tt)}var tt=o.to||tt,v=Math.floor(100*(f/(d*(100+p)+p))),f=Math.floor(v*p/100),p=[],w=r+f,nt=(u-1)/tt;for(o.stacked||(v/=a||1),s=0;s<d;s++){for(p=[],c=0;c<(a||1);c++)l=a?e[c][s]:e[s],h=t(i,w+v/2,Math.round(l*nt),v-1,!1,ut,null,n).attr({stroke:"none",fill:et[a?c:s]}),a?g[c].push(h):g.push(h),h.x=i+Math.round(l*nt),h.y=w+v/2,h.w=Math.round(l*nt),h.h=v,h.value=+l,o.stacked?p.push(h):w+=v;if(o.stacked){for(c=n.rect(i,p[0].y-p[0].h/2,u,v).attr(this.shim),k.push(c),c.bars=n.set(),rt=0,it=p.length;it--;)p[it].toFront();for(it=0,ft=p.length;it<ft;it++){var h=p[it],l=Math.round((rt+h.value)*nt),ot=t(i,h.y,l,v-1,!1,ut,1,n);c.bars.push(h);rt&&h.attr({path:ot});h.w=l;h.x=i+l;y.push(l=n.rect(i+rt*nt,h.y-h.h/2,h.value*nt,v).attr(this.shim));l.bar=h;rt+=h.value}w+=v}w+=f}if(k.toFront(),w=r+f,!o.stacked)for(s=0;s<d;s++){for(c=0;c<(a||1);c++)l=n.rect(i,w,u,v).attr(this.shim),y.push(l),l.bar=a?g[c][s]:g[s],l.value=l.bar.value,w+=v;w+=f}return b.label=function(t,r){var u,f,o,s;for(t=t||[],this.labels=n.set(),u=0;u<d;u++)for(f=0;f<a;f++)o=n.labelise(a?t[f]&&t[f][u]:t[u],a?e[f][u]:e[u],tt),s=r?"end":"start",this.labels.push(o=n.text(r?g[u*(a||1)+f].x-v/2+3:i+5,g[u*(a||1)+f].y,o).attr(txtattr).attr({"text-anchor":s}).insertBefore(y[0])),o.getBBox().x<i+5?o.attr({x:i+5,"text-anchor":"start"}):g[u*(a||1)+f].label=o;return this},b.hover=function(n,t){return k.hide(),y.show(),y.mouseover(n).mouseout(t||function(){}),this},b.hoverColumn=function(n,t){return y.hide(),k.show(),k.mouseover(n).mouseout(t||function(){}),this},b.each=function(n){if(!Raphael.is(n,"function"))return this;for(var t=y.length;t--;)n.call(y[t]);return this},b.eachColumn=function(n){if(!Raphael.is(n,"function"))return this;for(var t=k.length;t--;)n.call(k[t]);return this},b.click=function(n){return k.hide(),y.show(),y.click(n),this},b.clickColumn=function(n){return y.hide(),k.show(),k.click(n),this},b.push(g,y,k),b.bars=g,b.covers=y,b}var n=Math.min,u=Math.max,f=function(){};f.prototype=Raphael.g;r.prototype=i.prototype=new f;Raphael.fn.barchart=function(n,t,r,u,f,e){return new i(this,n,t,r,u,f,e)};Raphael.fn.hbarchart=function(n,t,i,u,f,e){return new r(this,n,t,i,u,f,e)}}(),function(){function n(n,t){for(var f=n.length/t,r=0,i=f,u=0,e=[];r<n.length;)i--,0>i?(u+=n[r]*(1+i),e.push(u/f),u=n[r++]*-i,i+=f):u+=1*n[r++];return e}function t(t,i,r,u,f,e,o,s){function lt(n){for(var p,l,v,nt,c=[],s=0,k=e.length;s<k;s++)c=c.concat(e[s]);c.sort(function(n,t){return n-t});for(var p=[],y=[],s=0,k=c.length;s<k;s++)c[s]!=c[s-1]&&p.push(c[s])&&y.push(i+h+(c[s]-d)*ut);for(var c=p,k=c.length,g=n||t.set(),s=0;s<k;s++){for(p=y[s]-(y[s]-(y[s-1]||i))/2,v=((y[s+1]||i+u)-y[s])/2+(y[s]-(y[s-1]||i))/2,n?l={}:g.push(l=t.rect(p-1,r,Math.max(v+1,1),f).attr({stroke:"none",fill:"#000",opacity:0})),l.values=[],l.symbols=t.set(),l.y=[],l.x=y[s],l.axis=c[s],v=0,nt=o.length;v<nt;v++)for(var p=e[v]||e[0],b=0,tt=p.length;b<tt;b++)p[b]==c[s]&&(l.values.push(o[v][b]),l.y.push(r+f-h-(o[v][b]-rt)*ht),l.symbols.push(a.symbols[v][b]));n&&n.call(l)}n||(w=g)}function yt(n){for(var c,y,v=n||t.set(),s,u=0,w=o.length;u<w;u++)for(c=0,y=o[u].length;c<y;c++){var l=i+h+((e[u]||e[0])[c]-d)*ut,b=i+h+((e[u]||e[0])[c?c-1:1]-d)*ut,p=r+f-h-(o[u][c]-rt)*ht;n?s={}:v.push(s=t.circle(l,p,Math.abs(b-l)/2).attr({stroke:"#000",fill:"#000",opacity:1}));s.x=l;s.y=p;s.value=o[u][c];s.line=a.lines[u];s.shade=a.shades[u];s.symbol=a.symbols[u][c];s.symbols=a.symbols[u];s.axis=(e[u]||e[0])[c];n&&n.call(s)}n||(et=v)}var st,y,tt,it,g,nt,ct;s=s||{};t.raphael.is(e[0],"array")||(e=[e]);t.raphael.is(o[0],"array")||(o=[o]);for(var h=s.gutter||10,v=Math.max(e[0].length,o[0].length),pt=s.symbol||"",wt=s.colors||this.colors,w=null,et=null,a=t.set(),l=[],c=0,k=o.length;c<k;c++)v=Math.max(v,o[c].length);for(var at=t.set(),c=0,k=o.length;c<k;c++)s.shade&&at.push(t.path().attr({stroke:"none",fill:wt[c],opacity:s.nostroke?1:.3})),o[c].length>u-2*h&&(o[c]=n(o[c],u-2*h),v=u-2*h),e[c]&&e[c].length>u-2*h&&(e[c]=n(e[c],u-2*h));var l=Array.prototype.concat.apply([],e),v=Array.prototype.concat.apply([],o),l=this.snapEnds(Math.min.apply(Math,l),Math.max.apply(Math,l),e[0].length-1),d=l.from,l=l.to,v=this.snapEnds(Math.min.apply(Math,v),Math.max.apply(Math,v),o[0].length-1),rt=v.from,c=v.to,ut=(u-2*h)/(l-d||1),ht=(f-2*h)/(c-rt||1),v=t.set();s.axis&&(k=(s.axis+"").split(/[,\s]+/),+k[0]&&v.push(this.axis(i+h,r+h,u-2*h,d,l,s.axisxstep||Math.floor((u-2*h)/20),2,t)),+k[1]&&v.push(this.axis(i+u-h,r+f-h,f-2*h,rt,c,s.axisystep||Math.floor((f-2*h)/20),3,t)),+k[2]&&v.push(this.axis(i+h,r+f-h,u-2*h,d,l,s.axisxstep||Math.floor((u-2*h)/20),0,t)),+k[3]&&v.push(this.axis(i+h,r+f-h,f-2*h,rt,c,s.axisystep||Math.floor((f-2*h)/20),1,t)));for(var bt=t.set(),kt=t.set(),dt,c=0,k=o.length;c<k;c++){s.nostroke||bt.push(dt=t.path().attr({stroke:wt[c],"stroke-width":s.width||2,"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":s.dash||""}));for(var ot=Raphael.is(pt,"array")?pt[c]:pt,gt=t.set(),l=[],p=0,ni=o[c].length;p<ni;p++)if(g=i+h+((e[c]||e[0])[p]-d)*ut,nt=r+f-h-(o[c][p]-rt)*ht,(Raphael.is(ot,"array")?ot[p]:ot)&&gt.push(t[Raphael.is(ot,"array")?ot[p]:ot](g,nt,3*(s.width||2)).attr({fill:wt[c],stroke:"none"})),s.smooth){if(p&&p!=ni-1){y=i+h+((e[c]||e[0])[p-1]-d)*ut;ct=r+f-h-(o[c][p-1]-rt)*ht;tt=g;it=nt;var b=i+h+((e[c]||e[0])[p+1]-d)*ut,ft=r+f-h-(o[c][p+1]-rt)*ht,vt=(tt-y)/2;st=(b-tt)/2;y=Math.atan((tt-y)/Math.abs(it-ct));b=Math.atan((b-tt)/Math.abs(it-ft));y=ct<it?Math.PI-y:y;b=ft<it?Math.PI-b:b;ft=Math.PI/2-(y+b)%(2*Math.PI)/2;ct=vt*Math.sin(ft+y);y=vt*Math.cos(ft+y);vt=st*Math.sin(ft+b);b=st*Math.cos(ft+b);st=tt-ct;y=it+y;tt+=vt;it+=b;l=l.concat([st,y,g,nt,tt,it])}p||(l=["M",g,nt,"C",g,nt])}else l=l.concat([p?"L":"M",g,nt]);s.smooth&&(l=l.concat([g,nt,g,nt]));kt.push(gt);s.shade&&at[c].attr({path:l.concat(["L",g,r+f-h,"L",i+h+((e[c]||e[0])[0]-d)*ut,r+f-h,"z"]).join(",")});s.nostroke||dt.attr({path:l.join(",")})}return a.push(bt,at,kt,v,w,et),a.lines=bt,a.shades=at,a.symbols=kt,a.axis=v,a.hoverColumn=function(n,t){return w||lt(),w.mouseover(n).mouseout(t),this},a.clickColumn=function(n){return w||lt(),w.click(n),this},a.hrefColumn=function(n){var f=t.raphael.is(arguments[0],"array")?arguments[0]:arguments,u,i,r;if(!(arguments.length-1)&&typeof n=="object")for(u in n)for(i=0,r=w.length;i<r;i++)w[i].axis==u&&w[i].attr("href",n[u]);for(w||lt(),i=0,r=f.length;i<r;i++)w[i]&&w[i].attr("href",f[i]);return this},a.hover=function(n,t){return et||yt(),et.mouseover(n).mouseout(t),this},a.click=function(n){return et||yt(),et.click(n),this},a.each=function(n){return yt(n),this},a.eachColumn=function(n){return lt(n),this},a}var i=function(){};i.prototype=Raphael.g;t.prototype=new i;Raphael.fn.linechart=function(n,i,r,u,f,e,o){return new t(this,n,i,r,u,f,e,o)}}(),function(){function n(n,t,i,r,u,f){function tt(n,t,i,r,u){var f=Math.PI/180,o=n+i*Math.cos(-r*f),s=n+i*Math.cos(-u*f),h=n+i/2*Math.cos(-(r+(u-r)/2)*f),c=t+i*Math.sin(-r*f),l=t+i*Math.sin(-u*f),a=t+i/2*Math.sin(-(r+(u-r)/2)*f),e=["M",n,t,"L",o,c,"A",i,i,0,+(Math.abs(u-r)>180),1,s,l,"z"];return e.middle={x:h,y:a},e}var e,w,it,ut;f=f||{};var p=this,d=[],s=n.set(),o=n.set(),h=n.set(),c=u.length,v=0,l=0,g=0,y=f.maxSlices||100,nt=parseFloat(f.minPercent)||1,b=Boolean(nt);if(o.covers=s,c==1)h.push(n.circle(t,i,r).attr({fill:f.colors&&f.colors[0]||p.colors[0],stroke:f.stroke||"#fff","stroke-width":f.strokewidth==null?1:f.strokewidth})),s.push(n.circle(t,i,r).attr(p.shim)),l=u[0],u[0]={value:u[0],order:0,valueOf:function(){return this.value}},f.href&&f.href[0]&&s[0].attr({href:f.href[0]}),h[0].middle={x:t,y:i},h[0].mangle=180;else{for(e=0;e<c;e++)l+=u[e],u[e]={value:u[e],order:e,valueOf:function(){return this.value}};for(u.sort(function(n,t){return t.value-n.value}),e=0;e<c;e++)b&&u[e]*100/l<nt&&(y=e,b=!1),e>y&&(b=!1,u[y].value+=u[e],u[y].others=!0,g=u[y].value);for(c=Math.min(y+1,u.length),g&&u.splice(c)&&(u[y].others=!0),e=0;e<c;e++){w=v-360*u[e]/l/2;e||(v=90-w,w=v-360*u[e]/l/2);f.init&&(it=tt(t,i,1,v,v-360*u[e]/l).join(","));var k=tt(t,i,r,v,v-=360*u[e]/l),rt=f.matchColors&&f.matchColors==!0?u[e].order:e,a=n.path(f.init?it:k).attr({fill:f.colors&&f.colors[rt]||p.colors[rt]||"#666",stroke:f.stroke||"#fff","stroke-width":f.strokewidth==null?1:f.strokewidth,"stroke-linejoin":"round"});a.value=u[e];a.middle=k.middle;a.mangle=w;d.push(a);h.push(a);f.init&&a.animate({path:k.join(",")},+f.init-1||1e3,">")}for(e=0;e<c;e++)a=n.path(d[e].attr("path")).attr(p.shim),f.href&&f.href[e]&&a.attr({href:f.href[e]}),a.attr=function(){},s.push(a),h.push(a)}return o.hover=function(n,f){var o,e;for(f=f||function(){},o=this,e=0;e<c;e++)(function(e,s,h){var c={sector:e,cover:s,cx:t,cy:i,mx:e.middle.x,my:e.middle.y,mangle:e.mangle,r:r,value:u[h],total:l,label:o.labels&&o.labels[h]};s.mouseover(function(){n.call(c)}).mouseout(function(){f.call(c)})})(h[e],s[e],e);return this},o.each=function(n){for(var e=this,f=0;f<c;f++)(function(f,o,s){var h={sector:f,cover:o,cx:t,cy:i,x:f.middle.x,y:f.middle.y,mangle:f.mangle,r:r,value:u[s],total:l,label:e.labels&&e.labels[s]};n.call(h)})(h[f],s[f],f);return this},o.click=function(n){for(var e=this,f=0;f<c;f++)(function(f,o,s){var h={sector:f,cover:o,cx:t,cy:i,mx:f.middle.x,my:f.middle.y,mangle:f.mangle,r:r,value:u[s],total:l,label:e.labels&&e.labels[s]};o.click(function(){n.call(h)})})(h[f],s[f],f);return this},o.inject=function(n){n.insertBefore(s[0])},ut=function(e,a,v,y){var g=t+r+r/5,rt=i,d=rt+10,w,nt,k,tt,b,it;for(e=e||[],y=y&&y.toLowerCase&&y.toLowerCase()||"east",v=n[v&&v.toLowerCase()]||"circle",o.labels=n.set(),w=0;w<c;w++)nt=h[w].attr("fill"),k=u[w].order,u[w].others&&(e[k]=a||"Others"),e[k]=p.labelise(e[k],u[w],l),o.labels.push(n.set()),o.labels[w].push(n[v](g+5,d,5).attr({fill:nt,stroke:"none"})),o.labels[w].push(tt=n.text(g+20,d,e[k]||u[k]).attr(p.txtattr).attr({fill:f.legendcolor||"#000","text-anchor":"start"})),s[w].label=o.labels[w],d+=tt.getBBox().height*1.2;b=o.labels.getBBox();it={east:[0,-b.height/2],west:[-b.width-2*r-20,-b.height/2],north:[-r-b.width/2,-r-b.height-10],south:[-r-b.width/2,r+10]}[y];o.labels.translate.apply(o.labels,it);o.push(o.labels)},f.legend&&ut(f.legend,f.legendothers,f.legendmark,f.legendpos),o.push(h,s),o.series=h,o.covers=s,o}var t=function(){};t.prototype=Raphael.g;n.prototype=new t;Raphael.fn.piechart=function(t,i,r,u,f){return new n(this,t,i,r,u,f)}}(),function(n,t,i){var d="TEXTAREA",g="function",nt="password",c="maxLength",a="type",r="",u=!0,tt="placeholder",e=!1,it="watermark",o=it,s="watermarkClass",y="watermarkFocus",v="watermarkSubmit",p="watermarkMaxLength",h="watermarkPassword",f="watermarkText",l=/\r/g,ut=/^(button|checkbox|hidden|image|radio|range|reset|submit)$/i,rt="input:data("+o+"),textarea:data("+o+")",w=":watermarkable",b=["Page_ClientValidate"],k=e,ft=tt in document.createElement("input");n.watermark=n.watermark||{version:"3.1.4",runOnce:u,options:{className:it,useNative:u,hideBeforeUnload:u},hide:function(t){n(t).filter(rt).each(function(){n.watermark._hide(n(this))})},_hide:function(n,i){var o=n[0],b=(o.value||r).replace(l,r),v=n.data(f)||r,y=n.data(p)||0,w=n.data(s),u,e;v.length&&b==v&&(o.value=r,n.data(h)&&(n.attr(a)||r)==="text"&&(u=n.data(h)||[],e=n.parent()||[],u.length&&e.length&&(e[0].removeChild(n[0]),e[0].appendChild(u[0]),n=u)),y&&(n.attr(c,y),n.removeData(p)),i&&(n.attr("autocomplete","off"),t.setTimeout(function(){n.select()},1)));w&&n.removeClass(w)},show:function(t){n(t).filter(rt).each(function(){n.watermark._show(n(this))})},_show:function(t){var w=t[0],d=(w.value||r).replace(l,r),i=t.data(f)||r,b=t.attr(a)||r,g=t.data(s),e,o,v;d.length!=0&&d!=i||t.data(y)?n.watermark._hide(t):(k=u,t.data(h)&&b===nt&&(e=t.data(h)||[],o=t.parent()||[],e.length&&o.length&&(o[0].removeChild(t[0]),o[0].appendChild(e[0]),t=e,t.attr(c,i.length),w=t[0])),(b==="text"||b==="search")&&(v=t.attr(c)||0,v>0&&i.length>v&&(t.data(p,v),t.attr(c,i.length))),g&&t.addClass(g),w.value=i)},hideAll:function(){k&&(n.watermark.hide(w),k=e)},showAll:function(){n.watermark.show(w)}};n.fn.watermark=n.fn.watermark||function(i,p){var it="string",k,b;return this.length?(k=e,b=typeof i==it,b&&(i=i.replace(l,r)),typeof p=="object"?(k=typeof p.className==it,p=n.extend({},n.watermark.options,p)):typeof p==it?(k=u,p=n.extend({},n.watermark.options,{className:p})):p=n.watermark.options,typeof p.useNative!=g&&(p.useNative=p.useNative?function(){return u}:function(){return e}),this.each(function(){var et="dragleave",ot="dragenter",ut=this,e=n(ut),st,g,it,rt;if(e.is(w)){if(e.data(o))(b||k)&&(n.watermark._hide(e),b&&e.data(f,i),k&&e.data(s,p.className));else{if(ft&&p.useNative.call(ut,e)&&(e.attr("tagName")||r)!==d){b&&e.attr(tt,i);return}e.data(f,b?i:r);e.data(s,p.className);e.data(o,1);(e.attr(a)||r)===nt?(st=e.wrap("<span>").parent(),g=n(st.html().replace(/type=["']?password["']?/i,'type="text"')),g.data(f,e.data(f)),g.data(s,e.data(s)),g.data(o,1),g.attr(c,i.length),g.focus(function(){n.watermark._hide(g,u)}).bind(ot,function(){n.watermark._hide(g)}).bind("dragend",function(){t.setTimeout(function(){g.blur()},1)}),e.blur(function(){n.watermark._show(e)}).bind(et,function(){n.watermark._show(e)}),g.data(h,e),e.data(h,g)):e.focus(function(){e.data(y,1);n.watermark._hide(e,u)}).blur(function(){e.data(y,0);n.watermark._show(e)}).bind(ot,function(){n.watermark._hide(e)}).bind(et,function(){n.watermark._show(e)}).bind("dragend",function(){t.setTimeout(function(){n.watermark._show(e)},1)}).bind("drop",function(n){var t=e[0],i=n.originalEvent.dataTransfer.getData("Text");(t.value||r).replace(l,r).replace(i,r)===e.data(f)&&(t.value=i);e.focus()});ut.form&&(it=ut.form,rt=n(it),rt.data(v)||(rt.submit(n.watermark.hideAll),it.submit?(rt.data(v,it.submit),it.submit=function(t,i){return function(){var r=i.data(v);n.watermark.hideAll();r.apply?r.apply(t,Array.prototype.slice.call(arguments)):r()}}(it,rt)):(rt.data(v,1),it.submit=function(t){return function(){n.watermark.hideAll();delete t.submit;t.submit()}}(it))))}n.watermark._show(e)}})):this};n.watermark.runOnce&&(n.watermark.runOnce=e,n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(t){return function(i){return!!n.data(i,t)}}):function(t,i,r){return!!n.data(t,r[3])},watermarkable:function(n){var t,i=n.nodeName;return i===d?u:i!=="INPUT"?e:(t=n.getAttribute(a),!t||!ut.test(t))}}),function(t){n.fn.val=function(){var u=this,e=Array.prototype.slice.call(arguments),s;return u.length?e.length?(t.apply(u,e),n.watermark.show(u),u):u.data(o)?(s=(u[0].value||r).replace(l,r),s===(u.data(f)||r)?r:s):t.apply(u):e.length?u:i}}(n.fn.val),b.length&&n(function(){for(var i,r,u=b.length-1;u>=0;u--)i=b[u],r=t[i],typeof r==g&&(t[i]=function(t){return function(){return n.watermark.hideAll(),t.apply(null,Array.prototype.slice.call(arguments))}}(r))}),n(t).bind("beforeunload",function(){n.watermark.options.hideBeforeUnload&&n.watermark.hideAll()}))}(jQuery,window),function(n,t,i){function v(){u=t("#fit_email").val();f=t("#fit_session").val()}var r="http://192.168.0.50/result/public",o=-1,s=new Map,e=["st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","st","nd","rd","th","th","th","th","th","th","th","st"],k=["January","February","March","April","May","June","July","August","September","October","November","December"],h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l=null,d=0,c=0,a=["#027dd3","#5db75d","#de524c","#E46D0A","#31849B","#00B050","#7030A0","#00B0F0","#FFC000","#92D050"],g=[1,2,3,4,5,6,7,8,9,22,23,24,25,26,27,28,29,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],u="LoggedOut",f="LoggedOut",y,p,w,b;n.Data=new function(){this.CurrentDiaryID=-1;this.CurrentDiaryDate="";this.CurrentDiaryObject=null};n.CORE={};n.CORE.APIURL="http://192.168.0.50/result/public";n.CORE.userSession="";n.CORE.userEmail="";n.CORE.SetSession=function(r,u){n.CORE.userSession=u;n.CORE.userEmail=r;u==i&&(n.CORE.userSession=t("#fit_session").val());r==i&&(n.CORE.userEmail=t("#fit_email").val())};n.CORE.ConsoleLog=function(n){if(1)try{window.console&&console.log(n)}catch(t){}};n.CORE.DoCallBack=function(i,r,u){i=n.CORE.APIURL+i+"?jsoncallback=?";var f={email:n.CORE.userEmail,SessionGuid:n.CORE.userSession};t.extend(r,f);console.log(n.CORE.userEmail,n.CORE.userSession,r,f);t(".fitLoader").show();t.getJSON(i,r,u).always(function(){t(".fitLoader").hide()})};n.CORE.IsValueInElementCollection=function(n,i){var r=!1;return t(n).each(function(){if(this.value==i)return r=!0,!1}),r};n.CORE.AddLabel=function(n,t,i){for(var r=0;r<i;r++)n.push(t)};n.CORE.NullIfBlank=function(n){return n==""?null:n};n.CORE.formatMinsToHHMM=function(n){var i=Math.floor(n/60),t=Math.floor(n%60);return i+":"+(t<10?"0"+t:t)};n.CORE.formatDate=function(n,t){switch(t){case 1:return new Date(parseInt(n));case 2:return parseInt(n);case 3:return new Date(parseInt(n)).getFullYear()+"-"+(new Date(parseInt(n)).getMonth()+1)+"-"+new Date(parseInt(n)).getDate();case 4:return new Date(parseInt(n)).getDate()+"-"+h[new Date(parseInt(n)).getMonth()]+"-"+(new Date(parseInt(n)).getFullYear()+"").substring(2,4);case 5:return n.getDate()+"-"+h[n.getMonth()]+"-"+n.getFullYear()+"";default:return parseInt(n)}};n.test="aaa";n.mealPlanner={};y=function(){function d(n){return!isNaN(parseFloat(n))&&isFinite(n)}function yt(){p="";w=0;c=0}function et(){t("#entry-message").hide();t(".just-added").hide()}function k(n){try{t("#entry-message").html(n);t("#entry-message").show();t(".just-added").hide()}catch(i){}}function pt(n){var i=r+"/Foods/DeleteFood?jsoncallback=?",f=t("#fit_email").val(),u=t("#fit_session").val();t.getJSON(i,{email:t("#fit_email").val(),SessionGuid:u,foodEatenId:n},function(n){n.MessageId!=0&&alert(n.Message)})}function ot(n){h=t("#fit_caloriegoal").val();h&&h!=null||(h="");h==""?t(".calories-remaining .title span").html("<a href='/member/daily-calorie-calculator/'>Set Goal<\/a>"):t(".calories-remaining .title span").text(h-n)}function wt(i,e,o,s,h){var p=r+"/Foods/SaveMeal?jsoncallback=?",c={},l,a,v,y;for(c.MealName=i,c.MealDescription=e,c.WhenEatenId=o,c.IsPublic=s,c.MealFoods=[],n.CORE.ConsoleLog(h),l=0;l<h.size();l++)if(a=h.get(l),v=a.food,v!=null){var w=t(this).data("foodid"),b=t(this).data("servingsizeid"),k=t(this).data("servings");c.MealFoods.push(new st(v.FoodId,a.servingSizeId,a.servingCount))}y=t.toJSON(c);t.ajax({url:p,type:"GET",dataType:"json",data:{jsonMeal:y,email:u,SessionGuid:f},contentType:"application/json; charset=utf-8",success:function(){alert("New meal is added successfully!");t("#fit-new-meal").dialog("close")}})}function st(n,t,i){this.FoodId=n;this.ServingSizeId=t;this.Servings=i}function ht(){var n,i;if(nt="",t("#enter-calories").is(":visible"))return(n=parseFloat(t("#calories-quantity").val()),d(n)&&(n<=0||n>5e3))?(k("Calories are optional and if specified can be up to 5000"),!1):(t("#what-eaten").val().length>0&&ri(),!1);if(i=parseFloat(t("#how-much").val()),t("#search-food").is(":visible")){if(p.length<=0)return t("#product-name").val().length>0?k("Click on a food from the database to select it, or if you can't find the food you want click 'enter new food' or let us know and we'll add it."):k("Enter what food you ate"),!1;if(!d(t("#how-much").val())||i<=0)return k("So how much did you eat?"),!1;if(!t("#serving").val())return k("Please choose a serving option once downloaded."),!1;p.length>0&&(t("#entry-message").hide(),ii())}return!1}function bt(){t("#search-food").hide();t("#enter-calories").show()}function kt(){t("#search-food").show();t("#enter-calories").hide()}function dt(){var n=t("#product-name"),i;n.val("");t("#how-much").val("");i=t("#sch-results");n.length>0&i.length==0&&t("<div id='sch-results'>\n<div id='sch-header'>\n<div class='food-name'>Food<\/div>\n<div class='vitaminc col'>Energy (kcal)<\/div>\n<div class='calcium col'>Total fat<\/div>\n<div class='carbohydrate col'>Saturated fat<\/div>\n<div class='energkcal col'>Fibre<\/div>\n<div class='folicacid col'>Carbohydrate<\/div>\n<div class='magnesium col'>Protein<\/div>\n<div class='protein col'>Salt<\/div>\n<div class='sugartot col'>Water<\/div>\n<\/div>\n<div id='sch-content'><\/div>\n<\/div>").appendTo(document.body);n.bind("keyup focusin",function(){var i=t.trim(n.val());i.length>2?i!=nt&&(t("#sch-results").is(":visible")&&t("#sch-content").text(""),t("#product-name").addClass("ui-autocomplete-loading"),gt(i)):tt()});n.blur(function(){t("body").click(function(n){var i=t(n.target),r=i.parents("#sch-results");r.length==0&&tt()})});t(window).resize(function(){ct()})}function gt(n){nt=n;var i=r+"/Foods/GetFoods?jsoncallback=?";t.getJSON(i,{foodName:n,searchNZ:at,searchUSA:vt},ni)}function ni(n){o=n;var i=t("#sch-content"),r=t(i).parent();t("#sch-content").html("");r.is(":hidden")&n.length>0&&(r.show(),ct());t(n).each(function(r){var u=t("<div class='row'>\n<div class='food-name'>"+n[r].LongDesc+"<\/div>\n<div class='kcal col'>"+n[r].EnergKcal+"<\/div>\n<div class='col'>"+y(n[r].LipidTotal)+"<\/div>\n<div class='col'>"+y(n[r].FASat)+"<\/div>\n<div class='col'>"+y(n[r].Fiber)+"<\/div>\n<div class='col'>"+y(n[r].Carbohydrate)+"<\/div>\n<div class='col'>"+y(n[r].Protein)+"<\/div>\n<div class='col'>"+y(n[r].Sodium)+"<\/div>\n<div class='col'>"+y(n[r].Water)+"<\/div>\n<div class='id col'>"+n[r].FoodId+"<\/div>\n<\/div>");t(u).data("foodItem",n[r]);u.appendTo(i)});t("#product-name").removeClass("ui-autocomplete-loading");t("#sch-content .row").click(ti)}function ti(){p=t(this).children(".food-name").text();w=t(this).children(".id").text();c=parseInt(t(this).children(".kcal").text());t("#product-name").val(p);t("#how-much").val("1");ft=t(this).data("foodItem");tt();ei(w);t("#how-much").focus()}function tt(){t("#sch-results").hide();t("#sch-content").text("")}function ct(){if(t("#sch-results").is(":visible")){var n=t("#product-name"),i=n.offset();t("#sch-results").css({top:i.top+n.outerHeight()})}}function ii(){var i=ui();t(".just-added").remove();it(p,(c*i).toFixed(0));l+=c*i;g();a+=1;s==!1&&fi(t("#when-serving").val(),i,a);var r=t.datepicker.formatDate("dd-M-y",t("#fit_datepicker").datepicker("getDate")),u=t("#fit_datepicker").datepicker("getDate"),f=u.getDay()==0?6:u.getDay()-1;s==!0&&n.mealPlanner.addFoodToPlanner(r,t("#when-serving").val(),ft,a,f,t("#how-much").val(),t("#serving option:selected").text(),lt(),t("#serving").val());oi(w,t("#serving").val(),t("#when-serving").val(),r,t("#how-much").val(),a);t("#product-name, #how-much").val("");t("#serving").html("");t("#serving").val("");yt();t("#product-name").focus()}function ri(){var r,u,f,i;c=parseInt(t("#calories-quantity").val());r=t("#what-eaten").val();t(".just-added").remove();d(c)?(it(r,c.toFixed(0)),l+=c,g()):it(r,"unknown");u=t("#when-serving-cal").val();f=t("#when-serving-cal option:selected").text();a+=1;var e=t.datepicker.formatDate("dd-M-y",t("#fit_datepicker").datepicker("getDate")),i=t("#fit_datepicker").datepicker("getDate"),o=i.getDay()==0?6:i.getDay()-1,h=n.mealPlanner.getManualFoodObject(t("#calories-quantity").val(),t("#what-eaten").val());s==!0&&n.mealPlanner.addFoodToPlanner(e,u,h,a,o,1,"serving",null,null);i=t.datepicker.formatDate("dd-M-y",t("#fit_datepicker").datepicker("getDate"));si(u,i,c,t("#what-eaten").val(),a);t("#calories-quantity").val("");t("#what-eaten").focus()}function it(n,i){t("<dl class='just-added'>\n<dt>You have just added:<\/dt>\n<dd>"+n+" ("+i+" calories)<\/dd>\n<\/dl>").appendTo(".food-form");t(".just-added").show()}function g(){var n,i;(t(".box-consumed span").text(Math.round(l).toFixed(0)),h!="")&&(n=h-l,t(".calories-remaining .title span").text(n.toFixed(0)),i=t("#progress-bar").width(),i=i>0?(h-n)/(h/100)+"%":"100%",t("#progress-bar").width(i).css("visibility","visible"),t("#progress-bar strong").remove(),t("#progress-bar").width()>t("#progress-bar").parent().width()&&(t("#progress-bar").css("background","red"),t("<strong>"+n.toFixed(0)*-1+" Over Goal<\/strong>").appendTo("#progress-bar")))}function y(n){return n==null?"&nbsp;":n}function rt(n,i,r,u,f,e,o,s,h,c,a,v,y,p,w,b,k){var rt,ut;t("#log-"+i).is(":visible")||t("<div id='log-"+i+"'><ul class='table'>\n<li class='thead'>\n<ul><li class='foodn'><span data-wheneatenid="+i+" class='fit-save-meal' title='Click to save this as a meal for easy entry!'><h3 class='fit-mealtime'>"+r+"<\/h3><span class='ui-icon ui-icon-disk'><\/span><\/span><\/li>\n<li class='cals'>Cals<\/li>\n<li class='fat'>Fat<\/li>\n<li class='satfa'>Sat fat<\/li>\n<li class='fiber'>Fibre<\/li>\n<li class='carbs'>Carbs<\/li>\n<li class='protein'>Protein<\/li>\n<li class='salt'>Salt<\/li>\n<li class='sugars'>Sugars<\/li>\n<\/ul><\/li><li class='tbody droptrue'><ul><\/ul>\n<\/li>\n<li class='tfoot'><ul>\n<li class='foodn'>"+r+" Totals<\/li>\n<li class='cals'>0<\/li>\n<li class='fat'>0<\/li>\n<li class='satfa'>0<\/li>\n<li class='fiber'>0<\/li>\n<li class='carbs'>0<\/li>\n<li class='protein'>0<\/li>\n<li class='salt'>0<\/li>\n<li class='sugars'>0<\/li>\n<\/ul><\/li><\/ul><\/li><\/div>").appendTo("#food-log");var tt=t("#log-"+i).find("li.tbody").children("ul"),it="<ul class='buttons'><li class='delete ui-state-default ui-corner-all' ><span class='ui-icon ui-icon-close'><\/span><\/li><\/ul>",nt=null;s=="&nbsp;"?(rt=d(o)?o.toFixed(2).replace(/[.,]00$/,""):"&nbsp;",nt=t("<li class='food-eaten' data-foodid=null data-kcals=0 data-recordid="+n+"><ul>\n<li class='foodn'>"+it+f+"<\/li>\n<li class='manual servings cals'>"+rt+"<\/li>\n<li class='manual servings fat'>"+s+"<\/li>\n<li class='manual servings satfa'>"+h+"<\/li>\n<li class='manual servings fiber'>"+c+"<\/li>\n<li class='manual servings carbs'>"+a+"<\/li>\n<li class='manual servings protein'>"+v+"<\/li>\n<li class='manual servings salt'>"+y+"<\/li>\n<li class='manual servings sugars'>"+w+"<\/li>\n<\/ul><\/li>").appendTo(tt)):nt=t("<li class='food-eaten' data-foodid="+k+" data-servingsizeid="+b+" data-servings="+e+" data-kcals="+(o*u).toFixed(2).replace(/[.,]00$/,"")+" data-recordid="+n+"><ul>\n<li class='foodn'>"+it+e+" x "+f+"<\/li>\n<li class='servings cals'>"+(o*u).toFixed(2).replace(/[.,]00$/,"")+"<\/li>\n<li class='servings fat'>"+(s*u).toFixed(2).replace(/[.,]00$/,"")+"<\/li>\n<li class='servings satfa'>"+(h*u).toFixed(2).replace(/[.,]00$/,"")+"<\/li>\n<li class='servings fiber'>"+(c*u).toFixed(2).replace(/[.,]00$/,"")+"<\/li>\n<li class='servings carbs'>"+(a*u).toFixed(2).replace(/[.,]00$/,"")+"<\/li>\n<li class='servings protein'>"+(v*u).toFixed(2).replace(/[.,]00$/,"")+"<\/li>\n<li class='servings salt'>"+(y*u).toFixed(2).replace(/[.,]00$/,"")+"<\/li>\n<li class='servings sugars'>"+(w*u).toFixed(2).replace(/[.,]00$/,"")+"<\/li>\n<\/ul><\/li>").appendTo(tt);ut=t(nt).find("ul.buttons li");t(ut).bind({mouseenter:function(){t(this).addClass("ui-state-hover")},mouseleave:function(){t(this).removeClass("ui-state-hover")},click:function(){var n=t(this).parents("li.food-eaten"),r=t(n).attr("data-recordid"),u=t(n).attr("data-kcals"),i;return pt(r),i=t(".food-eaten").length,t(this).parent().parent().parent().parent().remove(),i==1?l=0:l-=u,g(),et(),!1},blur:function(){}});t(nt).bind({mouseenter:function(){t(this).find(".buttons").show()},mouseleave:function(){t(this).find(".buttons").hide()},click:function(){},blur:function(){}})}function lt(){var n=t("#serving").find("option:selected");return servingWeight=n.data("servingweight")}function ui(){var n=t("#how-much").val(),i=lt();return i/100*n}function fi(n,i,r){if(o!=0){var u=t("#when-serving option:selected").text(),f=t("#when-serving").val();t(o).each(function(n){if(o[n].FoodId==w){var s=t("#how-much").val(),e=t("#serving").val();rt(r,f,u,i,o[n].ShortDesc,t("#how-much").val(),o[n].EnergKcal,o[n].LipidTotal,o[n].FASat,o[n].Fiber,o[n].Carbohydrate,o[n].Protein,o[n].Sodium,o[n].Water,o[n].SugarTot,e,w)}});t("li.droptrue > ul").sortable({placeholder:"ui-state-highlight",connectWith:"li.tbody > ul"});t("li.droptrue > ul").disableSelection()}}function ei(n){var i=r+"/Foods/GetFoodServings?jsoncallback=?";t.getJSON(i,{foodid:n},function(n){s==!0&&t("#serving").combobox("destroy");t("#serving").html("");t("#serving").val("");var i="selected=selected ";t.each(n,function(n,r){r.ServingDesc=="g"?t("#serving").append(t("<option "+i+"data-servingweight="+r.ServingWeight+"><\/option>").val(r.ServingSizeId).html("grams")):t("#serving").append(t("<option "+i+"data-servingweight="+r.ServingWeight+"><\/option>").val(r.ServingSizeId).html(r.ServingDesc+", "+r.ServingWeight+"g"));i=""});s==!0&&t("#serving").combobox();n.length>0})}function oi(n,i,u,f,e,o){var s=r+"/Foods/EatFood?jsoncallback=?",h=t.datepicker.formatDate("dd-M-yy",t("#fit_datepicker").datepicker("getDate"));t.getJSON(s,{email:t("#fit_email").val(),dateEaten:h,tokenId:o,foodId:n,servings:e,servingSizeId:i,whenEatenId:u},function(n){var i=t("ul").find("[data-recordid='"+o+"']");i&&t(i).attr("data-recordid",n.foodEatenId)})}function si(n,i,u,f,e){var o=r+"/Foods/EatFood?jsoncallback=?",s=t.datepicker.formatDate("dd-M-yy",t("#fit_datepicker").datepicker("getDate"));t.getJSON(o,{email:t("#fit_email").val(),dateEaten:s,tokenId:e,foodId:null,servings:1,servingSizeId:0,whenEatenId:n,calories:u,description:f},function(n){var i=t("ul").find("[data-recordid='"+e+"']");i&&t(i).attr("data-recordid",n.foodEatenId)})}function ut(n){et();var i=r+"/Foods/GetFoodEaten?jsoncallback=?",u=t.datepicker.formatDate("dd-M-yy",n),f=t("#fit_email").val(),e=t("#fit_session").val();t.getJSON(i,{dateEaten:u,SessionGuid:e,email:f},function(n){n.MessageId==0&&(t("#food-log").html(""),l=0,t.each(n.FoodEaten,function(n,t){var i=t.ServingWeight/100*t.Servings;t.Food==null?rt(t.FoodEatenId,t.WhenEatenId,t.WhenEaten,1,t.Description,1,t.Calories,"&nbsp;","&nbsp;","&nbsp;","&nbsp;","&nbsp;","&nbsp;","&nbsp;","&nbsp;",null,null):rt(t.FoodEatenId,t.WhenEatenId,t.WhenEaten,i,t.Food.ShortDesc,t.Servings,t.Food.EnergKcal,t.Food.LipidTotal,t.Food.FASat,t.Food.Fiber,t.Food.Carbohydrate,t.Food.Protein,t.Food.Sodium,t.Food.Water,t.Food.SugarTot,t.ServingSizeId,t.FoodId);l=l+t.Calories}),ot(l),c=0,g())})}var h="",p="",w=0,c=0,o=0,ft=null,l=0,a=0,nt="",at=!0,vt=!1,s=!1,b=-1;this.start=function(){v();s=t("#fit-calendar").length==1;ot(0);dt();ut(new Date);t.fn.tooltip!=i?t("#food-log").tooltip({tooltipClass:"fit-ui",position:{my:"center bottom-15",at:"center top",using:function(n,i){t(this).css(n);t("<div><h1>thing<\/h1>").addClass("arrow bottom").addClass(i.vertical).addClass(i.horizontal).appendTo(this)}}}):n.CORE.ConsoleLog("Tooltip library not available.");s==!0&&(t("#serving").combobox(),t("#when-serving-cal").combobox(),t("#when-serving").combobox());t("#fit-popup-mealinfo").on("click","#fit-saveas-meal",function(){return b=t(this).data("wheneatenid"),t("#fit-mealwhenid option[value='"+b+"']").attr("selected","selected"),n.mealPlanner.isMealEditorInitialised==!1&&n.mealPlanner.initialiseMealEditor(),t("#fit-new-meal").dialog({dialogClass:"fit-dialogtitle",resizable:!1,width:"auto",modal:!0,create:function(){t(".ui-dialog").wrap('<div class="fit-ui" />')},open:function(){t(".ui-widget-overlay").wrap('<div class="fit-ui" />');t(".fit-new-meal-right").hide()},close:function(){t(".fit-ui").filter(function(){return t(this).text()==""?!0:!1}).remove()}}).dialog("open"),!1});t(".food-form").on("keydown",".ui-combobox-input, #how-much",function(n){if(n.keyCode==13)return ht()});t(".food-form").on("keydown","#product-name",function(n){if(n.keyCode==13)return t("#food-log").tooltip("open"),!1});t("#fit-new-meal #btn-cancel").live("click",function(){t("#fit-new-meal").dialog("close")});t("#fit-new-meal #btn-save").live("click",function(){var i=t("#fit-new-meal #fit-mealname").val(),r=t("#fit-new-meal #fit-mealdesc").val(),h=t("#fit-new-meal #fit-mealwhenid").val(),c=t("#fit-new-meal #fit-mealpublic").is(":checked"),u=parseFloat(t("#fit-new-meal #fit-newmeal-totalfat").val()),e=parseFloat(t("#fit-new-meal #fit-newmeal-fasat").val()),f=parseFloat(t("#fit-new-meal #fit-newmeal-carb").val()),o=parseFloat(t("#fit-new-meal #fit-newmeal-sugars").val()),l,s;if(i.length==0){alert("Meal name could not be blank!");return}if(i.length>80){alert("Meal name could not exceed 80 characters!");return}if(r.length==0){alert("Meal description could not be blank!");return}if(r.length>4e3){alert("Meal description could not exceed 4000 characters!");return}if(t(".fit-new-meal-right").is(":visible")==!0){if(!isNaN(u)&&!isNaN(e)&&e>u){alert("Please enter saturated fats as a portion of total fats -- saturated fats should be less than "+u+" grams");return}if(!isNaN(e)&&isNaN(u)){alert("If you are unsure how much total fat is in this meal please use the saturated fat figure for total fats.");return}if(!isNaN(f)&&!isNaN(o)&&o>f){alert("Please enter sugars as a portion of total carbs -- sugars should be less than "+f+" grams");return}if(!isNaN(o)&&isNaN(f)){alert("If you are unsure how many total carbs is in this meal please use the sugars figure for total carbs.");return}n.CORE.ConsoleLog("Add new meal with manual nutrients");n.mealPlanner.AddNewBasicMeal(i,r,h,c)}else n.CORE.ConsoleLog("Add new meal from foodlist "),l=t("#fit-popup-mealinfo"),s=t.data(document.body,"foodlist"),n.CORE.ConsoleLog(s),wt(i,r,h,c,s)});t("#food-log").on("click",".fit-save-meal",function(){return b=t(this).data("wheneatenid"),t("#fit-mealwhenid option[value='"+b+"']").attr("selected","selected"),t("#fit-new-meal").dialog({dialogClass:"fit-dialogtitle",resizable:!1,width:"auto",modal:!0,create:function(){t(".ui-dialog").wrap('<div class="fit-ui" />')},open:function(){t(".ui-widget-overlay").wrap('<div class="fit-ui" />')},close:function(){t(".fit-ui").filter(function(){return t(this).text()==""?!0:!1}).remove()}}).dialog("open"),!1});t("#fit_datepicker").datepicker({beforeShow:function(){n.CORE.ConsoleLog("dp1");t(this).datepicker("widget").addClass("fit-ui")},onClose:function(){t(this).datepicker("widget").removeClass("fit-ui")},defaultDate:new Date,onSelect:function(){n.CORE.ConsoleLog("dp2");t("#fit_datepicker").datepicker("hide");var i=t("#fit_datepicker").datepicker("getDate");t("#fit_selecteddate").button("option","label",t.datepicker.formatDate("D",i)+" "+i.getDate()+e[i.getDate()-1])}}).wrap("<div class='test'/>");t("#fit_prevdate").button({text:!1,icons:{primary:"ui-icon-triangle-1-w"}}).click(function(){var i=t("#fit_datepicker").datepicker("getDate");return s==!0&&i.getDay()==1&&n.mealPlanner.scrollToPreviousWeek(i),i.setDate(i.getDate()-1),t("#fit_datepicker").datepicker("setDate",i),t("#fit_selecteddate").button("option","label",t.datepicker.formatDate("D",i)+" "+i.getDate()+e[i.getDate()-1]),s==!1&&ut(i),!1}).next().button({icons:{primary:"ui-icon-calendar"}}).click(function(){return t("#fit_datepicker").datepicker("show"),!1}).next().button({text:!1,icons:{primary:"ui-icon-triangle-1-e"}}).click(function(){var i=t("#fit_datepicker").datepicker("getDate");return s==!0&&i.getDay()==0&&n.mealPlanner.scrollToNextWeek(),i.setDate(i.getDate()+1),t("#fit_datepicker").datepicker("setDate",i),t("#fit_selecteddate").button("option","label",t.datepicker.formatDate("D",i)+" "+i.getDate()+e[i.getDate()-1]),s==!1&&ut(i),!1}).parent().buttonset();t("#fit_datepicker").datepicker("setDate",new Date);t("#fit_selecteddate").button("option","label",t.datepicker.formatDate("D",new Date)+" "+(new Date).getDate()+e[(new Date).getDate()-1]);t("#fit_addnutrition").button();t("#fit_addnutrition").click(function(){return ht()});t(".enter-manually").click(function(){return bt(),!1});t(".search-food").click(function(){return kt(),!1})}};n.foodLog=new y;n.mealPlanner={isMealEditorInitialised:!1,thisWeeksStats:Object,getNewStatsObject:function(){var n={};return n.cals_total=0,n.fat_total=0,n.satfa_total=0,n.fiber_total=0,n.carbs_total=0,n.protein_total=0,n.water_total=0,n.salt_total=0,n.sugars_total=0,n},initWeeklyStats:function(){n.mealPlanner.thisWeeksStats=n.mealPlanner.getNewStatsObject()},addStat:function(n,t,i){if(n.IsManual==!0){t.cals_total+=n.EnergKcal;window.console;return}t.cals_total+=n.EnergKcal*i;t.fat_total+=n.LipidTotal*i;t.satfa_total+=n.FASat*i;t.fiber_total+=n.Fiber*i;t.carbs_total+=n.Carbohydrate*i;t.protein_total+=n.Protein*i;t.salt_total+=n.Sodium*i;t.water_total+=n.Water*i;t.sugars_total+=n.SugarTot*i},addFoodToPlanner:function(t,i,r,u,f,e,o,h,c){var l=n.mealPlanner.getFoodItemObject(null,t,i,"desc",r,u,e,o,h,c),a=n.mealPlanner.addFoodItemToMap(s,l);n.mealPlanner.clear_calendar_cell(i,f);n.mealPlanner.populate_calendar_cell(i,f,a)},start:function(){var h,a,y,e,o,w,p;v();n.mealPlanner.initWeeklyStats();d=0;c=t(".fit-ui").offset().top-80;h=r+"/Foods/GetMyFrequentMeals?jsoncallback=?";t.getJSON(h,{email:u,SessionGuid:f},function(i){for(var h=i.Meals,u=new Map,e,c,o,f,s,l,a,r=0;r<h.length;r++)e=h[r],u.containsKey(e.Description)?u.get(e.Description).add(e):(c=new ArrayList,c.add(e),u.put(e.Description,c));for(t("#fit-t-l").hide(),r=0;r<u.keys().length;r++)for(t("#fit-typical").children().eq(0).append('<p style="margin:0px;margin-left:-20px;font-size:11px;">--'+u.keys()[r]+"--<\/p>"),o=u.get(u.keys()[r]),f=0;f<o.size();f++)s=t('<p class="ui-state-default ui-corner-all ui-helper-clearfix fit-itm">'+o.get(f).MealName+"<\/p>"),s.data("mealid",o.get(f).MealId),s.data("desc",o.get(f).MealDescription),s.data("mealname",o.get(f).MealName),t("#fit-typical").children().eq(0).append(s);n.mealPlanner.render_item();l=t("#fit_mealpane_collapsible").val()=="true"?!0:!1;h.length>0?(t(".fit-meal-typical").prependTo("#fit-accordion"),t("#fit-accordion").accordion({active:!1,header:"h3",collapsible:l}),t("#fit-accordion").accordion({active:0}),window.console&&console.log("activating 0")):(a=t("#fit-accordion").accordion({header:"h3",collapsible:l}),t(".fit-meal-typical").hide(),t("#fit-accordion").accordion({active:0}),window.console&&console.log("activing 1"));t("#fit-new-meal-btn").prependTo("#fit-accordion")});t("#fit-new-meal-btn").click(function(){t(".fit-new-meal-right").show();n.mealPlanner.isMealEditorInitialised==!1?n.mealPlanner.initialiseMealEditor():(t("#fit-mealname").val(""),t("#fit-newmeal-cal").val(),t("#fit-newmeal-carb").val(),t("#fit-newmeal-chol").val(),t("#fit-newmeal-fiber").val(),t("#fit-newmeal-totalfat").val(),t("#fit-newmeal-fasat").val(),t("#fit-newmeal-salt").val(),t("#fit-newmeal-protein").val(),t("#fit-newmeal-sugars").val(),t("textarea.tinymce").html(""));t("#fit-new-meal").dialog({dialogClass:"fit-dialogtitle",resizable:!1,width:"auto",modal:!0,create:function(){t(".ui-dialog").wrap('<div class="fit-ui" />')},open:function(){t(".ui-widget-overlay").wrap('<div class="fit-ui" />')},close:function(){t(".fit-ui").filter(function(){return t(this).text()==""?!0:!1}).remove()}}).dialog("open")});t("#fit-new-meal #btn-cancel").live("click",function(){t("#fit-new-meal").dialog("close")});t("fit-new-meal-btn #btn-save").live("click",function(){window.console&&console.log("new basic meal-1");var i=t("#fit-new-meal #fit-mealname").val(),r=t("#fit-new-meal #fit-mealdesc").val(),u=t("#fit-new-meal #fit-mealwhenid").val(),f=t("#fit-new-meal #fit-mealpublic").is(":checked");if(i.length==0){alert("Meal name could not be blank!");return}if(i.length>80){alert("Meal name could not exceed 80 characters!");return}if(r.length==0){alert("Meal description could not be blank!");return}if(r.length>4e3){alert("Meal description could not exceed 4000 characters!");return}n.mealPlanner.AddNewBasicMeal(i,r,u,f)});n.mealPlanner.loadAllMeals();a=r+"/Foods/GetNutrionistRecipes?jsoncallback=?";t.getJSON(a,{email:u,SessionGuid:f},function(i){var u=i.Meals,r,f;for(t("#fit-n-l").hide(),r=0;r<u.length;r++)f=t('<p class="ui-state-default ui-corner-all ui-helper-clearfix fit-itm">'+u[r].MealName+"<\/p>"),f.data("mealid",u[r].MealId),f.data("desc",u[r].MealDescription),f.data("mealname",u[r].MealName),t("#fit-nutri-content").append(f);n.mealPlanner.render_item()});y=r+"/Foods/GetDrinks?jsoncallback=?";t.getJSON(y,{email:u,SessionGuid:f},function(i){var f=i.Drinks,r,u;for(t("#fit-d-l").hide(),r=0;r<f.length;r++)u=t('<p class="ui-state-default ui-corner-all ui-helper-clearfix fit-itm">'+f[r].LongDesc+"<\/p>"),u.data("foodid",f[r].FoodId),u.data("mealid",-2),u.data("servingsizeid",f[r].ServingSizeId),u.data("desc",f[r].LongDesc),u.data("mealname",f[r].LongDesc),t("#fit-drinks").append(u);n.mealPlanner.render_item()});e=new Date;o=n.mealPlanner.getQueryStr("ctx");o!=""&&(e=new Date(parseInt(o)));e=n.mealPlanner.getMonday(e);n.mealPlanner.calculate_calendar(e,"fit-active-cal");n.mealPlanner.render_calendar();t(".fit-itm").livequery(function(){t(this).draggable({helper:"clone",opacity:.35,appendTo:"parent"});t(this).disableSelection()});t(".fit-op").livequery(function(){var e=t(this);t(this).droppable({accept:".fit-itm, .fit-meal",tolerance:"intersect",hoverClass:"fit-ovr",drop:function(o,s){var l=s.draggable.data("mealid"),a=s.draggable.data("foodid"),y,p,h,c,w,v;(l!=null&&l!="undefined"&&l!=i||a!=null&&a!="undefined"&&a!=i)&&(y=null,p=null,s.draggable.hasClass("fit-meal")&&(y=n.mealPlanner.getDate(s.draggable.parent(),4),p=n.mealPlanner.getWhen(s.draggable.parent())),h=n.mealPlanner.getDate(e,4),c=n.mealPlanner.getWhen(e),y!=h||p!=c)&&(t("#fit-w-l").show(),s.draggable.hasClass("fit-meal")?(w=r+"/Meals/UpdateMealTimings?jsoncallback=?",t.getJSON(w,{email:u,SessionGuid:f,mealId:l,originalDateEaten:y,originalWhenEatenId:p,newDateEaten:h,newWhenEatenId:c},function(n){n.MessageId==0?s.draggable.appendTo(e):alert("Sorry, the new meal time could not be saved to the database - is your network connection OK?");t("#fit-w-l").hide()})):a?(v=r+"/Foods/EatFood?jsoncallback=?",t.getJSON(v,{email:u,SessionGuid:f,dateEaten:h,foodId:a,servings:1,servingSizeId:s.draggable.data("servingsizeid"),whenEatenId:c,tokenId:1234},function(i){if(i.MessageId==0){var r=t('<p class="ui-state-default ui-corner-all ui-helper-clearfix fit-meal"><\/p>');n.mealPlanner.addFoodToPlanner(h,c,i.Food,i.foodEatenId,e.index()-1,1,i.ServingSize.ServingDesc,i.ServingSize.ServingWeight,s.draggable.data("servingsizeid"))}else alert("Save data error!");t("#fit-w-l").hide()})):(v=r+"/Foods/EatMeal?jsoncallback=?",t.getJSON(v,{email:u,SessionGuid:f,dateEaten:h,mealId:l,whenEatenId:c},function(i){if(i.MessageId==0){var r=t('<p class="ui-state-default ui-corner-all ui-helper-clearfix fit-meal"><\/p>');r.data("mealid",s.draggable.data("mealid"));r.data("desc",s.draggable.data("desc"));r.data("mealname",s.draggable.html());r.data("whenid",c);r.data("eatdate",h);r.append(n.mealPlanner.wrap_text(s.draggable.html(),20));r.appendTo(e)}else alert("Save data error!");t("#fit-w-l").hide()})),t("#fit-popup-tooltip").is(":visible")&&t("#fit-popup-tooltip").hide())}})});t(".fit-meal").livequery(function(){t(this).draggable({helper:function(){return t(this).clone().width(t(this).width())},opacity:.35,appendTo:"body"});t(this).disableSelection()});t("body").droppable({accept:".fit-meal",tolerance:"intersect",drop:function(i,e){var s=t("#fit-calendar").offset().left,h=t("#fit-calendar").offset().top,y=t("#fit-calendar").width(),p=t("#fit-calendar").height(),c=i.pageX,l=i.pageY;if(!(c>s&&c<s+y&&l>h&&l<h+p)){t("#fit-w-l").show();var w=r+"/Meals/DeletePersonMeal?jsoncallback=?",a=n.mealPlanner.getDate(e.draggable.parent(),4),v=n.mealPlanner.getWhen(e.draggable.parent()),o=e.draggable.data("mealid"),b=e.draggable.data("foodeatenid");o==-2||o==-1?n.mealPlanner.deleteFoodEntryFromCalendar(v,a,o==-2?!0:!1,e):t.getJSON(w,{email:u,SessionGuid:f,mealId:o,dateEaten:a,whenEatenId:v},function(n){n.MessageId==0?e.draggable.remove():alert("delete error!");t("#fit-w-l").hide()});t("#fit-popup-tooltip").is(":visible")&&t("#fit-popup-tooltip").hide()}}});w=null;t("#fit-nav-left").live("click",function(){n.mealPlanner.scrollToPreviousWeek(null)});t("#fit-nav-right").live("click",function(){n.mealPlanner.scrollToNextWeek()});t(".fit-cls").live("click",function(){t("#fit-popup-mealinfo").dialog("close")});t(".fit-meal").live("click",function(){var r=t(this).data("mealid"),u=t(this).data("whenid"),e=t(this).data("foodid"),o=t(this).data("desc"),f=t(this).data("mealname"),c=t(this).data("eatdate"),h;if(r!=null&&r!=""&&r!=i){if(r==-2&&e!=null){n.mealPlanner.food_query(e);return}h=t(this).data("dataonclient");r==-1?f="Other meal":r==-2&&(f="Drinks");typeof u!="undefined"&&u!==!1&&h==!0?n.mealPlanner.client_query(r,u,o,f,c,s):n.mealPlanner.server_query(r,u,o,f)}});t(".fit-itm").live("click",function(){var r=t(this).data("mealid"),u=t(this).data("whenid"),f=t(this).data("desc"),e=t(this).data("mealname");r!=null&&r!=""&&r!=i&&n.mealPlanner.server_query(r,u,f,e)});t(document).keyup(function(n){n.keyCode==27&&(t("#fit-popup-window").is(":visible")&&t("#fit-popup-window").hide(),t("#fit-bg-shadow").hide())});t("#fit-sharedmeals-filter").keyup(function(){var n=t(this).val(),i;return n.length>2?(i=t("#fit-allmeal-content p").filter(function(){var i=new RegExp("\\b"+n,"i");return i.test(t(this).text())}).slideDown(),t("#fit-allmeal-content p").not(i).slideUp()):t("#fit-allmeal-content p").slideDown(),!1});t("#fit-recipe-filter").keyup(function(){var n=t(this).val(),i;return n.length>2?(i=t("#fit-nutri-content p").filter(function(){var i=new RegExp("\\b"+n,"i");return i.test(t(this).text())}).slideDown(),t("#fit-nutri-content p").not(i).slideUp()):t("#fit-nutri-content p").slideDown(),!1});t("#fit-week-plan-btn").click(function(){n.mealPlanner.popup_window2(500,"#fit-weekly-plan")});t("#fit-new-meal #btn-cancel").live("click",function(){t("#fit-new-meal").dialog("close")});t("#btn-pref-cancel, #btn-plan-cancel, #btn-diary-cancel").live("click",function(){t(this).closest(".ui-dialog-content").dialog("close")});t("#btn-pref-save").live("click",function(){var i="";t("#fit-pref-table input:checkbox").each(function(){t(this).is(":checked")&&(i=i+t(this).attr("id")+",")});i=i.substring(0,i.length-1);i!=t.cookie("pref")&&(t.cookie("pref",i,{expires:7,path:"/"}),n.mealPlanner.reload_calendar());t(this).closest(".ui-dialog-content").dialog("close")});t("#btn-diary-save").live("click",function(){return n.mealPlanner.fitSaveDiaryEntry(n.mealPlanner.fitMealplannerSaveDiaryEntrySuccess,n.Data.CurrentDiaryID,n.Data.CurrentDiaryDate,u,f),t(this).closest(".ui-dialog-content").dialog("close"),!1});t("#btn-plan-save").live("click",function(){var i=t("#fit-plan-name").val(),r=t("#fit-plan-desc").val();if(i.length==0){alert("Weekly plan name could not be blank!");return}if(i.length>80){alert("Weekly plan name could not exceed 80 characters!");return}if(r.length==0){alert("Weekly plan description could not be blank!");return}if(r.length>1800){alert("Weekly plan description could not exceed 1800 characters!");return}return n.mealPlanner.AddNewWeeklyPlan(i,r),t(this).closest(".ui-dialog-content").dialog("close"),!1});p=t("#fit-active-cal").offsetHeight<400?400:t("#fit-active-cal").offsetHeight;t("#fit-mask").height(p);t("#fit-pref-icon").live("click",function(){var i,u,r;if(n.mealPlanner.popup_window2(500,"#fit-preference"),i=t.cookie("pref"),i!=null&&i!="")for(u=i.split(","),r=0;r<u.length;r++)t("#fit-preference #"+u[r]).attr("checked","checked");else t("#fit-preference #1").attr("checked","checked"),t("#fit-preference #3").attr("checked","checked"),t("#fit-preference #5").attr("checked","checked");return!1});t(".fit-diary-icon").live("click",function(){var h,r,u,c,f,a,e,v,o,y,p;if(n.mealPlanner.popup_window2(630,"#fit-diary"),l=t(this),h=t(this).data("currentdiarydate"),n.Data.CurrentDiaryID=t(this).data("currentLogId"),n.Data.CurrentDiaryDate=n.mealPlanner.formatDate(h,4),r=new Date(parseInt(h)),n.mealPlanner.getDiaryNotes(t(this).data("diary")),r=t.datepicker.formatDate("dd-M-y",r),u=s.get(r),c=n.mealPlanner.getNewStatsObject(),u===i)cals_total=fat_total=satfa_total=fiber_total=carbs_total=protein_total=sugars_total=20;else for(f=0;f<u.values().length;f++)for(a=u.values()[f],e=0;e<a.values().length;e++)for(v=a.values()[e],o=0;o<v.size();o++)(y=v.get(o),p=y.food,p!=null)&&n.mealPlanner.addStat(p,c,y.nutrientMultiplier);return n.mealPlanner.renderPieChart(t("#fit-diary-chart"),c,60),!1});n.mealPlanner.setupDiaryInputHandling();t("#fit-popup-window .fit-dialog").live("resize",function(){var n=t("#fit-popup-window").children().eq(1),i=t("#fit-popup-window").children().eq(0).children().eq(1);i.height(n.height()+22)})},setupDiaryInputHandling:function(){t("#fit-diary-right input:text").live("keypress",function(n){if(n.which==0||n.which==9||n.which==8||n.which==46)return!0;var i=5;return(t(this).attr("id")=="fit_jnl_sleep"&&(i=5),n.which<48||n.which>57||t(this).val().length==i)?(n.preventDefault(),!1):!0})},initialiseMealEditor:function(){var i=t("#fit_core_url").val();t("textarea.tinymce").tinymce({script_url:i+"/js/tiny_mce/tiny_mce.js",theme:"advanced",plugins:"pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",theme_advanced_buttons1:"bold,italic,underline,|,justifyleft,justifycenter,justifyright,formatselect,|,bullist,numlist,|,outdent,indent,|,link,unlinkimage,code,|,forecolor",theme_advanced_buttons2:"",theme_advanced_buttons3:"",theme_advanced_buttons4:"",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_resizing:!0,theme_advanced_path:!1,theme_advanced_resize_horizontal:!1,width:"460",height:"201",content_css:i+"/js/tiny_mce/css/content.css",template_external_list_url:"lists/template_list.js",external_link_list_url:"lists/link_list.js",external_image_list_url:"lists/image_list.js",media_external_list_url:"lists/media_list.js",template_replace_values:{username:"Some User",staffid:"991234"}});n.mealPlanner.isMealEditorInitialised=!0},loadAllMeals:function(){t("#fit-allmeal-content").html("");var i=r+"/Foods/GetAllMyMeals?jsoncallback=?";t.getJSON(i,{email:u,SessionGuid:f},function(i){var u=i.Meals,r,f;for(t("#fit-a-l").hide(),r=0;r<u.length;r++)f=t('<p class="ui-state-default ui-corner-all ui-helper-clearfix fit-itm">'+u[r].MealName+"<\/p>"),f.data("mealid",u[r].MealId),f.data("desc",u[r].MealDescription),f.data("mealname",u[r].MealName),t("#fit-allmeal-content").append(f);n.mealPlanner.render_item()})},getMonday:function(n){n=new Date(n);var t=n.getDay(),i=n.getDate()-t+(t==0?-6:1);return new Date(n.setDate(i))},deleteFoodEntryFromCalendar:function(n,i,u,f){var e=r+"/Foods/DeleteFoodEaten?jsoncallback=?",s=t("#fit_email").val(),o=t("#fit_session").val();t.getJSON(e,{email:t("#fit_email").val(),SessionGuid:o,whenEatenId:n,dateEaten:i,isDrink:u},function(n){n.MessageId==0?f.draggable.remove():alert(n.Message);t("#fit-w-l").hide()})},client_query:function(i,r,u,f,e,o){var s=o.get(e).get(r).get(i),h=n.mealPlanner.render_food_table(s,r,f),c;t("#popup-food-log").html(h.return_html);n.mealPlanner.popup_window2(780,"#fit-popup-mealinfo");c=t("#fit-popup-mealinfo");t.data(document.body,"foodlist",s);t("#fit-popup-lower-desc").html(u.replaceAll("\n","<br />",!1));n.mealPlanner.renderPieChart(t("#fit-popup-lower-chart"),h,60)},scrollToPreviousWeek:function(i){clearTimeout(n.mealPlanner.TimeFn);n.mealPlanner.TimeFn=setTimeout(function(){var u,r;t("#fit-placeholder").hide();u=t("#fit-sample").clone().css("display","block").attr("id","tmp");u.insertBefore(t("#fit-active-cal"));r=new Date(t("#fit-active-cal").data("ttl")-6048e5);i!=null&&window.console&&console.log("set ",i);t("#fit_datepicker").datepicker("setDate",r);t("#fit_selecteddate").button("option","label",t.datepicker.formatDate("D",r)+" "+r.getDate()+e[r.getDate()-1]);n.mealPlanner.calculate_calendar(r,"tmp");t("#fit-banner").css("left","-721px");t("#fit-banner").animate({left:"+=721px"},600,function(){t("#fit-active-cal").remove();u.attr("id","fit-active-cal");n.mealPlanner.render_calendar()})},300)},scrollToNextWeek:function(){clearTimeout(n.mealPlanner.TimeFn);n.mealPlanner.TimeFn=setTimeout(function(){var r,i;t("#fit-placeholder").hide();r=t("#fit-sample").clone().css("display","block").attr("id","tmp");r.insertAfter(t("#fit-active-cal"));i=new Date(parseInt(t("#fit-active-cal").data("ttl"))+6048e5);t("#fit_datepicker").datepicker("setDate",i);t("#fit_selecteddate").button("option","label",t.datepicker.formatDate("D",i)+" "+i.getDate()+e[i.getDate()-1]);n.mealPlanner.calculate_calendar(i,"tmp");t("#fit-banner").animate({left:"-=721px"},600,function(){t("#fit-active-cal").remove();t("#fit-banner").css("left","0px");r.attr("id","fit-active-cal");n.mealPlanner.render_calendar()})},300)},food_query:function(u){var f=r+"/Foods/GetFoodItem?";t.getJSON(f,{foodId:u},function(r){var u,r,f;r.meal!=null&&r.meal!=i&&(u=new ArrayList,r={},r.food=data,u.add(r),f=n.mealPlanner.render_food_table(u,when_id,meal_name),t("#popup-food-log").html(f.return_html),n.mealPlanner.popup_window2(780,"#fit-popup-mealinfo"),n.mealPlanner.renderPieChart(t("#fit-popup-lower-chart"),f,60))}).error(function(){})},server_query:function(u,f,e,o){if(!(u<0)){var s=r+"/Foods/GetMealFoods?";t.getJSON(s,{mealId:u},function(r){var u,h,s,r,c;if(r.meal!=null&&r.meal!=i){for(u=r.meal.MealFoods,h=new ArrayList,s=0;s<u.length;s++)r={},r.food=u[s].Food,f==i||u.length==1?(r.servingCount=1,r.servingDesc="",r.nutrientMultiplier=1):(r.servingCount=u[s].Servings,r.servingDesc="",r.nutrientMultiplier=1),h.add(r);c=n.mealPlanner.render_food_table(h,f,o);t("#popup-food-log").html(c.return_html);n.mealPlanner.popup_window2(780,"#fit-popup-mealinfo");t("#fit-popup-lower-desc").html(e.replaceAll("\n","<br />",!1));n.mealPlanner.renderPieChart(t("#fit-popup-lower-chart"),c,60)}}).error(function(){})}},reload_calendar:function(){var i=t("#fit-sample").clone().css("display","block").attr("id","tmp"),r;i.insertBefore(t("#fit-active-cal"));r=new Date(t("#fit-active-cal").data("ttl"));n.mealPlanner.calculate_calendar(r,"tmp");t("#fit-active-cal").remove();i.attr("id","fit-active-cal");n.mealPlanner.render_calendar()},populate_current_calendar:function(r,u){var h,p,f,k,s,c,l,e,o,a,v,d,y,w,b;for(t("#fit-active-cal #fit-nutrition-cal tr:first").siblings().remove(),h=t.cookie("pref"),p=h!=null&&h!=""?h.split(","):["1","2","3"],f=0;f<p.length;f++)e=parseInt(p[f]),n.mealPlanner.addCalendarRow(e);if(n.mealPlanner.initWeeklyStats(),r==0||r==i||u.size()==0)cals_total=fat_total=satfa_total=fiber_total=carbs_total=protein_total=sugars_total=20;else for(f=0;f<7;f++)if(k=parseInt(r)+f*864e5,s=new Date(parseInt(k)),s=t.datepicker.formatDate("dd-M-y",s),u.containsKey(s))for(c=u.get(s),l=0;l<c.keys().length;l++)for(e=c.keys()[l],o=c.get(e),a=0;a<o.keys().length;a++)for(v=o.keys()[a],d=o.get(v).get(0),n.mealPlanner.populate_calendar_cell(e,f,d),y=0;y<o.get(v).size();y++)(w=o.get(v).get(y),b=w.food,b!=null)&&n.mealPlanner.addStat(b,n.mealPlanner.thisWeeksStats,w.nutrientMultiplier);n.mealPlanner.renderPieChart(t("#fit-placeholder"),n.mealPlanner.thisWeeksStats,60)},clear_calendar_cell:function(n,i){if(t("#fit-active-cal #fit-nutrition-cal #fit-whenid-"+n).size()>0){var r=t("#fit-active-cal #fit-nutrition-cal #fit-whenid-"+n),u=r.children().eq(i+1);u.html("")}},populate_calendar_day:function(t,i,r,u){var f,e,r,o,s,h,c;if(t.containsKey(i))for(f=t.get(i),e=0;e<f.keys().length;e++)for(r=f.keys()[e],o=f.get(r),s=0;s<o.keys().length;s++)h=o.keys()[s],c=o.get(h).get(0),n.mealPlanner.populate_calendar_cell(r,u,c)},populate_calendar_cell:function(i,r,u){var e,o,f;e=t("#fit-active-cal #fit-nutrition-cal #fit-whenid-"+i).size()>0?t("#fit-active-cal #fit-nutrition-cal #fit-whenid-"+i):n.mealPlanner.addCalendarRow(i);o=e.children().eq(r+1);f=t('<p class="ui-state-default ui-corner-all ui-helper-clearfix fit-meal"><\/p>');f.data("mealid",u.meal_id);f.data("whenid",u.when);f.data("desc",u.meal_description);f.data("eatdate",u.eatdate);f.data("mealname",u.meal_name);f.data("foodeatenid",u.foodEatenId);f.data("dataonclient",!0);f.append(u.meal_name);f.appendTo(o)},wrap_text:function(n,t){return n==null||n==i?"":(n=n.replace(/<[^>]*>/g,""),n.length>t?n.substring(0,t)+"...":n)},drawTab:function(n,t,i,r){var u,f,e;n&&n.getContext&&(u=n.getContext("2d"),u.strokeStyle=i,u.fillStyle=i,u.globalAlpha=1,f=n.height,e=n.width,u.beginPath(),u.moveTo(t,0),u.lineTo(e,0),u.lineTo(e,f),u.lineTo(t,f),u.lineTo(0,f-t),u.lineTo(0,t),u.closePath(),u.fill(),u.stroke(),u.beginPath(),u.arc(t,f-t,t,.5*Math.PI,1*Math.PI),u.closePath(),u.fill(),u.stroke(),u.beginPath(),u.arc(t,t,t,1*Math.PI,1.5*Math.PI),u.closePath(),u.fill(),u.stroke(),u.translate(0,0),u.rotate(-Math.PI/2),u.fillStyle="white",u.font="20px Arial",u.fillText(r,-f+(f-r.length*10)/2,e-12))},getColor:function(n){return a[g.indexOf(n)%a.length]},getWhenDesc:function(n){switch(n){case 1:return"Breakfast";case 2:return"Morning Snack";case 3:return"Lunch";case 4:return"Afternoon Snack";case 5:return"Dinner";case 6:return"Evening Snack";case 7:return"Midnight Snack";case 8:return"After workout";case 9:return"Before workout";case 22:return"1am";case 23:return"2am";case 24:return"3am";case 25:return"4am";case 26:return"5am";case 27:return"6am";case 28:return"7am";case 29:return"8am";case 31:return"9am";case 32:return"10am";case 33:return"11am";case 34:return"12am";case 35:return"1pm";case 36:return"2pm";case 37:return"3pm";case 38:return"4pm";case 39:return"5pm";case 40:return"6pm";case 41:return"7pm";case 42:return"8pm";case 43:return"9pm";case 44:return"10pm";case 45:return"11pm";case 46:return"12pm";default:return""}},popup_window2:function(n,i){t(i).dialog({dialogClass:"fit-dialogtitle",resizable:!1,width:"auto",modal:!0,create:function(){t(".ui-dialog").wrap('<div class="fit-ui" />')},open:function(){t(".ui-widget-overlay").wrap('<div class="fit-ui" />')},close:function(){t(".fit-ui").filter(function(){return t(this).text()==""?!0:!1}).remove()}}).dialog("open");return},popup_window:function(n,i){var r,u,f;t("#fit-shadow").show();r=t("#fit-popup-window").children().eq(1);u=t("#fit-popup-window").children().eq(0).children().eq(1);r.width(n);u.width(n+22);t("#fit-popup-window .fit-ctnt").html(i);f=arguments[2]?arguments[2]:null;f!=null&&f();t("#fit-popup-window").show(5,function(){var n;u.height(r.height()+22);var f=(t(document).scrollLeft()+t(window).width())/2,e=r.width()/2,i=f-e;r.css("left",i);u.css("left",i);n=t(document).scrollTop()+(t(window).height()-r.height())/2<0?0:t(document).scrollTop()+(t(window).height()-r.height())/2;r.css("top",n+10-c);u.css("top",n+10-c);t("#fit-shadow").hide();t("#fit-bg-shadow").show()})},fitGetDiaryObject:function(i,r){var u={};return u.LogId=i,u.LogDate=r,u.PersonID=0,u.LogNotes=t("#fit-diary-text").val(),u.ProfessionalNotes=t("#fit-diary-professional").val(),u.Weight=n.CORE.NullIfBlank(t("#fit_jnl_weight").val()),u.RestingPulse=n.CORE.NullIfBlank(t("#fit_jnl_pulse").val()),u.Systolic=n.CORE.NullIfBlank(t("#fit_jnl_systolic").val()),u.Diastolic=n.CORE.NullIfBlank(t("#fit_jnl_diastolic").val()),u.SizeArms=n.CORE.NullIfBlank(t("#fit_jnl_arms").val()),u.SizeChest=n.CORE.NullIfBlank(t("#fit_jnl_chest").val()),u.SizeWaist=n.CORE.NullIfBlank(t("#fit_jnl_waist").val()),u.SizeThighs=n.CORE.NullIfBlank(t("#fit_jnl_thighs").val()),u.SizeHips=n.CORE.NullIfBlank(t("#fit_jnl_hips").val()),u.HoursSleep=n.CORE.NullIfBlank(t("#fit_jnl_sleep").val()),u.BodyFatPercentage=n.CORE.NullIfBlank(t("#fit_jnl_bodyfat").val()),u.BicepLeft=n.CORE.NullIfBlank(t("#fit_jnl_bicep_left").val()),u.BicepRight=n.CORE.NullIfBlank(t("#fit_jnl_bicep_right").val()),u.ForearmLeft=n.CORE.NullIfBlank(t("#fit_jnl_forearm_left").val()),u.ForearmRight=n.CORE.NullIfBlank(t("#fit_jnl_forearm_right").val()),u.Neck=n.CORE.NullIfBlank(t("#fit_jnl_neck").val()),u.ThighLeft=n.CORE.NullIfBlank(t("#fit_jnl_thigh_left").val()),u.ThighRight=n.CORE.NullIfBlank(t("#fit_jnl_thigh_right").val()),u.CalfLeft=n.CORE.NullIfBlank(t("#fit_jnl_calf_left").val()),u.CalfRight=n.CORE.NullIfBlank(t("#fit_jnl_calf_right").val()),u.Height=n.CORE.NullIfBlank(t("#fit_jnl_height").val()),u},fitUpdateDiaryObject:function(i,r,u){return i.LogId=r,i.LogDate=n.mealPlanner.formatDate(u,4),i.PersonID=0,i.LogNotes=t("#fit-diary-text").val(),i.ProfessionalNotes=t("#fit-diary-professional").val(),i.Weight=n.CORE.NullIfBlank(t("#fit_jnl_weight").val()),i.RestingPulse=n.CORE.NullIfBlank(t("#fit_jnl_pulse").val()),i.Systolic=n.CORE.NullIfBlank(t("#fit_jnl_systolic").val()),i.Diastolic=n.CORE.NullIfBlank(t("#fit_jnl_diastolic").val()),i.SizeArms=n.CORE.NullIfBlank(t("#fit_jnl_arms").val()),i.SizeChest=n.CORE.NullIfBlank(t("#fit_jnl_chest").val()),i.SizeWaist=n.CORE.NullIfBlank(t("#fit_jnl_waist").val()),i.SizeThighs=n.CORE.NullIfBlank(t("#fit_jnl_thighs").val()),i.SizeHips=n.CORE.NullIfBlank(t("#fit_jnl_hips").val()),i.HoursSleep=n.CORE.NullIfBlank(t("#fit_jnl_sleep").val()),i.BodyFatPercentage=n.CORE.NullIfBlank(t("#fit_jnl_bodyfat").val()),i.BicepLeft=n.CORE.NullIfBlank(t("#fit_jnl_bicep_left").val()),i.BicepRight=n.CORE.NullIfBlank(t("#fit_jnl_bicep_right").val()),i.ForearmLeft=n.CORE.NullIfBlank(t("#fit_jnl_forearm_left").val()),i.ForearmRight=n.CORE.NullIfBlank(t("#fit_jnl_forearm_right").val()),i.Neck=n.CORE.NullIfBlank(t("#fit_jnl_neck").val()),i.ThighLeft=n.CORE.NullIfBlank(t("#fit_jnl_thigh_left").val()),i.ThighRight=n.CORE.NullIfBlank(t("#fit_jnl_thigh_right").val()),i.CalfLeft=n.CORE.NullIfBlank(t("#fit_jnl_calf_left").val()),i.CalfRight=n.CORE.NullIfBlank(t("#fit_jnl_calf_right").val()),i.Height=n.CORE.NullIfBlank(t("#fit_jnl_height").val()),i},fitMealplannerSaveDiaryEntrySuccess:function(i){i.MessageId==0?alert(i.Message):(l.data("currentLogId",i.LogId),alert(i.Message));t("#fit-shadow").hide();t("#fit-placeholder").hide();n.mealPlanner.reload_calendar()},fitSaveDiaryEntry:function(i,u,f,e,o){t("#fit-shadow").show();var s=n.mealPlanner.fitGetDiaryObject(u,f),h=t.toJSON(s);t.ajax({url:r+"/PersonalLog/SaveLog?jsoncallback=?",type:"POST",dataType:"jsonp",data:{jsonPersonalLog:h,email:e,SessionGuid:o},success:function(n){n.MessageId==0;location.reload();t("#fit-shadow").hide()}})},GetDiaryNotesForWeek:function(){t.ajax({url:r+"/PersonalLog/GetDiaryNotes?jsoncallback=?",type:"POST",dataType:"jsonp",data:{dateStarting:n.mealPlanner.formatDate(o,4),email:u,SessionGuid:f},success:function(n){var s,h,r,e,u,f,i;if(n.MessageId==0){for(s=new Map,h=0;h<n.Logs.length;h++)r=n.Logs[h],u=new Date(parseInt(r.LogDate.substring(r.LogDate.indexOf("(")+1,r.LogDate.lastIndexOf(")")))),f=t.datepicker.formatDate("dd-M-y",u),s.put(f,r);for(e=0;e<7;e++)if(u=parseInt(o)+e*864e5,f=new Date(parseInt(u)),f=t.datepicker.formatDate("dd-M-y",f),i=t("#fit-active-cal #fit-nutrition-cal .fit-diary-icon").eq(e),s.containsKey(f)){var r=s.get(f),c=i.attr("src"),l=c.substring(0,c.lastIndexOf("/"))+"/note.gif";i.attr("src",l);i.data("currentdiarydate",u);i.data("currentLogId",r.LogId);i.data("diary",r)}else i.data("currentdiarydate",u),i.data("currentLogId",0),i.data("diary",null)}}})},AddNewWeeklyPlan:function(i,e){var o,h,l,s,a,c,v,y;for(t("#fit-shadow").show(),o={},o.WeeklyPlanName=i,o.WeeklyPlanDescription=e,o.WeeklyPlanMeals=[],h=1;h<t("#fit-active-cal #fit-nutrition-cal tr").size();h++)for(l=t("#fit-active-cal #fit-nutrition-cal tr").eq(h),s=1;s<l.children().size();s++)for(a=l.children().eq(s),c=0;c<a.children().size();c++)v=a.children().eq(c),o.WeeklyPlanMeals.push(new n.mealPlanner.NewWeeklyPlanMeal(s-1,v.data("whenid"),v.data("mealid")));y=t.toJSON(o);t.ajax({url:r+"/Meals/CreateWeeklyPlan?jsoncallback=?",type:"POST",dataType:"jsonp",data:{jsonWeeklyPlan:y,email:u,SessionGuid:f},success:function(n){n.MessageId==0&&alert("Add new weekly plan successfully!");t("#fit-shadow").hide()}})},NewWeeklyPlanMeal:function(n,t,i){this.DayId=n;this.WhenEatenId=t;this.MealId=i},formatDate:function(n,t){switch(t){case 1:return new Date(parseInt(n));case 2:return parseInt(n);case 3:return new Date(parseInt(n)).getFullYear()+"-"+(new Date(parseInt(n)).getMonth()+1)+"-"+new Date(parseInt(n)).getDate();case 4:return new Date(parseInt(n)).getDate()+"-"+h[new Date(parseInt(n)).getMonth()]+"-"+(new Date(parseInt(n)).getFullYear()+"").substring(2,4);default:return parseInt(n)}},getDate:function(t,i){var r=parseInt(o)+(t.parent().children().index(t)-1)*864e5;return n.mealPlanner.formatDate(r,i)},getWhen:function(n){return n.parent().data("whenid")},renderPieChart:function(n,t,i){window.console&&console.log("renderstats",t);t.cals_total==0&&t.fat_total==0&&t.satfa_total==0&&t.fiber_total==0&&t.carbs_total==0&&t.protein_total==0&&t.sugars_total==0&&(t.cals_total=t.fat_total=t.satfa_total=t.fiber_total=t.carbs_total=t.protein_total=t.sugars_total=20);n.show();n.html("");n.css("display: block");var r=Raphael(n.attr("id"));pie=r.piechart(230,150,i,[t.fat_total-t.satfa_total,t.satfa_total,t.carbs_total-t.sugars_total,t.protein_total,t.sugars_total],{legend:["%% - unsaturated fats","%% - saturated fat","%% - carbs","%% - protein","%% - carbs from sugars"],legendpos:"west"});pie.hover(function(){this.sector.stop();this.sector.scale(1.05,1.05,this.cx,this.cy);this.label&&(this.label[0].stop(),this.label[0].attr({r:7.5}),this.label[1].attr({"font-weight":800}))},function(){this.sector.animate({transform:"s1 1 "+this.cx+" "+this.cy},500,"bounce");this.label&&(this.label[0].animate({r:5},500,"bounce"),this.label[1].attr({"font-weight":400}))});delete r},fillTableWithText:function(i,r,u,f,e,o,s,h,c){return t("#fit-saveas-meal").data("wheneatenid",c),"<li class='foodn'>"+i+"<\/li><li class='cals'>"+(isNaN(r)?r:n.mealPlanner.fixDecimal(r,1))+"<\/li><li class='fat'>"+(isNaN(u)?u:n.mealPlanner.fixDecimal(u,2))+"<\/li><li class='satfa'>"+(isNaN(f)?f:n.mealPlanner.fixDecimal(f,2))+"<\/li><li class='fiber'>"+(isNaN(e)?e:n.mealPlanner.fixDecimal(e,2))+"<\/li><li class='carbs'>"+(isNaN(o)?o:n.mealPlanner.fixDecimal(o,1))+"<\/li><li class='protein'>"+(isNaN(s)?s:n.mealPlanner.fixDecimal(s,2))+"<\/li><li class='sugars'>"+(isNaN(h)?h:n.mealPlanner.fixDecimal(h,1))+"<\/li>"},outputValue:function(t,r,u){return t==i?"&nbsp;":isNaN(t)?t:n.mealPlanner.fixDecimal(t*r,u)},fillTable:function(t,i,r,u,f,e,o,s,h,c,l){return window.console&&console.log("table",t,i,r),"<li class='foodn'>"+h+" x "+t+"<\/li><li class='cals'>"+n.mealPlanner.outputValue(i,l,1)+"<\/li><li class='fat'>"+n.mealPlanner.outputValue(r,l,2)+"<\/li><li class='satfa'>"+n.mealPlanner.outputValue(u,l,2)+"<\/li><li class='fiber'>"+n.mealPlanner.outputValue(f,l,2)+"<\/li><li class='carbs'>"+n.mealPlanner.outputValue(e,l,1)+"<\/li><li class='protein'>"+n.mealPlanner.outputValue(o,l,2)+"<\/li><li class='sugars'>"+n.mealPlanner.outputValue(s,l,1)+"<\/li>"},calculate_calendar:function(i,r){t("#fit-mon").html(k[i.getMonth()]);t("#fit-yr").html(i.getFullYear());var u=i.getTime();o=u;t("#"+r+" .fit-1day").html(n.mealPlanner.dateCalc(0,u)+n.mealPlanner.wrapPrefix(0,u));t("#"+r+" .fit-2day").html(n.mealPlanner.dateCalc(1,u)+n.mealPlanner.wrapPrefix(1,u));t("#"+r+" .fit-3day").html(n.mealPlanner.dateCalc(2,u)+n.mealPlanner.wrapPrefix(2,u));t("#"+r+" .fit-4day").html(n.mealPlanner.dateCalc(3,u)+n.mealPlanner.wrapPrefix(3,u));t("#"+r+" .fit-5day").html(n.mealPlanner.dateCalc(4,u)+n.mealPlanner.wrapPrefix(4,u));t("#"+r+" .fit-6day").html(n.mealPlanner.dateCalc(5,u)+n.mealPlanner.wrapPrefix(5,u));t("#"+r+" .fit-7day").html(n.mealPlanner.dateCalc(6,u)+n.mealPlanner.wrapPrefix(6,u));t("#"+r).data("ttl",u)},dateCalc:function(n,t){return new Date(t+n*864e5).getDate()},wrapPrefix:function(n,t){return"<sup class='fit-prefix'>"+e[new Date(t+n*864e5).getDate()-1]+"<\/sup>"},getDateString:function(n){return n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()},jsonDateToDate:function(n){if(n.indexOf("(")==-1)return n;var i=n.substring(n.indexOf("(")+1,n.lastIndexOf(")")),r=new Date(parseInt(i));return t.datepicker.formatDate("dd-M-y",r)},getManualFoodObject:function(n,t){var i={};return i.IsDrink=!1,i.LongDesc=t,i.EnergKcal=n,i.IsManual=!0,i},getFoodItemObject:function(t,i,r,u,f,e,o,s,h,c){var l={},a=n.mealPlanner.jsonDateToDate(i);return t==null?f.IsDrink?(l.meal_name=f.LongDesc,l.meal_description=f.LongDesc,l.meal_id=-2):(l.meal_name=f.LongDesc,l.meal_description=f.LongDesc,l.meal_id=-1):(l.meal_name=t.MealName,l.meal_description=t.MealDescription,l.meal_id=t.MealId),l.servingSizeId=c,l.when=r,l.ttl=u==""?"undefined":u,l.eatdate=a,l.food=f,l.key=a,l.foodEatenId=e,l.nutrientMultiplier=h/100*o,l.servingCount=o,l.servingDesc=s,l.servingWeight=h,l},addFoodItemToMap:function(n,t){var f,u,i,r;if(n.containsKey(t.key))if(f=n.get(t.key),f.containsKey(t.when)){if(i=f.get(t.when),i.containsKey(t.meal_id))return u=t,t.meal_id==-2?(u=i.get(t.meal_id).get(0),u.meal_name="Drinks",u.meal_description="Drinks"):t.meal_id==-1&&(u=i.get(t.meal_id).get(0),u.meal_name="Other meal",u.meal_description="Other meal"),r=i.get(t.meal_id),r.add(t),u.childCount=i.get(t.meal_id).size(),u;r=new ArrayList;r.add(t);i.put(t.meal_id,r)}else i=new Map,r=new ArrayList,r.add(t),i.put(t.meal_id,r),f.put(t.when,i);else{var f=new Map,i=new Map,r=new ArrayList;r.add(t);i.put(t.meal_id,r);f.put(t.when,i);n.put(t.key,f)}return t.childCount=1,t},render_calendar:function(){var f,i;t("#fit-w-l").show();f=r+"/Foods/GetFoodEatenByWeek?jsoncallback=?";s=new Map;i=new Date(parseInt(o));t.getJSON(f,{email:u,date:i.getDate()+"-"+h[i.getMonth()]+"-"+(i.getFullYear()+"").substring(2,4)},function(i){for(var e=i.FoodEaten,r,f,u=0;u<e.length;u++)r=e[u],r.Food==null&&(r.Calories==null&&(r.Calories=0),r.Food=n.mealPlanner.getManualFoodObject(r.Calories,r.Description),window.console),f=null,f=r.ServingSize==null?n.mealPlanner.getFoodItemObject(r.Meal,r.DateEaten,r.WhenEatenId,r.Description,r.Food,r.FoodEatenId,r.Servings,"",0,0):n.mealPlanner.getFoodItemObject(r.Meal,r.DateEaten,r.WhenEatenId,r.Description,r.Food,r.FoodEatenId,r.Servings,r.ServingSize.ServingDesc,r.ServingSize.ServingWeight,r.ServingSize.ServingSizeId),n.mealPlanner.addFoodItemToMap(s,f);n.mealPlanner.populate_current_calendar(o,s);t("#fit-w-l").hide()});n.mealPlanner.GetDiaryNotesForWeek()},render_food_table:function(t,i,r){for(var f=n.mealPlanner.getNewStatsObject(),o="<div id='food-log'><div id='log-"+i+"'><ul class='table'>\n<li class='thead'>\n<ul class='food-item'>"+n.mealPlanner.fillTableWithText("<h3 class='fit-meal-header'>"+r+"<\/h3>","Cals (k)","Fat","Sat fat","Fiber","Carbs","Protein","Sugars",i)+"<\/ul><\/li><li class='tbody droptrue'><ul>",e,u,s=0;s<t.size();s++)(e=t.get(s),u=e.food,u!=null)&&(o+="<li><ul class='food-item'>"+n.mealPlanner.fillTable(u.LongDesc,u.EnergKcal,u.LipidTotal,u.FASat,u.Fiber,u.Carbohydrate,u.Protein,u.SugarTot,e.servingCount,e.servingDesc,e.nutrientMultiplier)+"<\/ul><\/li>",n.mealPlanner.addStat(u,f,e.servingCount,e.nutrientMultiplier));return o+="<\/ul>\n<\/li>\n<li class='tfoot'><ul class='food-item'>\n"+n.mealPlanner.fillTableWithText("Totals",f.cals_total,f.fat_total,f.satfa_total,f.fiber_total,f.carbs_total,f.protein_total,f.sugars_total,i)+"<\/ul><\/li><\/ul><\/li><\/div><\/div>",o+="<div id='fit-popup-lower'><div><div id='fit-popup-lower-desc'><\/div><div id='fit-popup-lower-chart'><\/div><\/div><\/div>",f.return_html=o,f},addCalendarRow:function(i){var r=t('<tr id="fit-whenid-'+i+'"><td class="fit-hd"><canvas id="fit-canvas-'+i+'" width="40" height="160"><\/canvas><\/td><td class="fit-op"><\/td><td class="fit-op"><\/td><td class="fit-op"><\/td><td class="fit-op"><\/td><td class="fit-op"><\/td><td class="fit-op"><\/td><td class="fit-op"><\/td><\/tr>'),e,o,u,s,f;for(r.data("whenid",i),e=t("#fit-active-cal #fit-nutrition-cal tr"),o=!1,u=1;u<e.size();u++)if(s=e.eq(u),s.data("whenid")<i)continue;else{s.before(r);o=!0;break}return o||r.appendTo(t("#fit-active-cal #fit-nutrition-cal")),f=n.mealPlanner.getWhenDesc(i),t("#fit-canvas-"+i)[0].height=f.length*11<110?110:f.length*11,n.mealPlanner.drawTab(t("#fit-canvas-"+i)[0],20,n.mealPlanner.getColor(i),f),r},getDiaryNotes:function(n){if(n==null){t("#fit-diary input[type='text']").val("");t("#fit-diary-text").val("");t("#fit-diary-professional").val("");return}console.log("setting",n);t("#fit-diary-professional").val(n.ProfessionalNotes);t("#fit-diary-text").val(n.LogNotes);t("#fit_jnl_weight").val(n.Weight);t("#fit_jnl_pulse").val(n.RestingPulse);t("#fit_jnl_systolic").val(n.Systolic);t("#fit_jnl_diastolic").val(n.Diastolic);t("#fit_jnl_arms").val(n.SizeArms);t("#fit_jnl_chest").val(n.SizeChest);t("#fit_jnl_waist").val(n.SizeWaist);t("#fit_jnl_thighs").val(n.SizeThighs);t("#fit_jnl_hips").val(n.SizeHips);t("#fit_jnl_sleep").val(n.HoursSleep);t("#fit_jnl_bodyfat").val(n.BodyFatPercentage);t("#fit_jnl_bicep_left").val(n.BicepLeft);t("#fit_jnl_bicep_right").val(n.BicepRight);t("#fit_jnl_forearm_left").val(n.ForearmLeft);t("#fit_jnl_forearm_right").val(n.ForearmRight);t("#fit_jnl_neck").val(n.Neck);t("#fit_jnl_thigh_left").val(n.ThighLeft);t("#fit_jnl_thigh_right").val(n.ThighRight);t("#fit_jnl_calf_left").val(n.CalfLeft);t("#fit_jnl_calf_right").val(n.CalfRight);t("#fit_jnl_height").val(n.Height)},fixDecimal:function(n,t){if(n==i)return"?";var r=parseFloat(Math.round(n*100)/100).toFixed(t).toString();return n==0?"0":r},getQueryStr:function(n){var i=String(window.document.location.href),r=new RegExp("(^|)"+n+"=([^&]*)(&|$)","gi").exec(i),t;return(t=r)?t[2]:""},render_item:function(){navigator.userAgent.match(/iPad/i)!=null&&t(".fit-itm").width(182)},AddNewBasicMeal:function(i,e,o,s){var a=r+"/Foods/SaveMealAndFood?jsoncallback=?",h={},c,l;h.MealName=i;h.MealDescription=e;h.WhenEatenId=o;h.IsPublic=s;h.MealFoods=[];c=t.toJSON(h);l=t.toJSON(new n.mealPlanner.NewMealFood);t("#fit-new-meal-wait").show();t.ajax({url:a,type:"GET",dataType:"json",data:{jsonMeal:c,jsonFood:l,email:u,SessionGuid:f},contentType:"application/json; charset=utf-8",success:function(i){t("#fit-new-meal-wait").hide();alert(i.Message);i.MessageId!=0?alert("Please try again or let us know"):n.mealPlanner.loadAllMeals();t("#fit-new-meal").dialog("close")},error:function(){alert("An error occured trying to save - please try again or let us know");t("#fit-new-meal-wait").show()}})},NewMealFood:function(){this.EnergKcal=t("#fit-newmeal-cal").val();this.Carbohydrate=t("#fit-newmeal-carb").val();this.Cholestrl=t("#fit-newmeal-chol").val();this.Fiber=t("#fit-newmeal-fiber").val();this.LipidTotal=t("#fit-newmeal-totalfat").val();this.FASat=t("#fit-newmeal-fasat").val();this.Sodium=t("#fit-newmeal-salt").val();this.Protein=t("#fit-newmeal-protein").val();this.SugarTot=t("#fit-newmeal-sugars").val();this.EnergKcal==""&&(this.EnergKcal=0)}};p=function(){this.start=function(){function r(t){var r=t/5;document.getElementById("tbKMPerHour").value=r.toFixed(2);document.getElementById("tbMetersPerSec").value=(r*1e3/3600).toFixed(2);document.getElementById("tbMilePerHour").value=(r/1.61).toFixed(2);document.getElementById("tbYardsPerSec").value=(r*1e3/3600/.9144).toFixed(2);document.getElementById("tbPacePerMile").value=(60/(r/1.61)).toFixed(2)+" ("+i(r/1.61)+")";document.getElementById("tbPacePerKM").value=(60/r).toFixed(2)+" ("+i(r)+")";document.getElementById("tbHundred").value=n(r,.1);document.getElementById("tbOne").value=n(r,1);document.getElementById("tbFive").value=n(r,5);document.getElementById("tbTen").value=n(r,10);document.getElementById("tbHalf").value=n(r,21);document.getElementById("tbFull").value=n(r,42)}function i(n){var i=Math.floor(60/n).toFixed(0),r=(60/n%1*60).toFixed(0),t=r.toString();return t.length==1&&(t="0"+t),i+":"+t}function n(n,t){var u=Math.floor(t/n),f=(t/n%1*60).toFixed(0),e=(t/n%1*60%1*60).toFixed(0),i=f.toString(),r=e.toString();return i.length==1&&(i="0"+i),r.length==1&&(r="0"+r),u+":"+i+":"+r}t("#fit_paceslider").slider({range:"min",value:10,min:1,max:150,slide:function(n,t){r(t.value)}})}};n.fitConvert=new p;w=function(){function d(n){n<=-60?c=-1:n<=-20?c=-.5:n<=20?c=0:n<=60?c=.5:n<=100&&(c=1)}function g(n){var i="";n<=20?i="Little or no exercise":n<=40&&n>20?i="Light exercise  (1-3 days per week)":n<=60&&n>40?i="Moderate exercise  (3-5 days per week)":n<=80&&n>60?i="Heavy exercise  (6-7 days per week)":n<=100&&n>80&&(i="Very heavy exercise  (twice daily, heavy workouts)");t("#amountActivity").html(i)}function tt(){p=!0;t("#metric").hide();t("#imperial").show();pt()}function it(){p=!1;t("#imperial").hide();t("#metric").show();wt()}function vt(){var i=t("#fit_height").val(),r=t("#fit_weight").val(),u=t("#fit_age").val(),f=t("#fit_exerciselevel").val(),e=t("#fit_weeklychange").val(),o=t("#fit_measurementsystem").val(),h=t("#fit_gender").val();o==0?tt():it();h=="M"?t("#fitcal_male").attr("checked",!0):t("#fitcal_female").attr("checked",!0);t("#sliderHeight").slider("value",i);a=i;n(t("#sliderHeight"),i);t("#sliderWeight").slider("value",r);v=r;n(t("#sliderWeight"),r);t("#sliderAge").slider("value",u);w=u;t("#amountAge").html("Age  ("+y()+" years old)");t("#sliderActivity").slider("value",f);g(f);t("#sliderWeeklyChange").slider("value",e-100);d(e-100);n(t("#sliderWeeklyChange"),s())}function yt(){var i=t("#fit_email").val(),r=t("#fit_session").val(),n=ft(),u=Math.round(et(n)),f=e(),s=l(),h=o()==!0?0:1,c=ut()==!0?"M":"F",a=y(),v=t("#sliderWeeklyChange").slider("value")+100,p=b;t.getJSON("http://192.168.0.50/result/public/Stats/SetCalorieGoal?jsoncallback=?",{email:i,SessionGuid:r,calorieGoal:u,height:f,weight:s,gender:c,measurementSystem:h,age:a,bmr:n,weeklyChange:v,exerciseLevel:p},function(n){n.MessageId!=0?alert(n.Message):t("#fit_goalssaved").show()})}function pt(){n(t("#sliderHeight"),t("#sliderHeight").slider("value"));n(t("#sliderWeight"),t("#sliderWeight").slider("value"));n(t("#sliderWeeklyChange"),s());t("#sliderWeeklyChange").parent().children(".float-left").html("-1 kg");t("#sliderWeeklyChange").parent().children(".float-right").html("1 kg")}function wt(){n(t("#sliderHeight"),t("#sliderHeight").slider("value"));n(t("#sliderWeight"),t("#sliderWeight").slider("value"));n(t("#sliderWeeklyChange"),s());t("#sliderWeeklyChange").parent().children(".float-left").html("-2 lb");t("#sliderWeeklyChange").parent().children(".float-right").html("2 lb")}function n(n,i){var u,r;n.attr("id")=="sliderHeight"?o()?t("#amountHeight").html("Height  ("+i+" cm)"):(u=bt(i),t("#amountHeight").html("Height  ("+u[0]+" feet, "+u[1]+" inches)")):n.attr("id")=="sliderWeight"?o()?t("#amountWeight").html("Weight  ("+i+" kg)"):(r=k(i),t("#amountWeight").html("Weight  ("+r+" lbs)")):n.attr("id")=="sliderWeeklyChange"&&(o()?t("#amountWeeklyChange").html("Weekly Change  ("+i+" kg)"):(r=Math.round(k(i)),t("#amountWeeklyChange").html("Weekly Change  ("+r+" lbs)")));h()}function bt(n){var t=Math.round(n/2.54%12*10)/10,i=n/2.54/12,r=parseInt(""+i);return[r,t]}function k(n){return Math.round(n*2.2*10)/10}function o(){return p}function rt(){return t("[name*='sex']:checked").attr("value")}function e(){return a}function l(){return v}function kt(){var n=b;return n<=20?1.2:n<=40?1.375:n<=60?1.55:n<=80?1.725:1.9}function y(){return w}function s(){return c}function ut(){return rt()==1?!0:!1}function ft(){return ut()?66.5+13.75*l()+5.003*e()-6.755*y():655.1+9.563*l()+1.85*e()-4.676*y()}function et(n){var i=n*kt(),t=550,r=i+s()*2*t;return o()||(t=500,r=i+s()*2*t),r}function nt(n){return n*n/100}function dt(n,t){var i=nt(n);return t/i*100}function ot(n){var t=nt(n);return t*18.5}function st(n){var t=nt(n);return t*25}function h(n){t("#fit_goalssaved").hide();var f=dt(e(),l()),s=ot(e()),h=st(e()),r=s/100,u=h/100;o()?i="Your BMI is "+f.toFixed(1).replace(/[.,]0$/,"")+" and your ideal weight is between "+r.toFixed(1).replace(/[.,]0$/,"")+" and "+u.toFixed(1).replace(/[.,]0$/,""):(r=k(r),u=k(u),i="Your BMI is "+f.toFixed(1).replace(/[.,]0$/,"")+" and your ideal weight is between "+Math.round(r)+" and "+Math.round(u));i+=o()?"kg":"lbs";i+="<br/><div style='margin-top: 6px; padding-top: 0px;'>Your daily calorie goal is "+Math.round(et(ft()))+"<\/div>";try{$callout&&$callout.children("div").html(i);n&&gt(i)}catch(c){}}function gt(n){r=(l()-t("#sliderWeight").slider("option","min"))*(592/120);u=(e()-t("#sliderHeight").slider("option","min"))*(480/51);r<=296&&u<=240?ht(r,u,n):r>296&&u<=240?ct(r,u,n):r<=296&&u>240?lt(r,u,n):r>296&&u>240&&at(r,u,n)}function ht(n,i,r){f!=1?(f=1,$callout.hide(),$callout=t("#cloudOne"),$callout.show(),$callout.css("left",n).css("bottom",i).children("div").html(r)):($callout.children("div").html(r),$callout.stop().animate({left:n,bottom:i},500,"easeOutBack"))}function ct(n,i,r){f!=2?(f=2,$callout.hide(),$callout=t("#cloudTwo"),$callout.show(),$callout.css("left",n-301).css("bottom",i).children("div").html(r)):($callout.children("div").html(r),$callout.stop().animate({left:n-301,bottom:i},500,"easeOutBack"))}function lt(n,i,r){f!=3?(f=3,$callout.hide(),$callout=t("#cloudThree"),$callout.show(),$callout.children("div").css("top",-105),$callout.children("div").css("top",parseFloat($callout.children("div").css("top").replace("px",""))+25),$callout.css("left",n).css("bottom",i-126).children("div").html(r)):($callout.children("div").html(r),$callout.stop().animate({left:n,bottom:i-126},500,"easeOutBack"))}function at(n,i,r){f!=4?(f=4,$callout.hide(),$callout=t("#cloudFour"),$callout.show(),$callout.children("div").css("top",-105),$callout.children("div").css("top",parseFloat($callout.children("div").css("top").replace("px",""))+25),$callout.css("left",n-301).css("bottom",i-126).children("div").html(r)):($callout.children("div").html(r),$callout.stop().animate({left:n-301,bottom:i-126},500,"easeOutBack"))}var i="",r=0,u=0,f=1,p,a,v,w,c,b;$callout=!1;p=!0;this.start=function(){$callout=t("#cloudOne");t("#metric, #imperial").change(function(){});t("#metric, #imperial").click(function(){t(this).attr("id")=="metric"?tt():it()});t("[name='sex']").change(function(){h(!1)});t("#sliderHeight").slider({range:"min",value:149,min:149,max:200,step:1,create:function(){a=t("#sliderHeight").slider("option","value");n(t("#sliderHeight"),e())},slide:function(i,r){a=r.value;n(t("#sliderHeight"),r.value)},stop:function(i,r){a=r.value;n(t("#sliderHeight"),r.value);h(!0)}});t("#sliderWeight").slider({range:"min",value:40,min:40,max:160,create:function(){v=t("#sliderWeight").slider("value");n(t("#sliderWeight"),l())},slide:function(i,r){v=r.value;n(t("#sliderWeight"),r.value)},stop:function(i,r){v=r.value;n(t("#sliderWeight"),r.value);h(!0)}});t("#sliderAge").slider({range:"min",value:18,min:18,max:100,create:function(){w=t("#sliderAge").slider("value");t("#amountAge").html("Age  ("+y()+" years old)")},slide:function(n,i){w=i.value;t("#amountAge").html("Age  ("+i.value+" years old)");h(!1)}});t("#sliderWeeklyChange").slider({range:"min",value:0,min:-100,max:100,step:2,create:function(){var i=t("#sliderWeeklyChange").slider("value");d(i);n(t("#sliderWeeklyChange"),s())},slide:function(i,r){d(r.value);n(t("#sliderWeeklyChange"),s())}});t("#sliderActivity").slider({range:"min",value:0,min:0,max:100,step:1,create:function(){var n=b=t("#sliderActivity").slider("value");g(n)},slide:function(n,t){b=t.value;g(t.value);h(!1)}});t("#fit_savecalories").button();t("#fit_savecalories").click(function(){return yt(),!1});vt();t("#sliderHeight, #sliderWeight").children("a").removeAttr("href");h(!0)}};n.fitCalorie=new w;b=function(){this.start=function(i,r){function u(n){var r=1,u,i;for(u in n)i=t("<div class='planItem'><\/div>"),t("<div class='planItemHeader'>"+u+"<\/div>").appendTo(i),r%2==0?i.addClass("planItem-alternate"):i.removeClass("planItem-alternate"),r++,t.each(n[u].SubGroups,function(n,r){t("<div>"+r.Key+"<\/div>").appendTo(i);t.each(r.Value,function(n,r){var u=t("<div class='planItemBody'><\/div>");t("<div class='item1'>"+r.Item1+"<\/div>").appendTo(u);t("<div class='item2'>"+r.Item2+"<\/div>").appendTo(u);u.appendTo(i);t("<div class='clear'><\/div>").appendTo(i)})}),t("#fitMyPlanDetails").append(i);r++}n.CORE.SetSession(i,r);n.CORE.DoCallBack("/Planner/GetGeneratedPlans",{},function(i){i.MessageId==0&&(t.each(i.Plans,function(n,i){t("#fitMyPlanList").append("<div data-planid='"+i.UserGeneratedPlanID+"' class='fit-myplan'>"+i.ProgramName+"&nbsp;(<a>View<\/a>)<\/div>")}),t(".fit-myplan").click(function(){t("#fitMyPlanDetails").html("");var i=t(this).data("planid");n.CORE.DoCallBack("/Planner/GetGeneratedPlanDetail",{userGeneratedPlanId:i},function(n){u(n.Plans)})}))})}};n.fitMyPlans=new b}(window.fitCore=window.fitCore||{},jQuery);jQuery(function(n){Date.prototype.addSeconds=function(n){return new Date(this.getTime()+n*1e3)};Date.prototype.getWeek=function(){var n=new Date(this.getFullYear(),0,1);return Math.ceil(((this-n)/864e5+n.getDay()+1)/7)};Date.prototype.addClientUTC=function(){var n=new Date,t=n.getTimezoneOffset()*6e4;return new Date(this.valueOf()+t)};String.prototype.contains=function(n){return this.indexOf(n)!==-1};String.prototype.insert=function(n,t){return n>0?this.substring(0,n)+t+this.substring(n,this.length):t+this};String.prototype.endsWith=function(n){var t=this.length-n.length;return t>=0&&this.lastIndexOf(n)===t},function(n){n.fn.extend({center:function(){var i=(n(window).height()-this.outerHeight())/2,t,r;return i<0&&(i=0),t=(n(window).width()-this.outerWidth())/2+n(window).scrollLeft(),t<0&&(t=0),r={position:"absolute",display:"block",top:i,left:t},this.animate(r,100),this}})}(jQuery);WO={};WO.Objects=new function(){this.Diary=function(jsonObject){this.ID=jsonObject.LogId;typeof jsonObject.LogDate=="string"?jsonObject.LogDate.substr(1,4)=="Date"?this.Date=eval("new "+jsonObject.LogDate.substr(1,jsonObject.LogDate.length-2)):(from=n("#datepicker").val().split("-"),f=new Date(from[2],from[1]-1,from[0]),this.Date=new Date(jsonObject.LogDate)):this.Date=jsonObject.LogDate;typeof jsonObject.LogDate=="string"&&(this.Date=this.Date.addClientUTC());this.EndDate=jsonObject.LogDate;this.LogNotes=jsonObject.LogNotes;this.Weight=jsonObject.Weight;this.RestingPulse=jsonObject.RestingPulse;this.Systolic=jsonObject.Systolic;this.Diastolic=jsonObject.Diastolic;this.ProfessionalNotes=jsonObject.ProfessionalNotes;this.SizeArms=jsonObject.SizeArms;this.SizeChest=jsonObject.SizeChest;this.SizeWaist=jsonObject.SizeWaist;this.SizeThighs=jsonObject.SizeThighs;this.SizeHips=jsonObject.SizeHips;this.HoursSleep=jsonObject.HoursSleep;this.BodyFatPercentage=jsonObject.BodyFatPercentage;this.BicepLeft=jsonObject.BicepLeft;this.BicepRight=jsonObject.BicepRight;this.ForearmLeft=jsonObject.ForearmLeft;this.ForearmRight=jsonObject.ForearmRight;this.Neck=jsonObject.Neck;this.ThighLeft=jsonObject.ThighLeft;this.ThighRight=jsonObject.ThighRight;this.CalfLeft=jsonObject.CalfLeft;this.CalfRight=jsonObject.CalfRight;this.Height=jsonObject.Height};this.Exercise=function(jsonObject){this.ID=jsonObject.ActivityID;this.Date=typeof jsonObject.ActivityStart=="string"?eval("new "+jsonObject.ActivityStart.substr(1,jsonObject.ActivityStart.length-2)):jsonObject.ActivityStart;typeof jsonObject.ActivityStart=="string"&&(this.Date=this.Date.addClientUTC());this.EndDate=jsonObject.EndDate;this.Distance=jsonObject.Quantity;this.Activity=jsonObject.ActivityTypeDesc;this.Description=jsonObject.Notes;this.Status=jsonObject.IsComplete;this.Duration=function(){return(this.EndDate-this.Date)/1e3};this.WorkoutID=jsonObject.ActivityTypeID;this.ExerciseTypeID=jsonObject.ExerciseTypeID;this.RouteID=jsonObject.RouteID;this.Calories=jsonObject.EstimatedCalories;this.EventID=jsonObject.EventID;this.UserGeneratedPlanID=jsonObject.UserGeneratedPlanID;this.WeatherCD=jsonObject.WeatherCD;this.Explanation=jsonObject.Explanation;this.ActivityGroupItems=jsonObject.ActivityGroupItems;jsonObject.Seconds!=undefined&&(this.EndDate=this.Date.addSeconds(jsonObject.Seconds))};this.ActivityStat=function(n){this.ActYear=n.ActYear;this.ActWeek=n.ActWeek;this.AvgPulse=n.AvgPulse;this.AvgWeight=n.AvgWeight;this.CaloriesEaten=n.CaloriesEaten;this.Calories=n.Calories};this.Workout=function(n){this.ID=n.ID;this.MetaData=n.MetaData;this.Name=n.Name};this.Route=function(n){this.ID=n.RouteID;this.Description=n.RouteDesc;this.Name=n.RouteName;this.Distance=n.Quantity};this.GymExercise=function(n){n=n||{ActivityGroupItemID:1,ActivityID:1,ExerciseTypeID:68,WorkoutSection:"Ball Boxers Chop",Reps:0,Sets:0,RestSeconds:0,Quantity:0,IsReps:!0,HasWeight:!1};this.ExerciseID=n.ActivityGroupItemID;this.ActivityID=n.ActivityID;this.ExerciseTypeID=n.ExerciseTypeID;this.ExerciseName=n.WorkoutSection;this.Reps=n.Reps;this.Sets=n.Sets;this.RestSeconds=n.RestSeconds;this.Quantity=n.Quantity;this.IsReps=n.IsReps;this.HasWeight=n.HasWeight}};WO.Data=new function(){this.ActivityCache={};this.ActivityStats=[];this.Exercises=[];this.Diary=[];this.Workouts=[];this.Routes=[];this.ExerciseTypes={};this.PlotExercises=[];this.GridExercises=[];this.DummyRoute=new WO.Objects.Route({RouteID:0,RouteName:" - Optional - ",Quantity:100,RouteDesc:null});this.IgnoreMetaList=["the","in","","min","mi","m","on"];this.Cache={};this.NumericFilter=function(t,i){return n.isNumeric(t)?t:i}};WO.Converter=new function(){this.ResolveConversion=function(n){n=Math.abs(n);var t=n-Math.floor(n),i=t>.98?1-t:t<.02?t*-1:0;return n+i};this.ChangeSystem=function(){var t;WO.Chart.Memory.isMetric?(t=WO.Converter.ResolveConversion((parseFloat(n("#distanceInput").val(),10)*1.60934).toFixed(2)),isNaN(t)||n("#distanceInput").val(t),n("#distanceLabel","#popupBoxDiv").text("Distance (km)")):(t=WO.Converter.ResolveConversion((parseFloat(n("#distanceInput").val(),10)/1.60934).toFixed(2)),isNaN(t)||n("#distanceInput").val(t),n("#distanceLabel","#popupBoxDiv").text("Distance (mi)"));n("#workoutDiv").trigger("activityRefresh")}};WO.Ajax=new function(){this.APIURL="http://192.168.0.50/result/public";var t=n("#fit_session").val(),i=n("#fit_email").val();this.DoCallBack=function(r,u,f){var e={email:i,SessionGuid:t};n.extend(u,e);n(".workoutLoader").show();n.getJSON(r,u,f).always(function(){n(".workoutLoader").hide()})};this.GetActivities=function(t,i){var u=this.APIURL+"/Activity/GetActivitiesForDates?jsoncallback=?",r;if(WO.Data.Exercises!=undefined&&WO.Data.Exercises.length>0)return n("#workoutDiv").trigger("activityRefresh"),!0;r={start:n.datepicker.formatDate("dd-M-yy",t),end:n.datepicker.formatDate("dd-M-yy",i)};this.DoCallBack(u,r,function(t){WO.Data.Exercises.length=0;n.each(t.Activities,function(n,t){WO.Data.Exercises.push(new WO.Objects.Exercise(t))});n.each(t.Diary,function(n,t){WO.Data.Diary.push(new WO.Objects.Diary(t))});n("#yearSelector > option").length==0&&n.each(t.ActivityYears,function(t,i){n("<option>").val(i).text(i).appendTo("#yearSelector")});n("#workoutDiv").trigger("activityRefresh")})};this.SaveDiaryEntry=function(t,i,r){var f,u,e;n("#fit-shadow").show();f=this.APIURL+"/PersonalLog/SaveLog?jsoncallback=?";u=fitCore.mealPlanner.fitGetDiaryObject(i,r);u.LogDate=r;e={jsonPersonalLog:n.toJSON(u)};this.DoCallBack(f,e,function(t){if(fitCore.Data.CurrentDiaryObject==null)WO.Data.Diary.push(new WO.Objects.Diary(t.Log)),n("#workoutDiv").trigger("activityRefresh");else var i=fitCore.mealPlanner.fitUpdateDiaryObject(fitCore.Data.CurrentDiaryObject,fitCore.Data.CurrentDiaryID,fitCore.Data.CurrentDiaryDate);n("#fit-shadow").hide()})};this.GetActivityStats=function(t){var r=this.APIURL+"/Stats/GetWeeklyStatistics?jsoncallback=?",i;if(WO.Data.ActivityCache[t.getFullYear()]!=undefined)return WO.Data.ActivityStats=WO.Data.ActivityCache[t.getFullYear()],!0;i={};this.DoCallBack(r,i,function(i){WO.Data.ActivityStats.length=0;n.each(i.History,function(n,t){WO.Data.ActivityStats.push(new WO.Objects.ActivityStat(t))});WO.Data.ActivityCache[t.getFullYear()]=WO.Data.ActivityStats.slice(0)})};this.GetRoutes=function(){var t=this.APIURL+"/Route/GetPersonRoutes?jsoncallback=?";this.DoCallBack(t,{},function(t){WO.Data.Routes.length=0;WO.Data.Routes.push(WO.Data.DummyRoute);n.each(t.PersonRoutes,function(n,t){WO.Data.Routes.push(new WO.Objects.Route(t))});n("#workoutDiv").trigger("routesChanged")})};this.AddActivity=function(t){var r=this.APIURL+"/Activity/Insert?jsoncallback=?",i=this.ParseServerActivity(t),u={jsonActivity:n.toJSON(i)};this.DoCallBack(r,u,function(r){i.ActivityID=r.ActivityId;i.ActivityStart=t.Date;i.ActivityEnded=t.EndDate;WO.Data.Exercises.push(new WO.Objects.Exercise(i));n("#workoutDiv").trigger("activityRefresh")})};this.DeleteActivity=function(t){var i=WO.Ajax.APIURL+"/Activity/DeletePersonActivity?jsoncallback=?",r={activityId:t.data.ID};WO.Ajax.DoCallBack(i,r,function(i){if(i.MessageId==0){var r=WO.Data.Exercises.indexOf(t.data);WO.Data.Exercises.splice(r,1);n("#workoutDiv").trigger("activityRefresh")}})};this.DeleteDiary=function(t){var i=WO.Ajax.APIURL+"/PersonalLog/DeleteLogEntry?jsoncallback=?",r={logId:t.data.ID};WO.Ajax.DoCallBack(i,r,function(i){if(i.MessageId==0){var r=WO.Data.Diary.indexOf(t.data);WO.Data.Diary.splice(r,1);n("#workoutDiv").trigger("activityRefresh")}})};this.MarkActivityCompleted=function(t){var i=WO.Ajax.APIURL+"/Activity/SetActivityComplete?jsoncallback=?",r={activityId:t.data.ID};WO.Ajax.DoCallBack(i,r,function(i){i.MessageId==0&&(t.data.Status=!0,n("#workoutDiv").trigger("activityRefresh"))})};this.UpdatePersonActivityTimings=function(t,i,r){var u=r==null?null:WO.Grid.formatDateTime(r),f=WO.Ajax.APIURL+"/Activity/UpdateActivityTiming?jsoncallback=?",e={activityId:t,activityStart:WO.Grid.formatDateTime(i),activityEnd:u};WO.Ajax.DoCallBack(f,e,function(t){t.MessageId==0&&n("#workoutDiv").trigger("activityRefresh")})};this.UpdateLogTimings=function(t,i){i=fitCore.CORE.formatDate(i,5);var r=WO.Ajax.APIURL+"/PersonalLog/UpdateLogTimings?jsoncallback=?",u={logId:t,newDate:i};WO.Ajax.DoCallBack(r,u,function(t){t.MessageId==0&&n("#workoutDiv").trigger("activityRefresh")})};this.UpdateActivity=function(t){var i=WO.Ajax.APIURL+"/Activity/UpdatePersonActivity?jsoncallback=?",r=WO.Ajax.ParseServerActivity(t),u={jsonActivity:n.toJSON(r)};this.DoCallBack(i,u,function(){n("#workoutDiv").trigger("activityRefresh")})};this.SaveGymActivityGroup=function(t){var i=WO.Ajax.APIURL+"/Activity/SaveActivityGroup?jsoncallback=?",r=WO.Ajax.ParseServerGymExercises(t.ActivityGroupItems),u={jsonActivityGroupItems:n.toJSON(r),activityId:t.ID,activityStart:WO.Grid.formatDateTime(t.Date),isComplete:t.Status,notes:"Workout Programme"};this.DoCallBack(i,u,function(){n("#workoutDiv").trigger("activityRefresh")})};this.ParseServerGymExercises=function(t){var i=[];return(t!=null||t!=undefined)&&n.each(t,function(n,t){i.push({ActivityID:t.ActivityID,ExerciseTypeID:t.ExerciseTypeID,WorkoutSection:t.ExerciseName,Reps:t.Reps,Sets:t.Sets,RestSeconds:t.RestSeconds,Quantity:WO.Data.NumericFilter(t.Quantity,null),IsReps:t.IsReps,HasWeight:t.HasWeight})}),i};this.ParseServerActivity=function(n){return{ActivityID:n.ID,ActivityStart:WO.Grid.formatDateTime(n.Date),ActivityEnded:WO.Grid.formatDateTime(n.EndDate),Quantity:n.Distance,ActivityTypeDesc:n.Activity,Notes:n.Description,IsComplete:n.Status,ActivityTypeID:n.WorkoutID,ExerciseTypeID:n.ExerciseTypeID,RouteID:n.RouteID,EstimatedCalories:n.Calories,EventID:n.EventID,WeatherCD:n.WeatherCD,ActivityGroupItems:WO.Ajax.ParseServerGymExercises(n.ActivityGroupItems),Seconds:n.Duration()}}};WO.SmartParser=new function(){this.GrabWord=function(n,t){var u=n.indexOf(t),i=0,r=0;if(u>-1){for(i=u;i>0&&n[i-1]!=" ";)i--;for(r=u;r<n.length&&n[r+1]!=" ";)r++}return n.substr(i,r-i+1)};this.Trim=function(n,t){var i=new RegExp("^"+t+"+|"+t+"+$","g");return n.replace(i,"")};this.GrabNextWord=function(n,t){var r=0,u=0,i=n.split(t);return i.length>1?(r=i[1].indexOf(" ")+1,u=i[1].indexOf(" ",r)!=-1?i[1].indexOf(" ",r):i[1].length):i[1]="",i[1].substr(r,u-r)};this.GrabPrevWord=function(n,t){var i=0,u=0,r=n.split(t);if(r[0][r[0].length-1]!=" ")i=r[0].lastIndexOf(" ")+1,u=r[0].length-1;else{for(u=r[0].lastIndexOf(" ")-1,i=u;r[0][i]!=" "&&i>0;)i--;i=i>0?i+1:0}return r[0].substr(i,u-i+1)};this.GetDateFromRelativeWord=function(n){var t=new Date,r,i;return n.contains("yesterday")?t.setDate(t.getDate()-1):n.contains("tomorrow")?t.setDate(t.getDate()+1):n.contains("days ago")?(r=this.GrabPrevWord(n,"days ago"),i=parseInt(r,10),isNaN(i)||t.setDate(t.getDate()-i)):n.contains("on")&&(r=this.GrabNextWord(n,"on"),i=r.match(/(\d+)/g),i!=null&&t.setDate(i)),t=="Invalid Date"?new Date:t};this.GetDurationFromRelativeWord=function(n){var t=0,i=0,r=0,u=n.match(/(\d+)(\s*)sec/g),f=n.match(/(\d+)(\s*)min/g),e=n.match(/(\d+)(\s*)hour/g);return u!=null&&(r=parseInt(u.toString().match(/(\d+)/g))),f!=null&&(i=parseInt(f.toString().match(/(\d+)/g))),e!=null&&(t=parseInt(e.toString().match(/(\d+)/g))),t==0&&i==0&&r==0?"":(t<10?"0"+t:t)+":"+(i<10?"0"+i:i)+":"+(r<10?"0"+r:r)};this.ParseDate=function(t){var r=new Date,u,i;if(t=t.replace(/-/g,"/"),u=t.contains("/")?"/":null,u!=null&&(i=this.GrabWord(t,"/"),i=this.Trim(i,";"),i=this.Trim(i,","),r=n.fullCalendar.parseDate(i),!isNaN(parseInt(i.replace(/\//g,""),10))))try{r=n.datepicker.parseDate("dd-M-yy",i.replace(/\//g,"-"))}catch(f){r=n.datepicker.parseDate("dd-M",i.replace(/\//g,"-"))}return(u==null||r=="Invalid Date")&&(r=this.GetDateFromRelativeWord(t)),r};this.GetDateWord=function(n){var i=n.contains("/")?"/":null,t;return i!=null?[this.GrabWord(n,"/"),"on "+this.GrabWord(n,"/")]:(i=n.contains("-")?"-":null,i!=null)?[this.GrabWord(n,"-"),"on "+this.GrabWord(n,"-")]:n.contains("yesterday")?["yesterday"]:n.contains("tomorrow")?["tomorrow"]:n.contains("days ago")?(t=this.GrabPrevWord(n,"days ago"),[t+"days ago",t+" days ago"]):n.contains("on")?(t=this.GrabNextWord(n,"on"),["on"+t,"on "+t]):null};this.ParseDuration=function(n){var t="",i=!1,r;return n.contains(":")&&(t=this.GrabWord(n,":"),t=this.Trim(t,","),t=this.Trim(t,";"),r=t.split(":"),r.forEach(function(n,i){n.length<2&&(t=t.insert(i==0?0:i==1?3:6,"0"))}),isNaN(parseInt(t.replace(":",""),10))||(i=!0),t.split(":").length<3&&(t="00:"+t)),i||(t=this.GetDurationFromRelativeWord(n)),t};this.ParseDistance=function(n){var u=n.match(/([-+]?[0-9]*\.?[0-9]+)(\s*)km/g)||n.match(/([-+]?[0-9]*\.?[0-9]+)(\s*)kilo/g),i,f,r,t,e;return u!=null?parseFloat(u.toString().match(/([-+]?[0-9]*\.?[0-9]+)/g),10):(i=n.match(/([-+]?[0-9]*\.?[0-9]+)(\s*)mi([^n]+|$)/g),i!=null)?(f=parseFloat(i.toString().match(/([-+]?[0-9]*\.?[0-9]+)/g),10),f*1.60934):(r=n.match(/([-+]?[0-9]*\.?[0-9]+)(\s*)m[e,\s]*[^n]*/g),r!=null)?(t=r.toString().match(/([-+]?[0-9]*\.?[0-9]+)/g).toString(),e=t.contains(",")?parseFloat(t.split(",")[0],10):parseFloat(t,10),e/1e3):"0"}};WO.Planner=new function(){this.Search=function(){var t=n("#smartSearch").val().replace(/(\s+)/g," "),e=t.toLowerCase().split(" "),u=!1,r,f,i;n.each(WO.Data.Workouts,function(t,i){n.each(e,function(t,r){n.inArray(r,WO.Data.IgnoreMetaList)<0&&i.MetaData.toLowerCase().indexOf(r)>-1&&(n("#workoutSelector").val(i.ID),u=!0)})});u||n("#workoutSelector").val(0);(t!=""||t!=" ")&&(r=WO.SmartParser.ParseDate(t),n("#dateInput").val(n.fullCalendar.formatDate(new Date(r.getFullYear(),r.getMonth(),r.getDate(),9,00,00),"dd-MMM-yyyy HH:mm")),r<=new Date?n("#activityStatus").val("true"):n("#activityStatus").val("false"),f=WO.SmartParser.ParseDuration(t),n("#durationInput").val(f),i=WO.SmartParser.ParseDistance(t),i=WO.Chart.Memory.isMetric==!1?(parseFloat(i,10)/1.60934).toFixed(2):parseFloat(i,10).toFixed(2),i!=0&&n("#distanceInput").val(i));n("#workoutSelector").trigger("change");WO.Planner.UpdateStatus()};this.UpdateStatus=function(){var t=n("#workoutSelector").val(),i=0,r=!1;n("#workoutSelector").val()!="0"?(i++,r=!0,n("#workOutInfo").hide()):n("#workOutInfo").show();n("#durationInput").val()!=""||t==11||t==10?(i++,n("#durationInfo").hide()):n("#durationInfo").show();n("#distanceInput").val()!=""||t==11||t==10?(i++,n("#distanceInfo").hide()):n("#distanceInfo").show();r?(n(".status-new").hide(),n(".status-ok").show(),n(".status-good").hide()):(n(".status-new").show(),n(".status-ok").hide(),n(".status-good").hide());i==3&&(n(".status-new").hide(),n(".status-ok").hide(),n(".status-good").show())};this.EditDiary=function(t,i){var u=n.grep(t,function(n){return n.ID==parseInt(i,10)}),r=u[0],f=r.Date;fitCore.Data.CurrentDiaryObject=r;fitCore.Data.CurrentDiaryID=i;fitCore.Data.CurrentDiaryDate=fitCore.CORE.formatDate(f,5);this.LoadDiary(r)};this.LoadDiary=function(t){n("#fit-diary").length>0?(fitCore.mealPlanner.popup_window2(630,"#fit-diary"),fitCore.mealPlanner.getDiaryNotes(t)):n("#fit-workout-diary-container").load(WO.Logger.CorePath+"templates/diary.html",function(){fitCore.mealPlanner.getDiaryNotes(t);n("#btn-diary-save").on("click",function(){return WO.Ajax.SaveDiaryEntry(fitCore.mealPlanner.fitMealplannerSaveDiaryEntrySuccess,fitCore.Data.CurrentDiaryID,fitCore.Data.CurrentDiaryDate),n(this).closest(".ui-dialog-content").dialog("close"),!1});n("#btn-diary-cancel").on("click",function(){n(this).closest(".ui-dialog-content").dialog("close")});fitCore.mealPlanner.popup_window2(630,"#fit-diary")})};this.DecideFitnessTestType=function(t){n.each(WO.Data.FitnessTestComb,function(i,r){var u=!0;if(n.each(r.Combination,function(i,r){var f=n.grep(t,function(n){return n.ExerciseTypeID==r});f.length==0&&(u=!1)}),u){n("#exerciseSelector").empty();n("<option>").val("0").text(r.Name).appendTo("#exerciseSelector");n("#exerciseSelector").parent().show();return}})};this.EditExercise=function(t,i){var e=n.grep(t,function(n){return n.ID==parseInt(i,10)}),r=e[0],u,f,o;(r.WorkoutID==10||r.WorkoutID==11)&&(n("#gymItemContainer","#gymDiv").empty(),r.ActivityGroupItems!=null&&r.ActivityGroupItems.length>0&&n.each(r.ActivityGroupItems,function(n,t){WO.GymEditor.AddExercise(new WO.Objects.GymExercise(t))}),n("#workoutSelector","#popupBoxDiv").attr("disabled","disabled"),n(".normalItem").hide(),n(".gymItem").show());n(".workoutPopupWrapper").addClass("updateView");n("#popupBoxDiv","#workoutDiv").addClass("updateView");n("#workoutSelector","#popupBoxDiv").val(r.WorkoutID);n("#workoutSelector").trigger("change",[!0]);r.ExerciseTypeID!=null?(e=n.grep(WO.Data.ExerciseTypes,function(n){return n.ActivityTypeId==r.WorkoutID}),e.length>0&&(n("#exerciseSelector","#popupBoxDiv").val(r.ExerciseTypeID),n("#exerciseSelector","#popupBoxDiv").parent().show())):n("#exerciseSelector","#popupBoxDiv").parent().hide();n("#dateInput","#popupBoxDiv").val(n.fullCalendar.formatDate(r.Date,"dd-MMM-yyyy HH:mm"));u=r.Duration();f="";f+=parseInt(u/3600,10).toString()+":";u=u-parseInt(u/3600,10)*3600;f+=parseInt(u/60,10).toString()+":";u=u-parseInt(u/60,10)*60;f+=u.toString();o=f.split(":");o.forEach(function(n,t){n.length<2&&(f=f.insert(t==0?0:t==1?3:6,"0"))});n("#durationInput","#popupBoxDiv").val(f);WO.Chart.Memory.isMetric==!0?n("#distanceInput","#popupBoxDiv").val((r.Distance/1e3).toFixed(2)):n("#distanceInput","#popupBoxDiv").val((r.Distance/1609.34).toFixed(2));r.RouteID!=null?n("#routeSelector","#popupBoxDiv").val(r.RouteID):n("#routeSelector","#popupBoxDiv").val(0);r.Explanation!=null&&r.Explanation!=""?(n("#coachInstructionsWrapper").show(),n("#coachInstructions").html("<p>"+r.Explanation+"<\/p>")):n("#coachInstructionsWrapper").hide();WO.Planner.UpdateStatus();n("#currentExerciseID","#popupBoxDiv").val(i);n("#popupBoxDiv","#workoutDiv").is(":visible")&&WO.Logger.ShowAnimations==!0&&n("#popupBoxDiv","#workoutDiv").hide("puff");WO.Logger.PopupInCenter==!0&&n("#popupBoxDiv","#workoutDiv").center();WO.Logger.ShowAnimations==!0&&n("#popupBoxDiv","#workoutDiv").show("puff")};this.UpdateExercise=function(){var u=parseInt(n("#currentExerciseID","#popupBoxDiv").val(),10),f=n.grep(WO.Data.Exercises,function(n){return n.ID==u}),t=f[0],i,r;t.Date=n.datepicker.parseDate("dd-M-yy",n("#dateInput").val());i=[0,0];n("#dateInput").val().split(" ")[1]!=null&&(i=n("#dateInput").val().split(" ")[1].split(":"));t.Date.setHours(i[0],i[1],0,0);n("#durationInput").val().split(":").length>2?(r=n("#durationInput").val().split(":"),t.EndDate=t.Date.addSeconds(parseInt(r[0],10)*3600+parseInt(r[1],10)*60+parseInt(r[2],10))):t.EndDate=t.Date;t.WorkoutID=n("#workoutSelector").val();t.Activity=n("#workoutSelector option:selected").text();t.Status=n("#activityStatus").val()=="true";t.WorkoutID!=10&&t.WorkoutID!=11?(t.Distance=WO.Chart.Memory.isMetric?n("#distanceInput").val()*1e3:n("#distanceInput").val()*1609.34,t.Description="",n("#exerciseSelector").val()!=null&&(t.ExerciseTypeID=n("#exerciseSelector").val(),t.Description+=n("#exerciseSelector option:selected").text()),n("#routeSelector").val()!=null&&n("#routeSelector").val()!=WO.Data.Routes[0].ID&&(t.RouteID=n("#routeSelector").val(),t.Description+=" ",t.Description+=n("#routeSelector option:selected").text()),WO.Ajax.UpdateActivity(t)):(WO.GymEditor.UpdateExercise(t),WO.Ajax.UpdateActivity(t))};this.AddExercise=function(){var n=WO.Planner.ParseExerciseJSON();WO.Ajax.AddActivity(WO.Planner.ParseExerciseJSON())};this.ParseExerciseJSON=function(){var t={},r,u,i,f;return t.ActivityID=n.guid,t.ActivityStart=n.datepicker.parseDate("dd-M-yy",n("#dateInput").val()),r=[0,0],n("#dateInput").val().split(" ")[1]!=null&&(r=n("#dateInput").val().split(" ")[1].split(":")),t.ActivityStart.setHours(r[0],r[1],0,0),n("#durationInput").val().split(":").length>2?(u=n("#durationInput").val().split(":"),t.EndDate=t.ActivityStart.addSeconds(parseInt(u[0],10)*3600+parseInt(u[1],10)*60+parseInt(u[2],10))):t.EndDate=t.ActivityStart,t.ActivityTypeID=n("#workoutSelector").val(),t.ActivityTypeDesc=n("#workoutSelector option:selected").text(),t.IsComplete=n("#activityStatus").val()=="true",t.Notes="",t.ActivityTypeID!=10&&t.ActivityTypeID!=11?(t.Quantity=WO.Chart.Memory.isMetric?n("#distanceInput").val()*1e3:n("#distanceInput").val()*1609.34,n("#exerciseSelector").val()!=null&&(t.ExerciseTypeID=n("#exerciseSelector").val(),t.Notes+=n("#exerciseSelector option:selected").text()),n("#routeSelector").val()!=null&&n("#routeSelector").val()!=WO.Data.Routes[0].ID&&(t.RouteID=n("#routeSelector").val(),t.Notes+=" ",t.Notes+=n("#routeSelector option:selected").text())):(t.Quantity=0,WO.GymEditor.UpdateExercise(t),t.Notes="Workout Programme"),i=n("#smartSearch").val().replace(/(\s+)/g," "),(i!=""||i!="")&&(f=WO.SmartParser.GetDateWord(i),f!=null&&f.forEach(function(n){i=i.replace(n,"")}),t.Notes=i),new WO.Objects.Exercise(t)};this.EditDietLog=function(){window.location.href=WO.Logger.DietLogPath};this.CreateCardioPlan=function(){window.location.href=WO.Logger.CardioPlanPath};this.CreateWorkoutPlan=function(){window.location.href=WO.Logger.WorkoutPlanPath}};WO.GymEditor=new function(){this.AddExercise=function(t){var u,i,r,f,e;t=t||new WO.Objects.GymExercise(null);u=n.grep(WO.Data.ExerciseTypes,function(n){return n.ExerciseTypeID==t.ExerciseTypeID});t.HasWeight=u[0].HasWeight;i=n("#gymTemplate").clone();n(".gymExerciseSelector",i).val(t.ExerciseTypeID);n(".setsData",i).val(t.Sets);r=t.Reps;t.IsReps||(f=parseInt(t.Reps/60,10),e=t.Reps%60,r=f+":"+e,r=WO.Grid.formatTime(t.Reps,!1));n(".gymExerciseSelector",i).data("HasWeight",t.HasWeight);n(".repsData",i).val(r);n(".typeData",i).val(t.IsReps);t.HasWeight==!0?(n(".weightData",i).val(t.Quantity),n(".weightData",i).prop("disabled",!1)):(n(".weightData",i).val("n/a"),n(".weightData",i).prop("disabled",!0));n(".restData",i).val(t.RestSeconds);n("a",i).bind("click",function(){n(this).parent().parent().remove()});i.attr("id","");i.attr("class","exerciseItem");i.css("display","block");i.appendTo("#gymItemContainer")};this.UpdateExercise=function(t){return t.ActivityGroupItems=[],n(".exerciseItem","#gymItemContainer").each(function(i,r){var u=new WO.Objects.GymExercise(null),f;u.ActivityID=t.ID;u.ExerciseID=i+1;u.ExerciseName=n(".gymExerciseSelector option:selected",r).text();u.ExerciseTypeID=n(".gymExerciseSelector",r).val();u.IsReps=n(".repsData",r).val().indexOf(":")<0;u.IsReps?u.Reps=n(".repsData",r).val():(f=n(".repsData",r).val().split(":"),u.Reps=parseInt(f[0]*60,10)+parseInt(f[1],10));u.RestSeconds=n(".restData",r).val();u.Quantity=n(".weightData",r).val();u.Sets=n(".setsData",r).val();t.ActivityGroupItems.push(u)}),t}};WO.Transformers=new function(){this.DurationTransformer=function(t){var i=0;return n.each(t,function(n,t){i+=t.Duration()}),i/60};this.DistanceTransformer=function(t){var i=0;return n.each(t,function(n,t){i+=t.Distance}),WO.Chart.Memory.isMetric?i/1e3:i/1609.34};this.SpeedTransformer=function(t){var i=0;return n.each(t,function(n,t){t.Duration()>0&&(i+=t.Distance*3600/(t.Duration()*1e3))}),i/7};this.WeightTransformer=function(n){return WO.Chart.Memory.isMetric?n.AvgWeight:n.AvgWeight*2.20462};this.PulseTransformer=function(n){return n.AvgPulse};this.CaloriesBurnedTransformer=function(n){return n.Calories};this.CaloriesEatenTransformer=function(n){return n.CaloriesEaten}};WO.Chart=new function(){this.rPaper;this.Memory={lastChecked:null,settings:{Duration:{stepValue:60,axisLabel:"Training Time (minutes)"},Distance:function(){var n={};return n.stepValue=10,n.axisLabel=WO.Chart.Memory.isMetric?"Training Distance (km)":"Training Distance (mi)",n},Speed:{stepValue:5,axisLabel:"Average KM/Hour"},Pulse:{stepValue:20,axisLabel:"Average Pulse"},Weight:function(){var n={};return n.stepValue=10,n.axisLabel=WO.Chart.Memory.isMetric?"Average Weight (kg)":"Average Weight (lbs)",n},CaloriesBurned:{stepValue:500,axisLabel:"Calories Burned"},CaloriesEaten:{stepValue:500,axisLabel:"Calories Eaten"}},isMetric:!0};this.GetPlotData=function(t,i){var e,u,r,o,f;if(i=="Weight"||i=="Pulse"||i=="CaloriesBurned"||i=="CaloriesEaten"){e=parseInt(n("#yearSelector").val());u=[];for(r in WO.Data.ActivityStats)WO.Data.ActivityStats[r].ActYear==e&&(f=t(WO.Data.ActivityStats[r]),u.push(f));return u}for(u=[],r=1;r<=53;r++)o=n.grep(WO.Data.Exercises,function(n){return n.Date.getWeek()==r}),f=t(o),u.push(f);return u};this.DrawAxisX=function(){var n,t;for(WO.Chart.rPaper.path("M65,331H675"),WO.Chart.rPaper.text(350,370,"Week of Year").attr({font:"20px Helvetica"}),n=1;n<=53;n++)t=76+n*11,WO.Chart.rPaper.path("M"+t+",331V340"),n%2==1&&WO.Chart.rPaper.text(71+n*11,345,n)};this.DrawAxisY=function(n,t,i){var o,f,e,r,u;n==0&&(n=780);o=260*t/n;WO.Chart.rPaper.path("M77,340V10");WO.Chart.rPaper.text(20,160,i).attr({transform:"r-90",font:"20px Helvetica"});f=1;e=0;do e=331-o*f,WO.Chart.rPaper.path("M77,"+e+"H70"),r=t*f,i.toLowerCase().indexOf("time")>-1&&(u=t*f,r=parseInt(u/60,10)+":",r.length<3&&(r="0"+r),r+=u%60<10?"0"+u%60:u%60==0?"00":u%60),WO.Chart.rPaper.text(50,e,r),f++;while(e>70)};this.Draw=function(n,t,i,r,u){var e=WO.Chart.GetPlotData(n,u),o,f,s;if(r)WO.Chart.rPaper.clear(),WO.Chart.DrawAxisX(),WO.Chart.DrawAxisY(Math.max.apply(null,e),i,t),WO.Chart.rPaper.barchart(75,50,600,300,e,{type:"soft"}).attr("fill",WO.Logger.BarColour).hover(WO.Chart.hoverIn,WO.Chart.hoverOut);else{for(WO.Chart.rPaper.text(710,160,t).attr({transform:"r90",font:"20px Helvetica"}),o=[],f=1;f<=53;f++)o.push(f);s={nostroke:!1,axis:"0 1 0 0",smooth:!0,symbol:"circle",dash:"-",colors:[WO.Logger.LineColour],axisystep:10};WO.Chart.rPaper.linechart(66,40,600,300,o,e,s)}};this.Render=function(){var i=[],r,t;n("input:checked","#graphOptions").each(function(t,r){i.push(n(r).val())});i.length>0?(r=WO.Transformers[i[0]+"Transformer"],t=WO.Chart.Memory.settings[i[0]],typeof t=="function"&&(t=t()),WO.Chart.Draw(r,t.axisLabel,t.stepValue,!0,i[0])):(WO.Chart.rPaper.clear(),WO.Chart.DrawAxisX(),WO.Chart.DrawAxisY(10,1,""));i.length==2&&(r=WO.Transformers[i[1]+"Transformer"],t=WO.Chart.Memory.settings[i[1]],typeof t=="function"&&(t=t()),WO.Chart.Draw(r,t.axisLabel,t.stepValue,!1,i[1]))};this.hoverIn=function(){var i,r,t;this.bar.value!=0&&(i=Math.round(this.bar.value)||"0",r=n.grep(this.paper.canvas.children,function(n){return n.textContent.toLowerCase().indexOf("time")>-1}).length>0,r&&(t=Math.round(this.bar.value)||0,valueLabel=parseInt(t/60,10)+":",valueLabel.length<3&&(valueLabel="0"+valueLabel),valueLabel+=t%60<10?"0"+t%60:t%60==0?"00":t%60,i=valueLabel),this.flag=WO.Chart.rPaper.popup(this.bar.x,this.bar.y,i).insertBefore(this))};this.hoverOut=function(){this.bar.value!=0&&this.flag.animate({opacity:0},300,function(){this.remove()})}};WO.Grid=new function(){this.hGrid;this.Render=function(){WO.Grid.SetPaginator();WO.Grid.hGrid.handsontable("render")};this.ActionRender=function(t,i,r,u,f,e){e="";itemObject=t.getData()[r];Handsontable.TextCell.renderer.apply(this,arguments);var s=n('<a class="rightDiv"><\/a>').append("<img src='/wp-content/plugins/fitness-workout-logger/css/wo_images/cross.png' alt='delete' class='delete-workout' />").addClass("bound").bind("click",itemObject,WO.Ajax.DeleteActivity),h=n('<a class="middleDiv"><\/a>').append("<img src='/wp-content/plugins/fitness-workout-logger/css/wo_images/edit.png' alt='edit' class='edit-workout' />").bind("click",itemObject,WO.Grid.EditActivity),o;o=itemObject.Status?n("<img class='leftDiv' src='/wp-content/plugins/fitness-workout-logger/css/wo_images/checked.png' alt='done' class='completed-workout' />"):n('<a class="leftDiv"><\/a>').append("<img src='/wp-content/plugins/fitness-workout-logger/css/wo_images/pending.png' class='complete-workout' alt='mark as done' />").bind("click",itemObject,WO.Ajax.MarkActivityCompleted);o.appendTo(i);h.appendTo(i);s.appendTo(i)};this.EditActivity=function(n){WO.Planner.EditExercise(WO.Data.Exercises,n.data.ID)};this.formatTime=function(n,t){var u=Math.floor(n/3600),i=Math.floor((n-u*3600)/60),r=Math.round(n-u*3600-i*60);return u==0&&t==!1?(i<10?"0"+i:i)+":"+(r<10?"0"+r:r):u+":"+(i<10?"0"+i:i)+":"+(r<10?"0"+r:r)};this.formatDateTime=function(t){var i=":";return t.getMinutes()<10&&(i=":0"),n.datepicker.formatDate("dd-M-yy ",t)+t.getHours()+i+t.getMinutes()};this.DataParser=function(t){return{data:function(i,r){var u,f;if(r==undefined&&r==null){switch(t){case"Date":u=n.fullCalendar.formatDate(i[t],"ddd dS");break;case"Status":u=i[t];break;case"Duration":return f=i.Duration(),WO.Grid.formatTime(f,!0);case"Distance":u=i.Activity=="Gym"?"n/a":WO.Chart.Memory.isMetric?(i[t]/1e3).toFixed(2)+"km":(i[t]/1609.34).toFixed(2)+"mi";break;default:u=i[t]}return u}i[t]=r},readOnly:!0,type:t=="Status"?{renderer:WO.Grid.ActionRender}:"text"}};this.paginator={currentDate:new Date};this.GoToPrevMonth=function(){var r=new Date,i,t;if(WO.Grid.paginator.currentDate.getMonth()==0&&!fitCore.CORE.IsValueInElementCollection(n("#yearSelector option"),WO.Grid.paginator.currentDate.getFullYear()-1))return!1;n("#nextMonth").removeClass("fc-state-disabled");WO.Grid.paginator.currentDate.getMonth()!=1||fitCore.CORE.IsValueInElementCollection(n("#yearSelector option"),WO.Grid.paginator.currentDate.getFullYear()-1)||n("#prevMonth").addClass("fc-state-disabled");i=WO.Grid.paginator.currentDate.getFullYear();WO.Grid.paginator.currentDate.setMonth(WO.Grid.paginator.currentDate.getMonth()-1);t=WO.Grid.paginator.currentDate.getFullYear();i!=t&&(n("#yearSelector").val(t),n("#yearSelector").trigger("change"));WO.Grid.Render()};this.GoToNextMonth=function(){var r=new Date,i,t;if(WO.Grid.paginator.currentDate.getMonth()==11&&!fitCore.CORE.IsValueInElementCollection(n("#yearSelector option"),WO.Grid.paginator.currentDate.getFullYear()+1))return!1;n("#prevMonth").removeClass("fc-state-disabled");WO.Grid.paginator.currentDate.getMonth()!=10||fitCore.CORE.IsValueInElementCollection(n("#yearSelector option"),WO.Grid.paginator.currentDate.getFullYear()+1)||n("#nextMonth").addClass("fc-state-disabled");i=WO.Grid.paginator.currentDate.getFullYear();WO.Grid.paginator.currentDate.setMonth(WO.Grid.paginator.currentDate.getMonth()+1);t=WO.Grid.paginator.currentDate.getFullYear();i!=t&&(n("#yearSelector").val(t),n("#yearSelector").trigger("change"));WO.Grid.Render()};this.SetPaginator=function(){n("#currentDate").text(n.datepicker.formatDate("M yy",this.paginator.currentDate));WO.Data.GridExercises.length=0;n.each(WO.Data.Exercises,function(n,t){t.Date.getMonth()==WO.Grid.paginator.currentDate.getMonth()&&t.Date.getFullYear()==WO.Grid.paginator.currentDate.getFullYear()&&WO.Data.GridExercises.push(t)});WO.Data.GridExercises.sort(function(n,t){return n.Date-t.Date})}};WO.CalendarSettings={header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},NodayClick:function(t){var i=!1,r=null;n.each(WO.Data.Diary,function(n,u){if(u.Date.getMonth()==t.getMonth()&&u.Date.getFullYear()==t.getFullYear()&&u.Date.getDate()==t.getDate())return i=!0,fitCore.Data.CurrentDiaryObject=u,fitCore.Data.CurrentDiaryID=u.ID,fitCore.Data.CurrentDiaryDate=fitCore.CORE.formatDate(u.Date,5),r=u,!1});i==!1&&(fitCore.Data.CurrentDiaryObject=null,fitCore.Data.CurrentDiaryID=0,fitCore.Data.CurrentDiaryDate=fitCore.CORE.formatDate(t,5));WO.Planner.LoadDiary(r)},firstDay:1,allDayDefault:!1,eventDataTransform:function(n){var t;return n.LogNotes!=undefined?{id:n.ID,title:"Diary",start:n.Date,end:n.Date,className:"fit-diaryentry"}:{id:n.ID,title:n.Activity+" : "+n.Description,start:n.Date,end:n.EndDate,className:n.Status?"fit-activity activityDone":"fit-activity activityPending"}},editable:!0,eventDrop:function(t){var r,i;t.className=="fit-diaryentry"?(r=n.grep(WO.Data.Diary,function(n){return n.ID==t.id})[0],WO.Ajax.UpdateLogTimings(t.id,t.start)):(i=n.grep(WO.Data.Exercises,function(n){return n.ID==t.id})[0],i.EndDate=t.end!=null?t.end:i.Date,WO.Ajax.UpdatePersonActivityTimings(t.id,t.start,t.end))},eventResize:function(t){var i=n.grep(WO.Data.Exercises,function(n){return n.ID==t.id})[0];i.EndDate=t.end;WO.Ajax.UpdatePersonActivityTimings(t.id,t.start,t.end)},viewDisplay:function(t){isNaN(parseInt(n("#yearSelector").val(),10))||t.start.getFullYear()!=parseInt(n("#yearSelector").val(),10)&&(n("#yearSelector").val(t.start.getFullYear()),n("#yearSelector").trigger("change"))},eventClick:function(){},eventRender:function(t,i){n(i).data("ID",t.id);var r=t.className=="activityDone";n(i).data("IsComplete",r)},eventAfterAllRender:function(){n.contextMenu({selector:"div.fc-event.fit-activity",className:"workout-context",trigger:"left",zIndex:9,callback:function(t){var i=parseInt(n(this).data("ID"),10),r=n.grep(WO.Data.Exercises,function(n){return n.ID==i}),u={data:r[0]};t=="CreateWorkoutPlan"||t=="CreateCardioPlan"||t=="EditDietLog"?WO.Planner[t]():t.indexOf("Edit")>-1?WO.Planner[t](WO.Data.Exercises,i):WO.Ajax[t](u)},items:{EditExercise:{name:"Edit",icon:"edit"},MarkActivityCompleted:{name:"Mark as Complete",icon:"mark",disabled:function(){return n(this).data("IsComplete")}},DeleteActivity:{name:"Delete",icon:"delete"},EditDietLog:{name:"Diet Diary",icon:"diet"},CreateWorkoutPlan:{name:"Create Workout Plan",icon:"createworkout"},CreateCardioPlan:{name:"Create Cardio Plan",icon:"createcardio"}}});n.contextMenu({selector:"div.fc-event.fit-diaryentry",className:"workout-context",trigger:"left",zIndex:9,callback:function(t){var i=parseInt(n(this).data("ID"),10),r=n.grep(WO.Data.Diary,function(n){return n.ID==i}),u={data:r[0]};t=="CreateWorkoutPlan"||t=="CreateCardioPlan"||t=="EditDietLog"?WO.Planner[t]():t.indexOf("Edit")>-1?WO.Planner[t](WO.Data.Diary,i):WO.Ajax[t](u)},items:{EditDiary:{name:"Edit",icon:"edit"},DeleteDiary:{name:"Delete",icon:"delete"},EditDietLog:{name:"Diet Diary",icon:"diet"},CreateWorkoutPlan:{name:"Create Workout Plan",icon:"createworkout"},CreateCardioPlan:{name:"Create Cardio Plan",icon:"createcardio"}}});n.contextMenu({selector:"div.fc-content td.fc-day",className:"workout-context",trigger:"left",zIndex:9,callback:function(t){var i=parseInt(n(this).data("ID"),10);switch(t){case"NewDiary":fitCore.Data.CurrentDiaryObject=null;fitCore.Data.CurrentDiaryID=0;fitCore.Data.CurrentDiaryDate=fitCore.CORE.formatDate(new Date(this.context.dataset.date),5);WO.Planner.LoadDiary(null);break;case"NewWorkout":n("#smartSearch").trigger("click");n("#popupBoxDiv").show();n("#dateInput").val(fitCore.CORE.formatDate(new Date(this.context.dataset.date),5));break;case"EditDietLog":WO.Planner.EditDietLog();break;case"CreateWorkoutPlan":WO.Planner.CreateWorkoutPlan();break;case"CreateCardioPlan":WO.Planner.CreateCardioPlan()}},items:{NewDiary:{name:"New Diary",icon:"add"},NewWorkout:{name:"New Workout",icon:"add"},EditDietLog:{name:"Diet Diary",icon:"diet"},CreateWorkoutPlan:{name:"Create Workout Plan",icon:"createworkout"},CreateCardioPlan:{name:"Create Cardio Plan",icon:"createcardio"}}})}};WO.Logger=new function(){this.PopupInCenter=!1;this.ShowAnimations=!0;this.BarColour="#6699E0";this.LineColour="#FF0000";this.ShowPopupOnDescClick=!1;this.start=function(t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k){var et,d,g,ot;console.log("start");var st=n("#fit_default_tab").val(),ht=n("#fit_view_entry").val(),ut=n("#fit_view_workouts").val(),ft=n("#fit_view_graph").val();(p==undefined||p=="")&&(p="/wp-content/plugins/fitness-core/");p.endsWith("/")||(p+="/");this.CorePath=p;WO.Logger.PopupInCenter=l;WO.Logger.ShowAnimations=a;WO.Logger.BarColour=h;WO.Logger.LineColour=c;WO.Logger.ShowPopupOnDescClick=v;WO.Logger.DietLogPath=w;WO.Logger.CardioPlanPath=b;WO.Logger.WorkoutPlanPath=k;WO.Logger.PopupInCenter==!0&&n(".workoutPlanner, .workoutWrapper").css("position","static");n(window).bind("resize scroll",function(){WO.Logger.PopupInCenter==!0&&n(".updateView","#workoutDiv").center()});(ht=="false"||ht==!1)&&(n(".workoutPlanner").hide(),n(".conversionButton").hide());(ut=="false"||ut==!1)&&(n(".workoutView").hide(),n(".conversionButton").hide());(ft=="false"||ft==!1)&&n(".workoutGraph").hide();(y=="true"||y==!0)&&(n(".fit-diary-admin").show(),n("#fit-diary-text").addClass("split"));n("#workoutDiv").bind("activityRefresh",function(){WO.CalendarSettings.month=n("#fullCalendar").fullCalendar("getDate").getMonth();WO.CalendarSettings.date=n("#fullCalendar").fullCalendar("getDate").getDate();WO.CalendarSettings.defaultView=n("#fullCalendar").fullCalendar("getView").name;n("#fullCalendar").empty();WO.CalendarSettings.eventSources=[WO.Data.Exercises,WO.Data.Diary];n("#fullCalendar").fullCalendar(WO.CalendarSettings);WO.Chart.Render();WO.Grid.Render();ft=="true"&&n("div.workoutGraph").show()});n("#workoutDiv").bind("routesChanged",function(){n("#routeSelector").empty();n.each(WO.Data.Routes,function(t,i){n("<option>").val(i.ID).text(i.Name).appendTo("#routeSelector")})});WO.Ajax.GetActivities(new Date((new Date).getFullYear(),0,1),new Date((new Date).getFullYear()+1,11,31),!1);WO.Ajax.GetRoutes();WO.Ajax.GetActivityStats(new Date((new Date).getFullYear(),0,1),new Date((new Date).getFullYear()+1,11,31));n("#smartSearch").keydown(function(t){t.keyCode!=13||n("#addWorkoutButton").is(":disabled")||(n("#addWorkoutButton").trigger("click"),n("#smartSearch").val(""))});n("#smartSearch").bind("keyup",function(t){t.keyCode!=13&&(n("#popupBoxDiv").is(":visible")||(n("#gymItemContainer","#gymDiv").empty(),WO.Logger.ShowAnimations==!0&&n("#popupBoxDiv").show("blind",200),n("#routeSelector").val(0),n("#distanceInput").val("")),WO.Planner.Search());n("#popupBoxDiv").css("left","");n("#popupBoxDiv").css("top","")});n("input[data-wmt]").each(function(t,i){n(i).watermark(n(i).attr("data-wmt"))});et="";WO.Logger.ShowPopupOnDescClick==!0&&(et=", #smartSearch");n("#searchImage"+et).bind("click",function(){n("#popupBoxDiv").is(":visible")||(n("#gymItemContainer","#gymDiv").empty(),n("#routeSelector").val(0),n("#distanceInput").val(""),WO.Planner.Search());WO.Logger.ShowAnimations==!0&&n("#popupBoxDiv").show("blind",200)});n(document).keyup(function(t){t.keyCode==27&&(WO.Logger.ShowAnimations==!0&&n("#popupBoxDiv").hide("puff"),n("#popupBoxDiv").removeClass("updateView"),n(".workoutPopupWrapper").removeClass("updateView"),n("#workoutSelector").removeAttr("disabled"),n("#gymItemContainer","#gymDiv").empty())});n("#addWorkoutButton").button();n("#updateWorkoutButton").button();n("#closeButton").button();n("input.conversionButton").button();n("#gymAddButton").button();n("#closeButton").bind("click",function(){WO.Logger.ShowAnimations==!0&&n("#popupBoxDiv").hide("puff");n("#coachInstructionsWrapper").hide();n("#popupBoxDiv").removeClass("updateView");n(".workoutPopupWrapper").removeClass("updateView");n("#workoutSelector").removeAttr("disabled");n("#gymItemContainer","#gymDiv").empty()});n("#gymAddButton").bind("click",function(){WO.GymEditor.AddExercise(null)});n("#addWorkoutButton").bind("click",function(){WO.Planner.AddExercise();n("#coachInstructionsWrapper").hide();n("#popupBoxDiv").hide()});n("#updateWorkoutButton").bind("click",function(){WO.Planner.UpdateExercise();n("#coachInstructionsWrapper").hide();n("#popupBoxDiv").removeClass("updateView");n(".workoutPopupWrapper").removeClass("updateView");n("#popupBoxDiv").hide();n("#workoutSelector").removeAttr("disabled")});n("#gymItemContainer").on("change",".gymExerciseSelector",function(){var i=n(this).val(),r=n.grep(WO.Data.ExerciseTypes,function(n){return n.ExerciseTypeID==i}),t=n(this).parent().parent().find(".weightData");r[0].HasWeight==!0?(t.val(""),t.prop("placeholder","weight?"),t.prop("disabled",!1)):(t.val("n/a"),t.prop("disabled",!0))});n("#workoutSelector").bind("change",function(t,i){var u,r;n("#workoutSelector").val()==10||n("#workoutSelector").val()==11?(n("#workoutSelector").val()==11&&i!=!0&&n("#gymItemContainer").empty(),n(".normalItem").hide(),n(".gymItem").show(),n("#workoutSelector").val()==10?(n("#gymItemContainer .exerciseItem").length==0&&WO.GymEditor.AddExercise(null),n("#exerciseSelector").parent().hide()):i!=!0&&(r=n.grep(WO.Data.FitnessTestComb,function(n){return n.Name=="Standard"}),n.each(r[0].Combination,function(t,i){var r=n.grep(WO.Data.ExerciseTypes,function(n){return n.ExerciseTypeID==i});gymExercise={ActivityGroupItemID:1,ActivityID:r[0].ActivityTypeId,ExerciseTypeID:r[0].ExerciseTypeID,WorkoutSection:r[0].Name,Reps:0,Sets:0,RestSeconds:0,Quantity:0,IsReps:r[0].IsReps,HasWeight:r[0].HasWeight};WO.GymEditor.AddExercise(new WO.Objects.GymExercise(gymExercise))}),n("#exerciseSelector").empty(),n("<option>").val("0").text("Standard").appendTo("#exerciseSelector"),n("#exerciseSelector").parent().show())):(n("#exerciseSelector").empty(),u=parseInt(n(this).val(),10),r=n.grep(WO.Data.ExerciseTypes,function(n){return n.ActivityTypeId==u}),r.length>0?(n.each(r,function(t,i){n("<option>").val(i.ExerciseTypeID).text(i.Name).appendTo("#exerciseSelector")}),n("#exerciseSelector").parent().show()):n("#exerciseSelector").parent().hide(),n(".normalItem").show(),n(".gymItem").hide());u==0||u==10||u==11?n("#routeSelector").parent().hide():n("#routeSelector").parent().show();n("#workoutSelector").val()==0?(n("#addWorkoutButton,#updateWorkoutButton").attr("disabled","disabled"),n("#addWorkoutButton,#updateWorkoutButton").removeClass("ui-button-success")):(n("#addWorkoutButton,#updateWorkoutButton").removeAttr("disabled","disabled"),n("#addWorkoutButton").hasClass("ui-button-success")||n("#addWorkoutButton").addClass("ui-button-success"),n("#updateWorkoutButton").hasClass("ui-button-success")||n("#updateWorkoutButton").addClass("ui-button-success"));WO.Planner.UpdateStatus()});n("#distanceInput,#durationInput").bind("keyup",function(){WO.Planner.UpdateStatus()});n("#routeSelector").bind("change",function(){var t=parseInt(n(this).val(),10),i=n.grep(WO.Data.Routes,function(n){return n.ID==t}),r=WO.Chart.Memory.isMetric?1e3:1609.34;n("#distanceInput").val((i[0].Distance/r).toFixed(2))});n("input.conversionButton,a.conversionButton").bind("click",function(t){var i=n(t.target).is("input")?n(t.target).val():n(t.target).text();i.indexOf("Metric")>-1?(WO.Chart.Memory.isMetric=!0,n("input.conversionButton").each(function(t,i){n(i).val("Imperial")}),n("a.conversionButton").each(function(t,i){n("span",i).text("Imperial")})):(WO.Chart.Memory.isMetric=!1,n("input.conversionButton").each(function(t,i){n(i).val("Metric")}),n("a.conversionButton").each(function(t,i){n("span",i).text("Metric")}));WO.Converter.ChangeSystem()});n("#dateInput").val(n.fullCalendar.formatDate(new Date,"dd-MMM-yyyy HH:mm"));n("#dateInput").datetimepicker({dateFormat:"dd-M-yy",onClose:function(t){var i=n.datepicker.parseDate("dd-M-yy",t);i<=new Date?n("#activityStatus").val("true"):n("#activityStatus").val("false")},beforeShow:function(){var t=n(this).datepicker("widget");t.parent().hasClass("fit-ui")||n(this).datepicker("widget").wrap("<div class='fit-ui'/>")}});n("#durationInput").timepicker({pickDate:!1,timeOnlyTitle:"Choose Duration",timeText:"Duration",showSecond:!0,timeFormat:"HH:mm:ss",onClose:function(){WO.Planner.UpdateStatus()},beforeShow:function(){var t=n(this).datepicker("widget");t.parent().hasClass("fit-ui")||n(this).datepicker("widget").wrap("<div class='fit-ui'/>")}});n.each(WO.Data.Routes,function(t,i){n("#routeSelector").empty();n("<option>").val(i.ID).text(i.Name).appendTo("#routeSelector")});n.each(WO.Data.Workouts,function(t,i){n("<option>").val(i.ID).text(i.Name).appendTo("#workoutSelector")});d=-1;switch(st){case"list":d=0;break;case"calendar":d=1;break;case"upcomming":d=2;break;default:d=-1}g=[];t==!1&&g.push(0);i==!1&&g.push(1);r==!1&&g.push(2);d==-1&&(t==!0?d=0:i==!0?d=1:r==!0&&(d=2));g.length>=2&&(n("#workoutTabs > ul").hide(),ut=="true"?(d==0&&t==!1||d==1&&i==!1||d==2&&r==!1)&&alert("The website administrator has not configured the workout logger correctly.  The default tab ("+st+") has has been set to disabled."):t==!1&&i==!1&&r==!1&&ut=="default"&&n(".workoutView").hide());console.log("act2",g,d);jQuery("#workoutTabs ul li a").each(function(){var n=jQuery(this).attr("href"),t=n.indexOf("#");jQuery(this).attr("href",n.substr(t))});n("#workoutTabs").tabs({disabled:g,active:d,activate:function(t,i){console.log("id",i.newPanel.attr("id"));i.newPanel.attr("id")=="tab-2"&&n("#fullCalendar").fullCalendar("render")}});n("#fullCalendar").fullCalendar(WO.CalendarSettings);n("#prevMonth").bind("click",WO.Grid.GoToPrevMonth);n("#nextMonth").bind("click",WO.Grid.GoToNextMonth);n("#currentDate").text(n.datepicker.formatDate("M yy",new Date));var nt=[],tt=[],it=[],rt=0;u!=!1?(tt.push(WO.Grid.DataParser("Date")),nt.push("Date"),it.push(85)):rt+=85;f!=!1?(tt.push(WO.Grid.DataParser("Distance")),nt.push("Distance"),it.push(70)):rt+=70;e!=!1?(tt.push(WO.Grid.DataParser("Duration")),nt.push("Duration"),it.push(70)):rt+=70;o!=!1?(tt.push(WO.Grid.DataParser("Activity")),nt.push("Activity"),it.push(100)):rt+=100;s==!1&&(rt+=75);tt.push(WO.Grid.DataParser("Description"));nt.push("Description");it.push(297+rt);s!=!1&&(tt.push(WO.Grid.DataParser("Status")),nt.push("Status"),it.push(75));WO.Grid.hGrid=n("#gridView").handsontable({startRows:8,startCols:6,rowHeaders:!1,colHeaders:nt,colWidths:it,minSpareRows:0,contextMenu:!1,manualColumnResize:!1,data:WO.Data.GridExercises,autoWrapRow:!0,fillHandle:!1,dataSchema:new WO.Objects.Exercise({ActivityStart:new Date,EndDate:new Date}),columns:tt});WO.Grid.hGrid.find("table").addClass("table-striped");WO.Grid.hGrid.find("table").addClass("table-hover");n("#yearSelector").bind("change",function(t){t.originalEvent!==undefined&&(WO.Grid.paginator.currentDate=new Date(n(this).val(),1,1),WO.Grid.GoToPrevMonth());WO.CalendarSettings.year=n(this).val();WO.Ajax.GetActivities(new Date(n(this).val(),0,1),new Date(n(this).val(),11,31))});WO.Chart.rPaper=new Raphael("graphArea",700,400);WO.Chart.Render();WO.Chart.Memory.lastChecked=document.getElementById("timeCheck");n("#graphOptions").find("input").each(function(t,i){n(i).bind("change",function(t){n(t.target).is(":checked")?(n("input","#graphOptions").not(this).not(WO.Chart.Memory.lastChecked).removeAttr("checked"),WO.Chart.Memory.lastChecked=t.target):WO.Chart.Memory.lastChecked=n("input:checked","#graphOptions").first();WO.Chart.Render()})});ot=n.grep(WO.Data.ExerciseTypes,function(n){return n.ActivityTypeId==10});ot.length>0&&n.each(ot,function(t,i){n("<option>").val(i.ExerciseTypeID).text(i.Name).appendTo("#gymTemplate .gymExerciseSelector")})}};WO.Data.Workouts=[new WO.Objects.Workout({ID:0,Name:"Select Workout ",MetaData:""}),new WO.Objects.Workout({ID:1,Name:"Running",MetaData:"Run,Ran,Runs,Running"}),new WO.Objects.Workout({ID:3,Name:"Walking",MetaData:"Walk,Walked,Walks,Walking"}),new WO.Objects.Workout({ID:8,Name:"Cycling",MetaData:"Cycle,Cycled,Cycles,Cycling"}),new WO.Objects.Workout({ID:2,Name:"Swimming",MetaData:"Swim,Swam,Swum,Swims,Swimming"}),new WO.Objects.Workout({ID:4,Name:"Mountain Biking",MetaData:"Mountain Biking,bike"}),new WO.Objects.Workout({ID:5,Name:"Kayaking",MetaData:"Kayake,Kayaked,Kayakes,Kayaking,Navigate,Navigated,Navigates,Navigating"}),new WO.Objects.Workout({ID:7,Name:"Orienteering",MetaData:"Orienteer,Orienteered,Orienteers,Orienteering"}),new WO.Objects.Workout({ID:6,Name:"Rowing",MetaData:"Row,Rowed,Rows,Rowing"}),new WO.Objects.Workout({ID:9,Name:"Other",MetaData:"Other"}),new WO.Objects.Workout({ID:10,Name:"Gym",MetaData:"Gym,Gymmed,Gyms,Exercise"}),new WO.Objects.Workout({ID:11,Name:"Fitness Test",MetaData:"Test,Fitness"})];WO.Data.FitnessTestComb=[{Name:"Standard",Combination:[88,109,111,148,133,145]}];WO.Data.ExerciseTypes=[{ExerciseTypeID:10,ActivityTypeId:1,IsReps:!1,HasWeight:!1,Name:"Cross Train"},{ExerciseTypeID:6,ActivityTypeId:1,IsReps:!1,HasWeight:!1,Name:"Easy Run"},{ExerciseTypeID:20,ActivityTypeId:1,IsReps:!1,HasWeight:!1,Name:"Fartlek"},{ExerciseTypeID:1,ActivityTypeId:1,IsReps:!1,HasWeight:!1,Name:"Hill"},{ExerciseTypeID:7,ActivityTypeId:1,IsReps:!1,HasWeight:!1,Name:"Long Run"},{ExerciseTypeID:5,ActivityTypeId:1,IsReps:!1,HasWeight:!1,Name:"Speed"},{ExerciseTypeID:8,ActivityTypeId:1,IsReps:!1,HasWeight:!1,Name:"Tempo Run"},{ExerciseTypeID:11,ActivityTypeId:2,IsReps:!1,HasWeight:!1,Name:"Backstroke"},{ExerciseTypeID:12,ActivityTypeId:2,IsReps:!1,HasWeight:!1,Name:"Breaststroke"},{ExerciseTypeID:13,ActivityTypeId:2,IsReps:!1,HasWeight:!1,Name:"Butterfly"},{ExerciseTypeID:17,ActivityTypeId:2,IsReps:!1,HasWeight:!1,Name:"Freestyle"},{ExerciseTypeID:19,ActivityTypeId:2,IsReps:!1,HasWeight:!1,Name:"Mixed"},{ExerciseTypeID:18,ActivityTypeId:2,IsReps:!1,HasWeight:!1,Name:"Sidestroke"},{ExerciseTypeID:21,ActivityTypeId:8,IsReps:!1,HasWeight:!1,Name:"Easy"},{ExerciseTypeID:22,ActivityTypeId:8,IsReps:!1,HasWeight:!1,Name:"Hill"},{ExerciseTypeID:23,ActivityTypeId:8,IsReps:!1,HasWeight:!1,Name:"Interval"},{ExerciseTypeID:24,ActivityTypeId:8,IsReps:!1,HasWeight:!1,Name:"Long"},{ExerciseTypeID:26,ActivityTypeId:8,IsReps:!1,HasWeight:!1,Name:"Race"},{ExerciseTypeID:25,ActivityTypeId:8,IsReps:!1,HasWeight:!1,Name:"Tempo"},{ExerciseTypeID:149,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Ab Crunch"},{ExerciseTypeID:150,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Adductor Stretch"},{ExerciseTypeID:151,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Assisted Chin Up"},{ExerciseTypeID:152,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Back Extension Frame"},{ExerciseTypeID:68,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Ball Boxers Chop"},{ExerciseTypeID:69,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Ball Bridging"},{ExerciseTypeID:70,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Ball Crunch"},{ExerciseTypeID:71,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Ball Hammie Curl"},{ExerciseTypeID:72,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Ball Oblique Crunch"},{ExerciseTypeID:73,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Ball Plank"},{ExerciseTypeID:74,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Ball Plank - Mountain Climber"},{ExerciseTypeID:75,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Ball Plank - Single Leg Lift"},{ExerciseTypeID:76,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Ball Press Up - Hands on"},{ExerciseTypeID:153,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Ball Roll Out"},{ExerciseTypeID:77,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Ball Wall Press Up"},{ExerciseTypeID:78,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Ball Wall Squat"},{ExerciseTypeID:79,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Ball Wall Tricep Ext"},{ExerciseTypeID:154,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Bear Crawl"},{ExerciseTypeID:155,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Bench Hop"},{ExerciseTypeID:156,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Bench Pull Over - DB"},{ExerciseTypeID:80,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Bench Row"},{ExerciseTypeID:81,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Bent Over T'Y'I"},{ExerciseTypeID:82,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Bicep Curl"},{ExerciseTypeID:83,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Bicep Curls"},{ExerciseTypeID:157,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Biceps Stretch"},{ExerciseTypeID:158,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Bike"},{ExerciseTypeID:159,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Bike Intervals"},{ExerciseTypeID:160,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Bosu Plank"},{ExerciseTypeID:161,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Box Jumps"},{ExerciseTypeID:84,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Boxers Chop"},{ExerciseTypeID:162,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Boxers Chop Med Ball"},{ExerciseTypeID:85,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Burpees"},{ExerciseTypeID:163,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Cable Chop"},{ExerciseTypeID:164,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Cable Tricep Extension"},{ExerciseTypeID:165,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Calve Raises"},{ExerciseTypeID:166,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Calve Stretch"},{ExerciseTypeID:86,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Chest Fly"},{ExerciseTypeID:87,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Chest Press"},{ExerciseTypeID:167,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Chest Press Machine"},{ExerciseTypeID:168,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Chest Stretch"},{ExerciseTypeID:169,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Chin Ups"},{ExerciseTypeID:170,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Clean + Press"},{ExerciseTypeID:171,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Cobra Stretch"},{ExerciseTypeID:172,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Cross Crunch"},{ExerciseTypeID:173,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Crunch"},{ExerciseTypeID:174,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Crunch - Feet Up"},{ExerciseTypeID:88,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Crunches"},{ExerciseTypeID:89,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Cycle"},{ExerciseTypeID:175,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Cycle Crunch"},{ExerciseTypeID:90,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Cycle Intervals"},{ExerciseTypeID:176,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"DB Bench Row"},{ExerciseTypeID:177,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"DB Chest Press"},{ExerciseTypeID:91,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"DB Hip Abduct"},{ExerciseTypeID:178,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"DB Shoulder Press"},{ExerciseTypeID:179,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Deltoid Stretch"},{ExerciseTypeID:180,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Dips"},{ExerciseTypeID:181,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Downward Dog"},{ExerciseTypeID:182,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Dumbbell Flys"},{ExerciseTypeID:92,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Glute Bridging"},{ExerciseTypeID:183,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Gluteus Stretch"},{ExerciseTypeID:184,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Hack Squat Machine"},{ExerciseTypeID:93,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Hammie Curl - SL Lift"},{ExerciseTypeID:185,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Hamstring + Lats Stretch"},{ExerciseTypeID:94,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Hamstring Curl"},{ExerciseTypeID:186,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Hamstring Stretch"},{ExerciseTypeID:95,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Hand Walk Outs"},{ExerciseTypeID:187,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Hip Flexor + Rotation Stretch"},{ExerciseTypeID:188,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Hip Flexor Stretch"},{ExerciseTypeID:189,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Ice Skate Lunges"},{ExerciseTypeID:190,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Jog"},{ExerciseTypeID:96,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Jog:Run Intervals"},{ExerciseTypeID:191,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Jump Lunge"},{ExerciseTypeID:192,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Jump Squat"},{ExerciseTypeID:97,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Knees to Stand"},{ExerciseTypeID:193,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Lat Pull"},{ExerciseTypeID:98,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Lat Pull Down"},{ExerciseTypeID:99,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Lateral Raise"},{ExerciseTypeID:100,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Lateral Squat"},{ExerciseTypeID:194,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Lats Stretch"},{ExerciseTypeID:195,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Leg Curl"},{ExerciseTypeID:196,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Leg Extension"},{ExerciseTypeID:101,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Leg Press"},{ExerciseTypeID:197,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Lumbar Stretch"},{ExerciseTypeID:102,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Lunge + Bicep Curl"},{ExerciseTypeID:198,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Lunge Walk"},{ExerciseTypeID:103,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Lunges"},{ExerciseTypeID:199,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Machine Chest Fly"},{ExerciseTypeID:104,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Machine Row"},{ExerciseTypeID:200,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Med Ball Boxers Chop"},{ExerciseTypeID:201,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Med Ball Squat Press"},{ExerciseTypeID:202,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Military Press"},{ExerciseTypeID:105,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Mountain Climber"},{ExerciseTypeID:106,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Oblique Crunches"},{ExerciseTypeID:107,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Outdoor Walk"},{ExerciseTypeID:108,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Outdoor Walk/Jog/Cycle/Swim"},{ExerciseTypeID:203,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Pec Stretch"},{ExerciseTypeID:109,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Plank"},{ExerciseTypeID:204,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Plank Single Leg"},{ExerciseTypeID:205,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Plank Sl Lift + Hold"},{ExerciseTypeID:110,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Plank to Press Up"},{ExerciseTypeID:206,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Power Clean"},{ExerciseTypeID:111,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Press Ups"},{ExerciseTypeID:112,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Pull Over"},{ExerciseTypeID:207,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Quadricep Stretch"},{ExerciseTypeID:113,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Renegade Row"},{ExerciseTypeID:208,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Reverse Crunches"},{ExerciseTypeID:209,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Reverse Fly"},{ExerciseTypeID:210,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Rhomboid Stretch"},{ExerciseTypeID:211,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Roll Downs"},{ExerciseTypeID:114,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Roll Out"},{ExerciseTypeID:212,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Roman Chair"},{ExerciseTypeID:115,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Roman Chair Knee Tuck"},{ExerciseTypeID:116,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Romanian Dead Lift"},{ExerciseTypeID:213,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Rotation Stretch"},{ExerciseTypeID:117,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Rower"},{ExerciseTypeID:214,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Run"},{ExerciseTypeID:215,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Run : Walk"},{ExerciseTypeID:118,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Russian Twist - Upper"},{ExerciseTypeID:119,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Russian Twist Lower"},{ExerciseTypeID:120,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"SA Bench Row"},{ExerciseTypeID:121,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"SA Clean"},{ExerciseTypeID:216,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Seated Row"},{ExerciseTypeID:122,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Shoulder Press"},{ExerciseTypeID:217,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Shrugs DBs"},{ExerciseTypeID:148,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Side Plank"},{ExerciseTypeID:218,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Sizzer Kicks"},{ExerciseTypeID:219,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Skipping"},{ExerciseTypeID:125,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Skipping Intervals"},{ExerciseTypeID:126,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"SL Drop"},{ExerciseTypeID:220,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Smith Squat"},{ExerciseTypeID:221,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Spin Bike"},{ExerciseTypeID:222,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Split Jump"},{ExerciseTypeID:127,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Squat"},{ExerciseTypeID:223,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Squat + Med Ball Press"},{ExerciseTypeID:224,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Squat Jumps"},{ExerciseTypeID:128,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Squat Press"},{ExerciseTypeID:130,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Squat w Overhead Lift"},{ExerciseTypeID:131,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Squats"},{ExerciseTypeID:132,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Star Jump Intervals"},{ExerciseTypeID:225,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Star Jumps"},{ExerciseTypeID:226,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Step Back Lunges"},{ExerciseTypeID:134,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Step Up Intervals"},{ExerciseTypeID:133,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Step Ups"},{ExerciseTypeID:227,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Stomach Stretch"},{ExerciseTypeID:135,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Stretches"},{ExerciseTypeID:136,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Sumo Squat"},{ExerciseTypeID:137,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Supine Lat Roll"},{ExerciseTypeID:228,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Supine SL Drop"},{ExerciseTypeID:229,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Supine Toe Touch"},{ExerciseTypeID:138,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Swing"},{ExerciseTypeID:230,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Swiss Ball Crunches"},{ExerciseTypeID:231,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Swiss Ball Knee Tuck"},{ExerciseTypeID:139,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Treadmill"},{ExerciseTypeID:140,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Treadmill Intervals"},{ExerciseTypeID:141,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Treadmill Walk"},{ExerciseTypeID:142,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Tricep Dips"},{ExerciseTypeID:143,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Tricep Extension"},{ExerciseTypeID:232,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Tricep Extension Cable"},{ExerciseTypeID:233,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Tricep Stretch"},{ExerciseTypeID:234,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Tuck Jump"},{ExerciseTypeID:235,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Upright Row"},{ExerciseTypeID:144,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Walk"},{ExerciseTypeID:236,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Walk / Jog"},{ExerciseTypeID:237,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Walk / Run"},{ExerciseTypeID:145,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Wall Sit"},{ExerciseTypeID:146,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Windmill"},{ExerciseTypeID:147,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"X Trainer"},{ExerciseTypeID:88,ActivityTypeId:11,IsReps:!1,HasWeight:!1,Name:"Crunches"},{ExerciseTypeID:109,ActivityTypeId:11,IsReps:!1,HasWeight:!1,Name:"Plank"},{ExerciseTypeID:111,ActivityTypeId:10,IsReps:!0,HasWeight:!0,Name:"Press Ups"},{ExerciseTypeID:148,ActivityTypeId:10,IsReps:!1,HasWeight:!1,Name:"Side Plank"},{ExerciseTypeID:133,ActivityTypeId:11,IsReps:!0,HasWeight:!0,Name:"Step Ups"},{ExerciseTypeID:145,ActivityTypeId:11,IsReps:!1,HasWeight:!1,Name:"Wall sit "}]})